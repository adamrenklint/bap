// Bap v0.7.2 (http://bapjs.org)
// License: MIT Â© 2015 Adam Renklint (http://adamrenklint.com)

!function t(e,n,i){function r(a,s){if(!n[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[a]={exports:{}};e[a][0].call(l.exports,function(t){var n=e[a][1][t];return r(n?n:t)},l,l.exports,t,e,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(t,e,n){(function(i){var r=t("./lib/Bap");e.exports=i.bap=new r,n.Bap=i.Bap=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./lib/Bap":2}],2:[function(t,e){function n(t,e){var n=[null].concat(e),i=t.bind.apply(t,n);return new i}var i=t("./utils/vent"),r=t("./Model"),o=t("./Clock"),a=t("./LoadingState"),s=t("./types/numberInRange");t("./utils/performanceTimePolyfill")();var u=r.extend({type:"bap",children:{clock:o,loadingState:a},props:{volume:["volumeRange",!0,100]},dataTypes:{volumeRange:s("volumeRange",0,999)},initialize:function(){r.prototype.initialize.apply(this,arguments),this.vent.bap=this,this.on("change:loadingState.loading",this._onChangeLoadingState)},_onChangeLoadingState:function(){this.vent.loading=this.loadingState.loading}}),c={Kit:t("./Kit"),Slot:t("./Slot"),Layer:t("./Layer"),Pattern:t("./Pattern"),Sequence:t("./Sequence"),Channel:t("./Channel"),Note:t("./Note"),Oscillator:t("./Oscillator"),Sample:t("./Sample"),Reverb:t("./effects/Reverb"),Delay:t("./effects/Delay"),Compressor:t("./effects/Compressor"),Overdrive:t("./effects/Overdrive"),Filter:t("./effects/Filter"),Chorus:t("./effects/Chorus"),Phaser:t("./effects/Phaser"),PingPong:t("./effects/PingPongDelay")};Object.keys(c).forEach(function(t){var e=c[t];u.prototype[t]=e,u.prototype[t.toLowerCase()]=function(){return n(e,[].slice.call(arguments))}}),u.prototype.new=function(){return i.reset(),new u},u.pitchByRatio=function(t){return 12*Math.log2(t)},u.Model=r,e.exports=u},{"./Channel":4,"./Clock":5,"./Kit":8,"./Layer":9,"./LoadingState":10,"./Model":11,"./Note":12,"./Oscillator":13,"./Pattern":15,"./Sample":18,"./Sequence":19,"./Slot":20,"./effects/Chorus":21,"./effects/Compressor":22,"./effects/Delay":23,"./effects/Filter":24,"./effects/Overdrive":25,"./effects/Phaser":26,"./effects/PingPongDelay":27,"./effects/Reverb":28,"./types/numberInRange":39,"./utils/performanceTimePolyfill":42,"./utils/vent":45}],3:[function(t,e){var n=t("./Model"),i=t("meemo"),r=t("audio-buffer-utils"),o=n.extend({type:"bufferHelper"});o.silentTailSize=250,o.trimStart=function(t,e){for(var n=t.getChannelData(e),i=!1,r=0;!i&&r<t.length;)n[r]>0?i=!0:(n[r]=0,r++)},o.trimEnd=function(t,e){for(var n=t.getChannelData(e),i=!1,r=t.length-1;!i&&r>=0;)n[r]<0?i=!0:(n[r]=0,r--)},o.bitcrush=function(t,e,n){for(var i,r=t.getChannelData(e),o=n.bitcrush,a=(n.bitcrushFrequency-20)/22030,s=(n.bitcrushMix||50)/100,u=Math.pow(.5,o),c=0,l=0,h=0;h<t.length;h++){if(c+=a,c>=1&&(c-=1,l=u*Math.floor(r[h]/u+.5)),i=l,1!==s){var f=i*s,p=r[h]*(1-s);i=f+p}r[h]=i}},o.getCopyLength=function(t,e){var n=Math.floor(e.sampleRate*t.length),i=Math.floor(e.sampleRate*t.offset);return t.loop&&(n=Math.floor(e.sampleRate*t.loop)),n>e.length?e.length:i+n>e.length?e.length-i:n},o.getChannelCount=function(t,e){var n=["left","right","diff","merge"];return~n.indexOf(t.channel)?1:e.numberOfChannels},o.getSourceChannel=function(t,e){return 1===e.numberOfChannels?0:"left"===t.channel?0:"right"===t.channel?1:null},o.getSourceStartIndex=function(t,e){var n=Math.floor(e.sampleRate*t.offset);if(n>=e.length)throw new Error("Invalid buffer source start index: params.offset is greater or equal to original buffer length");return n},o.getTargetStartIndex=function(t){return t.trimToZeroCrossingPoint&&t.reverse&&!t.loop?o.silentTailSize:0},o.getRealLength=function(t,e){return t.trimToZeroCrossingPoint&&!t.loop?e+o.silentTailSize:e},o.copyChannelData=function(t,e,n,i,r,o,a){for(var s=t.getChannelData(n),u=e.getChannelData(i),c=o-r,l=r,h=r+a;h>l;l++)u[l+c]=s[l]},o.diffChannelsData=function(t,e,n,i,r){for(var o=t.getChannelData(0),a=t.getChannelData(1),s=e.getChannelData(0),u=i-n,c=n,l=n+r;l>c;c++)s[c+u]=o[c]-a[c]},o.mergeChannelsData=function(t,e,n,i,r){for(var o=t.getChannelData(0),a=t.getChannelData(1),s=e.getChannelData(0),u=i-n,c=n,l=n+r;l>c;c++)s[c+u]=o[c]+a[c]},o.makeBuffer=i(function(t,e,n){var i=(new Date,e.sampleRate),a=o.getChannelCount(t,e),s=o.getSourceChannel(t,e),u=o.getSourceStartIndex(t,e),c=o.getTargetStartIndex(t),l=o.getCopyLength(t,e),h=o.getRealLength(t,l),f=n.createBuffer(a,h,i);if(s)o.copyChannelData(e,f,s,0,u,c,l);else if("diff"===t.channel)o.diffChannelsData(e,f,u,c,l);else if("merge"===t.channel)o.mergeChannelsData(e,f,u,c,l);else for(var p=0;p<e.numberOfChannels;p++)o.copyChannelData(e,f,p,p,u,c,l);t.reverse&&r.reverse(f);for(var d=0;a>d;d++)t.trimToZeroCrossingPoint&&!t.loop&&(o.trimStart(f,d),o.trimEnd(f,d)),t.bitcrush&&o.bitcrush(f,d,t);return f},function(t,e){var n=e.uid;return["length","offset","loop","reverse","trimEndToZeroCrossingPoint","channel","bitcrush","bitcrushFrequency","bitcrushMix"].forEach(function(e){n+="//"+e+":"+t[e]}),n}),e.exports=o},{"./Model":11,"audio-buffer-utils":51,meemo:140}],4:[function(t,e){var n=t("./Model"),i=t("./Note"),r=t("./Collection"),o=t("./mixins/volumeParams"),a=t("./mixins/connectable"),s=t("./mixins/bypassable"),u=t("dilla-expressions"),c=r.extend({model:i}),l=n.extend(o,s,{type:"channel",props:{transform:"function"},collections:{rawNotes:c,expandedNotes:c},initialize:function(){n.prototype.initialize.apply(this,arguments),this._cache={},this.listenTo(this.rawNotes,"add",this._onAddRawNote),this.listenTo(this.rawNotes,"remove",this._onRemoveRawNote),this.listenTo(this.rawNotes,"change:position",this._onChangeRawNote),this.listenTo(this.expandedNotes,"start",this._start),this.listenTo(this.expandedNotes,"stop",this._stop),this.listenTo(this.expandedNotes,"add",this._onAddExpandedNote),this.listenTo(this.expandedNotes,"remove",this._onRemoveExpandedNote),this.cacheMethodUntilEvent("notes","change:expandedNotes")},add:function(){var t=[].slice.call(arguments).map(function(t){return t instanceof i?t:i.fromRaw(t)});return this.rawNotes.add(t),this},notes:function(t,e,n){if(!t)return this.expandedNotes.models.slice();var i=this._cache,r=i[t];if(!e)return(r&&r["*"]||[]).slice();var o=r&&r[e];return n?(o&&o[n]||[]).slice():(o&&o["*"]||[]).slice()},transforms:function(t){if(!(t&&t instanceof i))throw new Error("Invalid argument: note is not an instance of bap.note");var e=this.collection&&this.collection.parent,n=[];return[t,this,e].forEach(function(t){t&&t.transform&&"function"==typeof t.transform&&n.push(t.transform)}),n.length?function(t){n.forEach(function(e){e(t)})}:!1},_onAddExpandedNote:function(t){var e=this._cache,n=t.bar,i=t.beat,r=t.tick;e[n]=e[n]||{},e[n]["*"]=e[n]["*"]||[],e[n]["*"].push(t),e[n][i]=e[n][i]||{},e[n][i]["*"]=e[n][i]["*"]||[],e[n][i]["*"].push(t),e[n][i][r]=e[n][i][r]||[],e[n][i][r].push(t)},_onRemoveExpandedNote:function(t){var e=this._cache,n=t.bar,i=t.beat,r=t.tick,o=e[n]["*"].indexOf(t);e[n]["*"].splice(o,1);var a=e[n][i]["*"].indexOf(t);e[n][i]["*"].splice(a,1);var s=e[n][i][r].indexOf(t);e[n][i][r].splice(s,1)},_onAddRawNote:function(t){var e=this.transforms(t);if(t.hasPlainPosition()&&!e)return t.original=t,this.expandedNotes.add(t);var n=this.collection&&this.collection.parent,i={barsPerLoop:n&&n.bars||1,beatsPerBar:n&&n.beatsPerBar||4};u([[t.position]],i).forEach(function(n){var i=t.with({position:n[0]});i.original=t,e&&e(i),this.expandedNotes.add(i)}.bind(this))},_onRemoveRawNote:function(t){this.expandedNotes.models.slice().forEach(function(e){t===e.original&&(this.expandedNotes.remove(e),e.original=null)}.bind(this))},_onChangeRawNote:function(t){this._onRemoveRawNote(t),this._onAddRawNote(t)},_start:function(t,e){this.mute||this.trigger("start",t,e,this)},_stop:function(t,e){this.trigger("stop",t,e,this)}},a);e.exports=l},{"./Collection":6,"./Model":11,"./Note":12,"./mixins/bypassable":29,"./mixins/connectable":30,"./mixins/volumeParams":36,"dilla-expressions":59}],5:[function(t,e){(function(n){function i(t){u=!0;var e=t.createBufferSource();e.buffer=t.createBuffer(1,22050,44100),e.start(0)}var r=t("./PositionModel"),o=t("dilla"),a=t("./types/instanceOfType"),s=(t("lodash.debounce"),t("meemo")),u=!1,c=r.extend({type:"clock",props:{playing:["boolean",!0,!1],sequence:"sequenceInstance",tempo:["number",!0,0],step:"function",looped:["number",!0,0],_lastQueuedPosition:["string",!0,"0.0.00"],_stopByFold:"boolean"},dataTypes:{sequenceInstance:a("sequenceInstance",["sequence","pattern"])},initialize:function(){r.prototype.initialize.call(this),this.on("change:playing",this._onChangePlaying),this.on("change:sequence",this._onChangeSequence),this.on("change:position",this._onChangePosition),this.on("change:tempo",this._onChangeTempo),this.on("change:bar",this._scheduleSteps),this.on("change:beat",this._scheduleSteps),this.engine=new o(this.context),this.listenTo(this.engine,"tick",this._onEngineTick.bind(this)),this.listenTo(this.engine,"step",this._onEngineStep.bind(this)),this.engine.off=this.engine.removeAllListeners.bind(this.engine),this.listenTo(this.vent,"clock:start",this.start),this.listenTo(this.vent,"clock:pause",this.pause),this.listenTo(this.vent,"clock:stop",this.stop),this.listenTo(this.vent,"clock:tempo",this._applySequenceTempo)},_canStartPlaying:function(){return"loading"!==n.document.readyState&&!this.vent.loading},start:function(t){return u||i(this.context),this._canStartPlaying()?(t&&(this.sequence=t),this.sequence?(this._stopByFold&&(this.position="1.1.01",this._stopByFold=!1),setTimeout(this.engine.start.bind(this.engine),1),this.playing=!0,void(!t&&this.sequence&&"0.0.00"!==this.position&&(this._lastQueuedPosition=this.position,this.engine.setPosition(this.position),this._updateTempo(this.position)))):console.warn("Could not start bap.clock, no sequence has been defined")):setTimeout(function(){this.start(t)}.bind(this),10)},pause:function(t){t&&t!==this.sequence||(this.engine.pause(),this.playing=!1,this._lastQueuedPosition="0.0.00")},stop:function(t){t&&t!==this.sequence||(this.engine.stop(),this.playing=!1,this.position="1.1.01",this.looped=0,this._lastQueuedPosition="0.0.00")},_scheduleSteps:function(){this.engine.set("lookahead",this._lookaheadSteps())},_lookaheadSteps:function(){var t=this.bar||1,e=this.beat||1,n=this.sequence&&this.sequence.beatsPerBar||4,i=this.sequence&&this.sequence.bars||1,r=this.sequence&&this.sequence.loop,o=r&&17>=i?c.possibleSteps:c.uncachedPossibleSteps;return o(t,e,i,n)},_onChangePlaying:function(){var t=this.playing?"start":"pause";this[t](),this.sequence&&(this.sequence.playing=this.playing)},_onChangeSequence:function(){var t=this._previousAttributes.sequence;t&&this.stopListening(t),this.listenTo(this.sequence,"change:bars",this._onChangeSequence),this.listenTo(this.sequence,"change:beatsPerBar",this._onChangeSequence),this.engine.setBeatsPerBar(this.sequence.beatsPerBar),this.engine.setLoopLength(this.sequence.bars),this.tempo=this.sequence.tempo,this.looped=0,this._scheduleSteps()},_onChangePosition:function(){"0.0.00"!==this.position&&this.position!==this.engine._position&&this.engine.setPosition(this.position)},_onChangeTempo:function(){this.engine.setTempo(this.tempo)},_onEngineTick:function(t){this.playing&&"0.0.00"!==t.position&&(this._stopByFold?(this.pause(),this.tick=96):(this.position=t.position,this.tempo=this.engine.tempo()))},_onEngineStep:function(t){this.playing&&this.sequence&&("lookahead"!==t.id||this._foldingOverLoop(t.position)||(this._updateTempo(t.position),this._queueNotesForStep(t.position,t.time),this._lastQueuedPosition=t.position))},_updateTempo:function(t){if(this.sequence)if(t&&this.sequence.tempoAt){var e=c.fragments(t),n=c.ticksForTempoChange(this.tempo),i=e[2]>=96-n&&e[1]===this.sequence.beatsPerBar,r=i?e[0]+1:e[0];r>this.sequence.bars&&this.sequence.loop&&(r=1),this.tempo=this.sequence.tempoAt(r)}else this.tempo=this.sequence.tempo;else this.tempo=120},_foldingOverLoop:function(t){var e=c.paddedPosition(this._lastQueuedPosition),n=c.paddedPosition(t);return e>n&&this.looped++,this._stopByFold=!this.sequence.loop&&e>n,this._stopByFold},_queueNotesForStep:function(t,e){if(this.sequence){var n=c.fragments(t),i=this.sequence.notes(n[0],n[1],n[2]);i=Array.isArray(i)?i:i[n[0]];var r="function"==typeof this.step?this.step:null;i.forEach(function(t){(!r||r&&r(t,e)!==!1)&&t.start(e)})}},_applySequenceTempo:function(t){t.tempo=this.engine.tempo()}});c.uncachedPossibleSteps=function(t,e,n,i){function r(){for(var n=0;++n<97;)o[a]=[[t,e,10>n?"0"+n:n].join(".")],a++}var o=new Array(192),a=0;return r(),++e>i&&(e=1,++t>n&&(t=1)),r(),o},c.possibleSteps=s(c.uncachedPossibleSteps,function(){return[].slice.call(arguments).join("//")}),c.ticksForTempoChange=s(function(t){var e=t/100,n=e>2?e-1:1,i=Math.ceil(e*n*4);return 2>i?2:i}),e.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./PositionModel":17,"./types/instanceOfType":38,dilla:60,"lodash.debounce":109,meemo:140}],6:[function(t,e){var n=(t("./utils/context"),t("ampersand-collection"));e.exports=n.extend({nextId:function(){for(var t,e=0;!t;)this.get(++e)||(t=e);return t}})},{"./utils/context":41,"ampersand-collection":47}],7:[function(t,e){(function(n){t("es6-object-assign").polyfill();var i,r,o=t("./Model"),a=t("./types/numberInRange");i=n.window?t("tunajs"):function(){},e.exports=o.extend({type:"effect",props:{bypass:["boolean",!0,!1],nodes:["object",!0,function(){return{}}]},dataTypes:{volumeRange:a("volumeRange",0,999),inclusivePositiveNumber:a("inclusivePositiveNumber",0,1/0),frequencyRange:a("frequencyRange",20,22050)},initialize:function(){o.prototype.initialize.apply(this,arguments),r=r||new i(this.context),this.tuna=r},createNode:function(){throw new Error('Required method "createNode" is not implemented for '+this.cid)},configureNode:function(){throw new Error('Required method "configureNode" is not implemented for '+this.cid)},combineNodes:function(t,e){return t.connect=function(t){e.connect(t)},t.disconnect=function(){e.disconnect()},t},getDestinationId:function(t){var e=this.toJSON();delete e.nodes,delete e.revision,delete e.bypass;var n=JSON.stringify(e);return t+"//"+n},getNode:function(t){var e=this.nodes,n=this.getDestinationId(t),i=e[n];return i||(i=e[n]=this.createNode(),this.configureNode(i)),i}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./Model":11,"./types/numberInRange":39,"es6-object-assign":65,tunajs:158}],8:[function(t,e){var n=t("./Model"),i=t("./Slot"),r=(t("./Collection"),t("./mixins/overloadedAccessor"),t("./mixins/triggerParams")),o=t("./mixins/volumeParams"),a=t("./mixins/connectable"),s=t("./mixins/bypassable"),u=t("./types/instanceOf"),c="QWERTYUIOPASDFGHJKLZXCVBNM".split(""),l={};c.forEach(function(t){l[t]="slot"});var h=n.extend({props:l,dataTypes:{slot:u("slot",i)},extraProperties:"allow"}),f=n.extend(r,o,a,s,{type:"kit",children:{slots:h},slot:function(t,e){if(!t||"string"!=typeof t)throw new Error("Invalid slot identifier: "+t);return e?(this.slots.set(t,e),e.kit=this,this):(e=this.slots[t],e||(e=new i,this.slots.set(t,e),e.kit=this),e)}});e.exports=f},{"./Collection":6,"./Model":11,"./Slot":20,"./mixins/bypassable":29,"./mixins/connectable":30,"./mixins/overloadedAccessor":32,"./mixins/triggerParams":35,"./mixins/volumeParams":36,"./types/instanceOf":37}],9:[function(t,e){function n(t){var e=[];return function(n){return n?void e.push(n):e.length?e.shift():u[t]()}}var i=t("./Model"),r=t("./mixins/triggerParams"),o=t("./mixins/volumeParams"),a=t("./mixins/connectable"),s=(t("./mixins/bypassable"),t("./Params")),u=null,c=n("createGain"),l=n("createPanner"),h=null,f=i.extend(r,o,{type:"layer",props:{sources:["object",!0,function(){return{}}]},start:function(t,e,n,i,r,o){if(!this.mute){"number"!=typeof t&&(i=n,n=e,e=t,t=this.context.currentTime),e=e||{},u=u||this.context;var a=this._params(e,n,i,r,o),s=this._source(a);if(s){var h=this._getConnections(e,n,i),f=this._connectDestination(h,a),p=s._gain=c();this._configureAttack(t,a,p,f);var d=this._configurePan(a,p);s.connect(d||p),this._startSource(t,a,s),this._triggerPlaybackStateEvent("started",t,a,e,n,i,r,o);var v=e.cid||"null";if(this.sources[v]=this.sources[v]||[],this.sources[v].push(s),a.length){var g=this._getStopTime(t,a,s);this.stop(g,e,n,i)}s.onended=function(){var t=this.sources[v].indexOf(s);this.sources[v].splice(t,1),p.disconnect(),s.disconnect(),d&&(d.disconnect(),l(d)),c(p),this._triggerPlaybackStateEvent("stopped",this.context.currentTime,a,e,n,i,r,o),s=s.onended=s._gain=p=d=null,"function"==typeof e.after&&e.after()}.bind(this)}}},_getStopTime:function(t,e){return t+e.length},_triggerPlaybackStateEvent:function(t,e,n,i,r,o,a,s){var c=this,l=Math.floor(1e3*(e-u.currentTime))-1;0>l&&(l=0),setTimeout(function(){[i,r,o,a,s,c].forEach(function(e){e&&e.trigger(t,i,n)})},l)},stop:function(t,e,n,i,r,o){"number"!=typeof t&&(i=n,n=e,e=t,t=this.context.currentTime),e=e||{};var a=this._params(e,n,i,r,o),s=e.cid||"null",u=this.sources[s]||[];"null"===s&&(u=[],Object.keys(this.sources).forEach(function(t){u=u.concat(this.sources[t])}.bind(this))),u.forEach(function(e){e._gain&&this._configureRelease(t,a,e._gain),this._stopSource(t,a,e)}.bind(this))},_paramsSources:function(t,e,n,i,r){r=r||this.collection&&this.collection.parent||{},i=i||r&&r.kit||{};var o={volume:n&&n.volume,pitch:n&&n.pitch,pan:n&&n.pan};return[t,e,o,this,r,i]},_params:function(t,e,n,i,r){var o=this._paramsSources(t,e,n,i,r);return s.fromSources(o)},_getConnections:function(t,e,n){var i=this._paramsSources(t,e,n),r=[];return i.forEach(function(t){t&&t.connections&&(r=r.concat(t.connections))}),r},_createGain:function(){return this.context.createGain()},_startSource:function(t,e,n){n.start(t)},_stopSource:function(t,e,n){n.stop(t)},_source:function(){throw new Error('Required method "_source" is not implemented for '+this.cid)},_getLocalDestination:function(){return h||(h=c(),h.connect(this.context.destination)),h.gain.value=this.vent.bap.volume/100*.8,h},_connectDestination:function(t,e){var n=this._getLocalDestination();if(e.bypass===!0)return n;var i=this.cid;return t.filter(function(t){return e.bypass===t.type||Array.isArray(e.bypass)&&~e.bypass.indexOf(t.type)?!1:!t.bypass}).reverse().forEach(function(t,e,r){var o=r[e-1],a=t.getNode(o&&o.cid||"destination");a.__connectedTo&&a.__connectedTo!==n?console.error("Attempted to reconnect already connected effect ("+t.cid+") for target "+i):a._connectedTo||(a.connect(n),a._connectedTo=n),n=a}),n},_configurePan:function(t,e){if(0!==t.pan){var n=l(),i=t.pan/100,r=1-Math.abs(i);return n.setPosition(i,0,r),n.connect(e),n}},_configureAttack:function(t,e,n,i){var r=(null!==e.volume&&void 0!==e.volume?e.volume:100)/100;n.connect(i),n.gain.value=0,n.gain.setValueAtTime(0,t),n.gain.linearRampToValueAtTime(r,t+e.attack)},_configureRelease:function(t,e,n){var i=(null!==e.volume&&void 0!==e.volume?e.volume:100)/100;e.release&&(n.gain.cancelScheduledValues(t-.001),n.gain.linearRampToValueAtTime(i,t-e.release),n.gain.linearRampToValueAtTime(0,t))}},a);e.exports=f},{"./Model":11,"./Params":14,"./mixins/bypassable":29,"./mixins/connectable":30,"./mixins/triggerParams":35,"./mixins/volumeParams":36}],10:[function(t,e){var n=t("./Model"),i=n.extend({type:"loadingState",props:{sources:["array",!0,function(){return[]}]},derived:{loading:{deps:["sources"],fn:function(){return!!this.sources.length}}},initialize:function(){n.prototype.initialize.apply(this,arguments),this.listenTo(this.vent,"loadingState:add",this._addSource),this.listenTo(this.vent,"loadingState:remove",this._removeSource),this.trigger("change:sources")},_addSource:function(t){this.sources.indexOf(t)<0&&(this.sources.push(t),this.trigger("change:sources"))},_removeSource:function(t){var e=this.sources.indexOf(t);e>-1&&(this.sources.splice(e,1),this.trigger("change:sources"))}});e.exports=i},{"./Model":11}],11:[function(t,e){function n(){for(var t=new Array(arguments.length),e=0,n=arguments.length;n>e;e++)t[e]=arguments[e];return t.join("//")}var i=t("./utils/context"),r=t("./utils/vent"),o=t("ampersand-state"),a=t("./utils/uniqueId"),s=t("lodash.merge"),u=t("meemo"),c=o.extend({type:"model",props:{id:["number"]},extraProperties:"reject",initialize:function(t,e){this.context=i.get(),this.vent=r.get(),this.cid=a(this.type),o.prototype.initialize.apply(this,arguments),t&&this.set(t,s({silent:!0,initial:!0},e))},with:function(t){return t=s({},this.toJSON(),t),new this.constructor(t)},cacheMethodUntilEvent:function(t,e){var i=this[t].bind(this),r=function(){return this[t]=u(i,n),r}.bind(this);return this.on(e,r),r()},destroy:function(){this.off(),this.stopListening()},_initCollections:function(){o.prototype._initCollections.call(this);for(var t in this._collections)this.listenTo(this[t],"all",this._getCollectionEventBubblingHandler(t))},_getCollectionEventBubblingHandler:function(t){return function(e,n,i){var r=["change","add","remove"];if(~r.indexOf(e))this.trigger("change:"+t,n,i),this.trigger(e,this);else for(var o;r.length;)if(o=r.shift(),~e.indexOf(o+":")){for(var a=e.split(":"),s=a[0],u=[t].concat(a[1].split("."));u.length;)this.trigger(s+":"+u.join("."),n,i),u.pop();this.trigger(s,n,i)}}.bind(this)}});e.exports=c},{"./utils/context":41,"./utils/uniqueId":44,"./utils/vent":45,"ampersand-state":49,"lodash.merge":130,meemo:140}],12:[function(t,e){var n=t("./PositionModel"),i=["position","target","duration","volume","pitch","pan"],r=t("./types/numberInRange"),o=t("./types/regexp"),a=t("./mixins/triggerParams"),s=t("./mixins/volumeParams"),u=t("./mixins/oscillatorParams"),c=t("./mixins/sampleParams"),l=t("./mixins/connectable"),h=t("./mixins/bypassable"),f=n.extend(a,s,u,c,l,h,{type:"note",props:{target:["target",!1],ghosts:["array",!0,function(){return[]}],transform:"function",after:"function",data:"object"},dataTypes:{target:o("target",/^(\d+)(A|B|C|D|E|F|G|H|I|J|K|L|M|N|O|P|Q|R|S|T|U|V|W|X|Y|Z)$/),positiveNumber:r("positiveNumber",1,1/0)},initialize:function(){n.prototype.initialize.apply(this,arguments),this.on("started",this._delegateStarted),this.on("stopped",this._delegateStopped)},_delegateStarted:function(t,e){this.original&&this.original!==this&&this.original.trigger("started",t,e)},_delegateStopped:function(t,e){this.original&&this.original!==this&&this.original.trigger("stopped",t,e)},start:function(t){this.mute||this.trigger("start",t,this)},stop:function(t){this.trigger("stop",t,this)},hasPlainPosition:function(){return f.isPlainPosition(this.position)}}),p=/^\d+\.\d+\.\d+$/;f.isPlainPosition=function(t){return p.test(t)},f.fromRaw=function(t){var e={},n=t[t.length-1];return"object"==typeof n&&null!==n&&(e=t.pop()),t.forEach(function(t,n){var r=i[n];r&&t&&(e[r]=t)}),new f(e)},e.exports=f},{"./PositionModel":17,"./mixins/bypassable":29,"./mixins/connectable":30,"./mixins/oscillatorParams":31,"./mixins/sampleParams":33,"./mixins/triggerParams":35,"./mixins/volumeParams":36,"./types/numberInRange":39,"./types/regexp":40}],13:[function(t,e){var n=t("./Layer"),i=t("audio-notes"),r=t("./mixins/oscillatorParams"),o=n.extend(r,{type:"oscillator",_source:function(t){var e=this.context.createOscillator(),n=t.frequency;return t.note&&(n=i[t.note]||n),e.frequency.value=n||0,e.detune.value=100*t.pitch,e.type=t.shape,e}});e.exports=o},{"./Layer":9,"./mixins/oscillatorParams":31,"audio-notes":53}],14:[function(t,e){t("es6-object-assign").polyfill();var n=t("./Model"),i=t("./mixins/triggerParams"),r=t("./mixins/volumeParams"),o=t("./mixins/oscillatorParams"),a=t("./mixins/sampleParams"),s=t("./types/numberInRange"),u=t("./mixins/bypassable"),c=t("meemo"),l=null,h=n.extend(i,r,o,a,u,{type:"params",props:{tempo:["positiveNumber",!0,120]},dataTypes:{positiveNumber:s("positiveNumber",1,1/0)}});h.mergeSources=c(function(t,e){var n=["volume"],i=["pitch","pan"],r=Object.keys(h.prototype._definition);return r.forEach(function(r){"id"!==r&&(e.forEach(function(e){if(e){var o=e[r];if(~n.indexOf(r)){if(0>o)return;if(0===o)return void(t[r]=0);var a=o/100;t[r]=void 0!==t[r]?t[r]*a:o}else~i.indexOf(r)?(o=o||0,t[r]=(t[r]||0)+o):t[r]=o||t[r]}}),"pan"===r&&t[r]<-100?t[r]=-100:"pan"===r&&t[r]>100&&(t[r]=100))}),t},function(t,e){for(var n,i,r="",o=Object.keys(h.prototype._definition),a=(o.length-1,0),s=e.length;s>a;a++){if(n=e[a])for(var u=0,c=o.length;c>u;u++)i=n[o[u]],i&&"id"!==o[u]&&(r+=o[u]+":"+i+"/");else r+="*";r+="//"}return r}),h.calculateLength=function(t){var e=t.length||0,n=t.duration&&h.lengthFromDuration(t,t.duration)||0;return n&&e>n||!e?(t.hasLengthFromDuration=!0,n):e},h.lengthFromDuration=function(t,e){var n=60/t.tempo,i=n/96;return e*i},h.correctAttackAndRelease=function(t){var e=t.attack+t.release;t.length&&e>t.length&&(t.attack=t.length/e*t.attack,t.release=t.length/e*t.release)},h.fromSources=function(t){l=l||new h;var e=l.toJSON();return e=Object.assign({},h.mergeSources(e,t.reverse())),l.vent.trigger("clock:tempo",e),e.length=h.calculateLength(e),h.correctAttackAndRelease(e),e},e.exports=h},{"./Model":11,"./mixins/bypassable":29,"./mixins/oscillatorParams":31,"./mixins/sampleParams":33,"./mixins/triggerParams":35,"./mixins/volumeParams":36,"./types/numberInRange":39,"es6-object-assign":65,meemo:140}],15:[function(t,e){var n=t("./PlayableModel"),i=t("./Channel"),r=t("./Collection"),o=t("./mixins/overloadedAccessor"),a=t("./mixins/volumeParams"),s=t("./Kit"),u=t("./types/numberInRange"),c=t("./Sequence"),l=t("./utils/sequenceActions"),h=n.extend(a,{type:"pattern",props:{bars:["positiveNumber",!0,1],beatsPerBar:["positiveNumber",!0,4],tempo:["positiveNumber",!0,120],loop:["boolean",!0,!0],pitch:"number"},dataTypes:{positiveNumber:u("positiveNumber",1,1/0),volumeRange:u("volumeRange",0,999)},collections:{channels:r.extend({model:i}),kits:r.extend({model:s})},initialize:function(){n.prototype.initialize.apply(this,arguments),this.listenTo(this.channels,"start",this._start),this.listenTo(this.channels,"stop",this._stop),this.cacheMethodUntilEvent("notes","change:channels")},notes:function(t,e,n){var i=[];return this.channels.forEach(function(r){i.push.apply(i,r.notes(t,e,n))}),i},then:function(){var t=l.then(this,arguments);return new c({sequences:t})},after:function(){var t=l.after(this,arguments);return new c({sequences:t})},and:function(){var t=l.and(this,arguments);return new c({sequences:t})},_start:function(t,e,n){this._runEvent("start",t,e,n)},_stop:function(t,e,n){this._runEvent("stop",t,e,n)},_runEvent:function(t,e,n,i){var r=parseInt(n.target.slice(0,1),10),o=n.target.slice(1),a=this.kit(r);if(a){if(a.mute)return;a.slot(o)[t](e,n,i,this,a)}else console.warn("No kit found for "+n.target,n)}},o("channel",i),o("kit",s));e.exports=h},{"./Channel":4,"./Collection":6,"./Kit":8,"./PlayableModel":16,"./Sequence":19,"./mixins/overloadedAccessor":32,"./mixins/volumeParams":36,"./types/numberInRange":39,"./utils/sequenceActions":43}],16:[function(t,e){var n=t("./Model"),i=n.extend({type:"playable-model",props:{playing:["boolean",!0,!1]},initialize:function(){n.prototype.initialize.apply(this,arguments),this.on("change:playing",this._onChangePlaying.bind(this))},start:function(){return this.playing=!0,this.vent.trigger("clock:start",this),this},pause:function(){return this.playing=!1,this.vent.trigger("clock:pause",this),this},stop:function(){return this.playing=!1,this.vent.trigger("clock:stop",this),this},detachGhosts:function(){this.notes(!0).forEach(function(t){t.detachGhosts()})},notes:function(){return[]},_onChangePlaying:function(){var t=this.playing?"start":"pause";this[t]()}});e.exports=i},{"./Model":11}],17:[function(t,e){var n=t("./Model"),i=t("./types/numberInRange"),r=t("./types/regexp"),o=t("lodash.padleft"),a=t("meemo"),s=n.extend({type:"position-model",props:{position:["position",!0,"0.0.00"],bar:["positiveNumber",!1],beat:["positiveNumber",!1],tick:["tick",!1]},dataTypes:{position:r("position",/^(.+)\.(.+)\.(.+)$/),positiveNumber:i("positiveNumber",1,1/0),tick:i("tick",1,96)},initialize:function(){n.prototype.initialize.apply(this,arguments),this.on("change:position",this._updatePositionToFragments),this.on("change:bar",this._updatePositionFromFragments),this.on("change:beat",this._updatePositionFromFragments),this.on("change:tick",this._updatePositionFromFragments),this._updatePositionToFragments(),this._updatePositionFromFragments()},paddedPosition:function(){return s.paddedPosition(this.position)},fragments:function(){return s.fragments(this.position)},_updatePositionToFragments:function(){this.set(s.getFragmentsObject(this.position))},_updatePositionFromFragments:function(){var t=this.fragments(),e=this.bar||t[0],n=this.beat||t[1],i=this.tick||t[2];i=10>i&&"00"!==i?"0"+i:i,this.position=[e,n,i].join(".")}});s.paddedPosition=a(function(t){var e=3,n=s.fragments(t);return[o(n[0],e,"0"),o(n[1],e,"0"),o(n[2],e,"0")].join(".")}),s.fragments=a(function(t){return t.split(".").map(function(t){var e=parseInt(t,10);return/^\d+$/.test(t)&&!isNaN(e)?e:t})});var u=["bar","beat","tick"];s.getFragmentsObject=a(function(t){var e=s.fragments(t),n={};return e.forEach(function(t,e){t&&"number"==typeof t&&!isNaN(t)&&t>0&&(n[u[e]]=t)}),n}),e.exports=s},{"./Model":11,"./types/numberInRange":39,"./types/regexp":40,"lodash.padleft":133,meemo:140}],18:[function(t,e){var n=t("./Layer"),i=(t("./Kit"),t("./Params")),r=t("./BufferHelper"),o=t("./mixins/sampleParams"),a=t("./utils/uniqueId"),s="QWERTYUIOPASDFGHJKLZXCVBNM",u={},c={},l=n.extend({type:"sample",props:{loaded:["boolean",!0,!1],sliceExpression:"string",buffer:"any"},constructor:function(t,e,i){"string"==typeof t?(e=e||{},e.src=t):(i=e,e=t),n.call(this,e,i)},initialize:function(t,e){n.prototype.initialize.call(this,t,e),this.on("change:src",this._loadSample),this.on("change:loaded",this._configureSlice),this.on("change:sliceExpression",this._configureSlice),this.src&&this._loadSample(),this._configureSlice()},_getSlotId:function(t){if(t<s.length)return s[t];var e=Math.floor(t/s.length);return t-=e*s.length,s[e-1]+s[t]},slice:function(t){for(var e=new this.vent.bap.kit,n=0;t>n;n++)e.slot(this._getSlotId(n)).layer(this.with({sliceExpression:""+(n+1)+"/"+t}));return e},_params:function(){var t=n.prototype._params.apply(this,arguments);t.length=t.length||this.buffer&&this.buffer.duration-t.offset||0;var e=t.playbackRate=this._getPlaybackRate(t);if(!t.hasLengthFromDuration){var r=t.length/e,o=t.duration&&i.lengthFromDuration(t,t.duration);o&&r>o&&(t.hasLengthFromDuration=!0,t.length=o)}return t},_source:function(t){if(!this.src)throw new Error("Cannot start sample without source url");if(!this.buffer)throw new Error("Cannot start sample without loaded buffer");var e=this.context.createBufferSource();return e.buffer=r.makeBuffer(t,this.buffer,this.context),e.playbackRate.value=t.playbackRate,t.loop>0&&(e.loop=!0,e.loopStart=t.offset,e.loopEnd=t.offset+t.loop),e},_getStopTime:function(t,e,n){var i=e.hasLengthFromDuration?n.buffer.duration:n.buffer.duration/e.playbackRate;return t+i},_getPlaybackRate:function(t){return Math.pow(2,t.pitch/12)},_loadSample:function(t){var e=u[this.src];if(e)this.buffer=e,c[this.src]--,this.loaded=!0,c[this.src]||this.vent.trigger("loadingState:remove",this.src);else{if(this.loaded=!1,c[this.src])return t!==!1&&c[this.src]++,setTimeout(this._loadSample.bind(this,!1),10);this.vent.trigger("loadingState:add",this.src),c[this.src]=1;var n=new XMLHttpRequest;n.open("GET",this.src,!0),n.responseType="arraybuffer",n.onload=function(){this.context.decodeAudioData(n.response,function(t){t.uid=a("buffer"),this.buffer=u[this.src]=t,c[this.src]--,this.loaded=!0,c[this.src]||this.vent.trigger("loadingState:remove",this.src),n.onload=null}.bind(this))}.bind(this),n.send()}},_configureRelease:function(t,e,i){e.trimToZeroCrossingPoint&&(t-=r.silentTailSize/44100),n.prototype._configureRelease.call(this,t,e,i)},_configureSlice:function(){
if(this.buffer&&this.loaded&&this.sliceExpression){var t=this.buffer.duration,e=this.sliceExpression.split("/"),n=parseInt(e[0],10)-1,i=parseInt(e[1],10),r=t/i,o=n*r;this.length=r,this.offset=o}}},o);e.exports=l},{"./BufferHelper":3,"./Kit":8,"./Layer":9,"./Params":14,"./mixins/sampleParams":33,"./utils/uniqueId":44}],19:[function(t,e){function n(t){return t.map(function(t){return t.map(function(t){return t.cid}).join("+")}).join(">")}function i(t){return t[0]&&t[0][0]}function r(t){var e=0;return t.forEach(function(t){t.bars>e&&(e=t.bars)}),e}function o(t,e){t.forEach(function(t){Array.isArray(t)?o(t,e):e(t)})}var a=t("./PlayableModel"),s=(t("./PositionModel"),t("./utils/sequenceActions")),u=a.extend({type:"sequence",props:{loop:["boolean",!0,!1],sequences:["sequence-grid",!0,function(){return[]}]},dataTypes:{"sequence-grid":{set:function(t){return{val:t,type:Array.isArray(t)&&Array.isArray(t[0])||!t[0]?"sequence-grid":typeof t}},compare:function(t,e){var i=n(t)===n(e);return i||(o(t,function(t){this.stopListening(t)}.bind(this)),o(e,function(t){this.listenTo(t,"change:channels change:sequences",this._forwardChannelChange)}.bind(this))),i}}},derived:{tempo:{deps:["sequences"],fn:function(){var t=i(this.sequences);return t&&t.tempo||120}},bars:{deps:["sequences"],fn:function(){var t=0;return this.sequences.length&&this.sequences.forEach(function(e){t+=r(e)}),t}},beatsPerBar:{deps:["sequences"],fn:function(){var t=i(this.sequences);return t&&t.beatsPerBar||4}}},constructor:function(){for(var t=Array.prototype.slice.call(arguments),e=["sequence","pattern"],n=[],i=!0;i&&t.length;)t[0]&&~e.indexOf(t[0].type)?n.push([t.shift()]):t[0]&&Array.isArray(t[0])?n.push(t.shift()):i=!1;t[0]=t[0]||{},n.length&&(t[0].sequences=n),a.apply(this,t)},initialize:function(){a.prototype.initialize.apply(this,arguments),this.cacheMethodUntilEvent("notes","change:sequences"),this.cacheMethodUntilEvent("patterns","change:sequences"),this.cacheMethodUntilEvent("tempoAt","change:sequences")},notes:function(t,e,n){var i={};if(1>t||t>this.bars)throw new Error("Invalid argument: bar is not within sequence length");i[t]=[];{var r=this.patterns(t);this.cid}return Object.keys(r).forEach(function(o){var a=r[o],s=t-parseInt(o,10);a.forEach(function(r){i[t]=i[t].concat(r.notes(s,e,n))})}),i},patterns:function(t,e){if("number"!=typeof t)throw new Error("Invalid argument: bar is not a number");if(1>t||t>this.bars)throw new Error("Invalid argument: bar is not within sequence length");var n={},i=this.sequences.slice(),o=0;e=e||0;for(var a,s,u,c;i.length;)a=i.shift(),s=r(a),u=o+1,c=o+s,t>=u&&c>=t?i=[]:o+=s;this.cid;return a.forEach(function(i){var r=o+e;if("sequence"===i.type){var a=i.patterns(t-o,r);Object.keys(a).forEach(function(t){var e=a[t];n[t]=(n[t]||[]).concat(e)})}else n[r]=n[r]||[],n[r].push(i)}),n},tempoAt:function(t){var e=this.tempoChanges(),n=e.filter(function(e){return e[0]<=t});return n.length?n[n.length-1][1]:120},tempoChanges:function(){var t=[],e=1,n=null;return this.sequences.forEach(function(i){i=i[0],i.tempo!==n&&(t.push([e,i.tempo,i.beatsPerBar]),n=i.tempo),e+=i.bars}),t},then:function(){var t=s.then(this,arguments);return new this.constructor({sequences:t})},after:function(){var t=s.after(this,arguments);return new this.constructor({sequences:t})},and:function(){var t=s.and(this,arguments);return new this.constructor({sequences:t})},_forwardChannelChange:function(){this.trigger("change:sequences")}});e.exports=u},{"./PlayableModel":16,"./PositionModel":17,"./utils/sequenceActions":43}],20:[function(t,e){var n=t("./Model"),i=t("./Layer"),r=t("./Collection"),o=t("./mixins/overloadedAccessor"),a=t("./mixins/triggerParams"),s=t("./mixins/volumeParams"),u=t("./mixins/connectable"),c=t("./mixins/bypassable"),l=t("./mixins/sampleShortcut"),h=n.extend(a,s,c,{type:"slot",collections:{layers:r.extend({model:i})},initialize:function(){n.prototype.initialize.apply(this,arguments),this._initSampleShortcut()},start:function(t,e,n,i,r){this.mute||this.layers.each(function(o){o.start(t,e,n,i,r,this)}.bind(this))},stop:function(t,e,n,i,r){this.layers.each(function(o){o.stop(t,e,n,i,r,this)}.bind(this))}},o("layer",i),l,u);e.exports=h},{"./Collection":6,"./Layer":9,"./Model":11,"./mixins/bypassable":29,"./mixins/connectable":30,"./mixins/overloadedAccessor":32,"./mixins/sampleShortcut":34,"./mixins/triggerParams":35,"./mixins/volumeParams":36}],21:[function(t,e){var n=t("../Effect"),i=t("../types/numberInRange");e.exports=n.extend({type:"chorus",props:{wet:["volumeRange",!0,100],dry:["volumeRange",!0,0],rate:["rateRange",!0,1.5],feedback:["inclusivePositiveNumber",!0,.2],delay:["delayRange",!0,.005],gain:["volumeRange",!0,100]},dataTypes:{rateRange:i("rateRange",.01,99),delayRange:i("delayRange",0,1)},createNode:function(){var t=this.context.createGain(),e=t._dry=this.context.createGain(),n=t._wet=this.context.createGain(),i=t._chorus=new this.tuna.Chorus;i.activate(!0);var r=t._output=this.context.createGain();return t.connect(e),e.connect(r),t.connect(n),n.connect(i),i.connect(r),this.combineNodes(t,r)},configureNode:function(t){t._dry.gain.value=this.dry/100,t._wet.gain.value=this.wet/100,t._chorus.rate=this.rate,t._chorus.feedback=this.feedback,t._chorus.delay=this.delay,t._output.gain.value=this.gain/100}})},{"../Effect":7,"../types/numberInRange":39}],22:[function(t,e){var n=t("../Effect"),i=t("../types/numberInRange");e.exports=n.extend({type:"compressor",props:{threshold:["thresholdRange",!0,-12],knee:["kneeRange",!0,30],ratio:["ratioRange",!0,12],attack:["simpleFloatRange",!0,.01],release:["simpleFloatRange",!0,.01],gain:["volumeRange",!0,100]},dataTypes:{thresholdRange:i("thresholdRange",-100,0),kneeRange:i("kneeRange",0,40),ratioRange:i("ratioRange",0,20),simpleFloatRange:i("simpleFloatRange",0,1)},createNode:function(){var t=this.context.createDynamicsCompressor(),e=t._output=this.context.createGain();return t.connect(e),this.combineNodes(t,e)},configureNode:function(t){t.threshold.value=this.threshold,t.knee.value=this.knee,t.ratio.value=this.ratio,t.attack.value=this.attack,t.release.value=this.release,t._output.gain.value=this.gain/100}})},{"../Effect":7,"../types/numberInRange":39}],23:[function(t,e){var n=t("../Effect"),i=t("soundbank-delay"),r=t("../types/numberInRange");e.exports=n.extend({type:"delay",props:{wet:["volumeRange",!0,50],dry:["volumeRange",!0,100],time:["delayTimeRange",!0,.3],feedback:["volumeRange",!0,50],cutoff:["frequencyRange",!0,50],filter:{type:"string",default:"highpass",values:["highpass","lowpass","bandpass","lowshelf","highshelf","peaking","notch","allpass"]},sync:["boolean",!0,!1]},dataTypes:{delayTimeRange:r("delayTimeRange",.001,4)},createNode:function(){return i(this.context)},configureNode:function(t){this.vent.trigger("clock:tempo",t),t.sync=this.sync,t.time.value=this.time,t.wet.value=this.wet/100,t.dry.value=this.dry/100,t.filterType=this.filter,t.cutoff.value=this.cutoff,t.feedback.value=this.feedback/100}})},{"../Effect":7,"../types/numberInRange":39,"soundbank-delay":152}],24:[function(t,e){var n=t("../Effect"),i=t("../types/numberInRange");e.exports=n.extend({type:"filter",props:{wet:["volumeRange",!0,100],dry:["volumeRange",!0,0],frequency:["frequencyRange",!0,440],q:["qRange",!0,1],shape:{type:"string",default:"highpass",values:["highpass","lowpass","bandpass","lowshelf","highshelf","peaking","notch","allpass"]},value:["filterValueRange",!0,0],gain:["volumeRange",!0,100]},dataTypes:{qRange:i("qRange",.001,100),filterValueRange:i("filterValueRange",-999,999)},createNode:function(){var t=this.context.createGain(),e=t._dry=this.context.createGain(),n=t._wet=this.context.createGain(),i=t._filter=this.context.createBiquadFilter(),r=t._output=this.context.createGain();return t.connect(e),e.connect(r),t.connect(n),n.connect(i),i.connect(r),this.combineNodes(t,r)},configureNode:function(t){t._dry.gain.value=this.dry/100,t._wet.gain.value=this.wet/100,t._filter.type=this.shape,t._filter.frequency.value=this.frequency,t._filter.Q.value=this.q,t._filter.gain.value=this.value/12,t._output.gain.value=this.gain/100}})},{"../Effect":7,"../types/numberInRange":39}],25:[function(t,e){var n=t("../Effect"),i=t("soundbank-overdrive"),r=t("../types/numberInRange");e.exports=n.extend({type:"overdrive",props:{wet:["volumeRange",!0,50],dry:["volumeRange",!0,50],preBand:["preBandRange",!0,50],color:["frequencyRange",!0,800],postCut:["frequencyRange",!0,3e3],gain:["volumeRange",!0,100]},dataTypes:{preBandRange:r("preBandRange",0,100)},createNode:function(){var t=this.context.createGain(),e=t._dry=this.context.createGain(),n=t._overdrive=i(this.context),r=t._output=this.context.createGain();return t.connect(e),e.connect(r),t.connect(n),n.connect(r),this.combineNodes(t,r)},configureNode:function(t){t._dry.gain.value=this.dry/100,t._overdrive.gain.value=this.wet/100,t._overdrive.preBand.value=this.preBand/100,t._overdrive.color.value=this.color,t._overdrive.postCut.value=this.postCut,t._output.gain.value=this.gain/100}})},{"../Effect":7,"../types/numberInRange":39,"soundbank-overdrive":153}],26:[function(t,e){var n=t("../Effect"),i=t("../types/numberInRange");e.exports=n.extend({type:"phaser",props:{wet:["volumeRange",!0,100],dry:["volumeRange",!0,0],rate:["rateRange",!0,1.2],depth:["depthRange",!0,.3],feedback:["inclusivePositiveNumber",!0,.2],stereoPhase:["stereoPhaseRange",!0,45],modulationFrequency:["modulationFrequencyRange",!0,750],gain:["volumeRange",!0,100]},dataTypes:{rateRange:i("rateRange",.01,99),depthRange:i("depthRange",0,1),stereoPhaseRange:i("stereoPhaseRange",0,180),modulationFrequencyRange:i("modulationFrequencyRange",500,1500)},createNode:function(){var t=this.context.createGain(),e=t._dry=this.context.createGain(),n=t._wet=this.context.createGain(),i=t._phaser=new this.tuna.Phaser;i.activate(!0);var r=t._output=this.context.createGain();return t.connect(e),e.connect(r),t.connect(n),n.connect(i),i.connect(r),this.combineNodes(t,r)},configureNode:function(t){t._dry.gain.value=this.dry/100,t._wet.gain.value=this.wet/100,t._phaser.rate=this.rate,t._phaser.depth=this.depth,t._phaser.feedback=this.feedback,t._phaser.stereoPhase=this.stereoPhase,t._phaser.baseModulationFrequency=this.modulationFrequency,t._output.gain.value=this.gain/100}})},{"../Effect":7,"../types/numberInRange":39}],27:[function(t,e){var n=t("../Effect"),i=t("../types/numberInRange");e.exports=n.extend({type:"pingpong",props:{wet:["volumeRange",!0,100],dry:["volumeRange",!0,0],feedback:["feedbackRange",!0,.2],left:["delayTimeRange",!0,.15],right:["delayTimeRange",!0,.2],gain:["volumeRange",!0,100]},dataTypes:{feedbackRange:i("feedbackRange",0,1),delayTimeRange:i("delayTimeRange",.001,10)},createNode:function(){var t=this.context.createGain(),e=t._dry=this.context.createGain(),n=t._wet=this.context.createGain(),i=t._pingpong=new this.tuna.PingPongDelay;i.activate(!0);var r=t._output=this.context.createGain();return t.connect(e),e.connect(r),t.connect(n),n.connect(i),i.connect(r),this.combineNodes(t,r)},configureNode:function(t){t._dry.gain.value=this.dry/100,t._wet.gain.value=this.wet/100,t._pingpong.wetLevel=1,t._pingpong.feedback=this.feedback,t._pingpong.delayTimeLeft=1e3*this.left,t._pingpong.delayTimeRight=1e3*this.right,t._output.gain.value=this.gain/100}})},{"../Effect":7,"../types/numberInRange":39}],28:[function(t,e){var n=t("../Effect"),i=t("soundbank-reverb");e.exports=n.extend({type:"reverb",props:{wet:["volumeRange",!0,50],dry:["volumeRange",!0,100],time:["inclusivePositiveNumber",!0,1],decay:["inclusivePositiveNumber",!0,3],cutoff:["frequencyRange",!0,1e3],filter:{type:"string",default:"highpass",values:["highpass","lowpass","bandpass","lowshelf","highshelf","peaking","notch","allpass"]},reverse:["boolean",!0,!1]},createNode:function(){return i(this.context)},configureNode:function(t){t.time=this.time,t.wet.value=this.wet/100,t.dry.value=this.dry/100,t.filterType=this.filter,t.cutoff.value=this.cutoff,t.decay=this.decay,t.reverse=this.reverse}})},{"../Effect":7,"soundbank-reverb":155}],29:[function(t,e){var n=["compressor","delay","filter","overdrive","reverb"];e.exports={props:{bypass:["bypassType",!0,!1]},dataTypes:{bypassType:{set:function(t){if("boolean"==typeof t||~n.indexOf(t))return{val:t,type:"bypassType"};if(Array.isArray(t)){var e=!!t.filter(function(t){return!~n.indexOf(t)}).length;return e?{val:t,type:typeof t}:{val:t,type:"bypassType"}}return{val:t,type:typeof t}}}}}},{}],30:[function(t,e){e.exports={props:{connections:["array",!0,function(){return[]}]},connect:function(t){return this.connections=this.connections.concat(t),this},disconnect:function(t){return this.connections=Array.isArray(t)?this.connections.filter(function(e){return!~t.indexOf(e)}):t?this.connections.filter(function(e){return t!==e}):[],this}}},{}],31:[function(t,e){var n=t("../types/numberInRange");e.exports={props:{frequency:"frequencyRange",note:"string",shape:{type:"string",default:"sine",values:["sine","square","sawtooth","triangle","custom"]}},dataTypes:{frequencyRange:n("frequencyRange",20,22050)}}},{"../types/numberInRange":39}],32:[function(t,e){function n(t,e){var n={};return n[t]=function(n,i){var r=!1,o=this[t+"s"];return!i&&n instanceof e?(i=n,i.id=o.nextId(),r=!0):"number"!=typeof n||i?n&&i instanceof e?(o.remove(o.get(n)),i.id=n,r=!0):i=new e({id:o.nextId()}):i=o.get(n)||new e({id:n}),i=o.add(i),r?this:i},n}e.exports=n},{}],33:[function(t,e){var n=t("../types/numberInRange");e.exports={props:{src:"string",offset:["inclusivePositiveNumber",!0,0],loop:["inclusivePositiveNumber",!0,0],bitcrush:["bitRange",!0,0],bitcrushFrequency:["frequencyRange",!0,6500],bitcrushMix:["simpleCentRange",!0,0],playbackRate:["inclusivePositiveNumber",!0,1],trimToZeroCrossingPoint:["boolean",!0,!0],channel:{type:"any",values:[null,!1,void 0,"left","right","merge","diff"]},reverse:["boolean",!0,!1]},dataTypes:{inclusivePositiveNumber:n("inclusivePositiveNumber",0,1/0),bitRange:n("bitRange",0,16),simpleCentRange:n("simpleCentRange",0,100),frequencyRange:n("frequencyRange",20,22050)}}},{"../types/numberInRange":39}],34:[function(t,e){var n=t("../Sample");e.exports={_sampleConstructor:n,_initSampleShortcut:function(){this._originalLayerFunction=this.layer,this.layer=this._overloadedLayerFn},_overloadedLayerFn:function(t,e){if("string"==typeof t){e=e||{},e.src=t;var n=new this._sampleConstructor(e);return this.layers.add(n),this}return this._originalLayerFunction.apply(this,arguments)}}},{"../Sample":18}],35:[function(t,e){var n=t("../types/numberInRange");e.exports={props:{duration:"positiveNumber",length:"inclusivePositiveNumber",attack:["inclusivePositiveNumber",!0,0],release:["inclusivePositiveNumber",!0,0],pitch:"number"},dataTypes:{positiveNumber:n("positiveNumber",1,1/0),inclusivePositiveNumber:n("inclusivePositiveNumber",0,1/0)}}},{"../types/numberInRange":39}],36:[function(t,e){var n=t("../types/numberInRange");e.exports={props:{volume:["inclusivePositiveNumber",!0,100],mute:["boolean",!0,!1],pan:["panRange",!0,0]},dataTypes:{inclusivePositiveNumber:n("inclusivePositiveNumber",0,1/0),panRange:n("panRange",-100,100)}}},{"../types/numberInRange":39}],37:[function(t,e){function n(t,e){return{set:function(n){return n instanceof e?{val:n,type:t}:{val:n,type:typeof n}},compare:function(t,e,n){var i=t===e;return i||(t&&this.stopListening(t),null!==e&&this.listenTo(e,"all",this._getEventBubblingHandler(n))),i}}}e.exports=n},{}],38:[function(t,e){function n(t,e){return{set:function(n){return~e.indexOf(n.type)?{val:n,type:t}:{val:n,type:typeof n}},compare:function(t,e,n){var i=t===e;return i||(t&&this.stopListening(t),null!==e&&this.listenTo(e,"all",this._getEventBubblingHandler(n))),i}}}e.exports=n},{}],39:[function(t,e){function n(t,e,n){return{set:function(i){return i>=e&&n>=i?{val:i,type:t}:{val:i,type:typeof i}}}}e.exports=n},{}],40:[function(t,e){function n(t,e){return{set:function(n){return e.test(n)?{val:n,type:t}:{val:n,type:typeof n}}}}e.exports=n},{}],41:[function(t,e){var n=t("audio-context");e.exports={set:function(t){n=t},get:function(){return n}}},{"audio-context":52}],42:[function(t,e){(function(t){e.exports=function(){if("performance"in t==!1&&(t.performance={}),Date.now=Date.now||function(){return(new Date).getTime()},"now"in t.performance==!1){var e=Date.now();performance.timing&&performance.timing.navigationStart&&(e=performance.timing.navigationStart),t.performance.now=function(){return Date.now()-e}}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],43:[function(t,e){e.exports={then:function(t,e){return e=[].slice.call(e),[t].concat(e).map(function(t){return Array.isArray(t)||(t=[t]),t})},after:function(t,e){return e=[].slice.call(e),e.concat(t).map(function(t){return Array.isArray(t)||(t=[t]),t})},and:function(t,e){function n(t){~i.indexOf(t)||i.push(t)}e=[].slice.call(e);var i=[t];return e.forEach(function(t){Array.isArray(t)?t.forEach(n):n(t)}),[i]}}},{}],44:[function(t,e){function n(t){return i[t]=i[t]||0,t+"-"+ ++i[t]}var i={};e.exports=n},{}],45:[function(t,e){function n(){r=new(i.extend())}var i=t("ampersand-state"),r=null;e.exports={reset:n,get:function(){return r||n(),r}}},{"ampersand-state":49}],46:[function(t,e){var n=t("lodash.assign"),i=function(t){var e,i=this,r=[].slice.call(arguments);e=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return i.apply(this,arguments)},n(e,i);var o=function(){this.constructor=e};return o.prototype=i.prototype,e.prototype=new o,t&&(r.unshift(e.prototype),n.apply(null,r)),e.__super__=i.prototype,e};e.exports=i},{"lodash.assign":105}],47:[function(t,e){function n(t,e){if(e||(e={}),e.model&&(this.model=e.model),e.comparator&&(this.comparator=e.comparator),e.parent&&(this.parent=e.parent),!this.mainIndex){var n=this.model&&this.model.prototype&&this.model.prototype.idAttribute;this.mainIndex=n||"id"}this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,s({silent:!0},e))}var i=t("ampersand-events"),r=t("ampersand-class-extend"),o=t("lodash.isarray"),a=t("lodash.bind"),s=t("lodash.assign"),u=[].slice;s(n.prototype,i,{initialize:function(){},isModel:function(t){return this.model&&t instanceof this.model},add:function(t,e){return this.set(t,s({merge:!1,add:!0,remove:!1},e))},parse:function(t){return t},serialize:function(){return this.map(function(t){if(t.serialize)return t.serialize();var e={};return s(e,t),delete e.collection,e})},toJSON:function(){return this.serialize()},set:function(t,e){e=s({add:!0,remove:!0,merge:!0},e),e.parse&&(t=this.parse(t,e));var n=!o(t);t=n?t?[t]:[]:t.slice();var i,r,a,u,c,l,h,f=e.at,p=this.comparator&&null==f&&e.sort!==!1,d="string"==typeof this.comparator?this.comparator:null,v=[],g=[],y={},m=e.add,b=e.merge,_=e.remove,w=!p&&m&&_?[]:!1,x=this.model&&this.model.prototype||Object.prototype;for(l=0,h=t.length;h>l;l++){if(a=t[l]||{},i=this.isModel(a)?r=a:x.generateId?x.generateId(a):a[this.mainIndex],u=this.get(i))_&&(y[u.cid||u[this.mainIndex]]=!0),b&&(a=a===r?r.attributes:a,e.parse&&(a=u.parse(a,e)),u.set?(u.set(a,e),p&&!c&&u.hasChanged(d)&&(c=!0)):s(u,a)),t[l]=u;else if(m){if(r=t[l]=this._prepareModel(a,e),!r)continue;v.push(r),this._addReference(r,e)}r=u||r,r&&(w&&(r.isNew&&r.isNew()||!r[this.mainIndex]||!y[r.cid||r[this.mainIndex]])&&w.push(r),y[r[this.mainIndex]]=!0)}if(_){for(l=0,h=this.length;h>l;l++)r=this.models[l],y[r.cid||r[this.mainIndex]]||g.push(r);g.length&&this.remove(g,e)}if(v.length||w&&w.length)if(p&&(c=!0),null!=f)for(l=0,h=v.length;h>l;l++)this.models.splice(f+l,0,v[l]);else{var k=w||v;for(l=0,h=k.length;h>l;l++)this.models.push(k[l])}if(c&&this.sort({silent:!0}),!e.silent){for(l=0,h=v.length;h>l;l++)r=v[l],r.trigger?r.trigger("add",r,this,e):this.trigger("add",r,this,e);(c||w&&w.length)&&this.trigger("sort",this,e)}return n?t[0]:t},get:function(t,e){if(null!=t){var n=this._indexes[e||this.mainIndex];return n&&(n[t]||n[t[this.mainIndex]])||this._indexes.cid[t]||this._indexes.cid[t.cid]}},at:function(t){return this.models[t]},remove:function(t,e){var n,i,r,a,s=!o(t);for(t=s?[t]:u.call(t),e||(e={}),n=0,i=t.length;i>n;n++)r=t[n]=this.get(t[n]),r&&(this._deIndex(r),a=this.models.indexOf(r),this.models.splice(a,1),e.silent||(e.index=a,r.trigger?r.trigger("remove",r,this,e):this.trigger("remove",r,this,e)),this._removeReference(r,e));return s?t[0]:t},reset:function(t,e){e||(e={});for(var n=0,i=this.models.length;i>n;n++)this._removeReference(this.models[n],e);return e.previousModels=this.models,this._reset(),t=this.add(t,s({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},sort:function(t){var e=this;if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),this.models.sort("string"==typeof this.comparator?function(t,n){return t.get?(t=t.get(e.comparator),n=n.get(e.comparator)):(t=t[e.comparator],n=n[e.comparator]),t>n||void 0===t?1:n>t||void 0===n?-1:0}:1===this.comparator.length?function(t,n){return t=e.comparator(t),n=e.comparator(n),t>n||void 0===t?1:n>t||void 0===n?-1:0}:a(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},_reset:function(){var t=u.call(this.indexes||[]),e=0;t.push(this.mainIndex),t.push("cid");var n=t.length;for(this.models=[],this._indexes={};n>e;e++)this._indexes[t[e]]={}},_prepareModel:function(t,e){if(!this.model)return t;if(this.isModel(t))return t.collection||(t.collection=this),t;e=e?s({},e):{},e.collection=this;var n=new this.model(t,e);return n.validationError?(this.trigger("invalid",this,n.validationError,e),!1):n},_deIndex:function(t,e,n){var i;if(void 0!==e){if(void 0===this._indexes[e])throw new Error("Given attribute is not an index");return void delete this._indexes[e][n]}for(e in this._indexes)i=t.hasOwnProperty(e)?t[e]:t.get&&t.get(e),delete this._indexes[e][i]},_index:function(t,e){var n;if(void 0!==e){if(void 0===this._indexes[e])throw new Error("Given attribute is not an index");return n=t[e]||t.get&&t.get(e),void(n&&(this._indexes[e][n]=t))}for(e in this._indexes)n=t.hasOwnProperty(e)?t[e]:t.get&&t.get(e),null!=n&&(this._indexes[e][n]=t)},_addReference:function(t){this._index(t),t.collection||(t.collection=this),t.on&&t.on("all",this._onModelEvent,this)},_removeReference:function(t){this===t.collection&&delete t.collection,this._deIndex(t),t.off&&t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,i){var r=t.split(":")[0],o=t.split(":")[1];("add"!==r&&"remove"!==r||n===this)&&("destroy"===r&&this.remove(e,i),e&&"change"===r&&o&&this._indexes[o]&&(this._deIndex(e,o,e.previousAttributes()[o]),this._index(e,o)),this.trigger.apply(this,arguments))}}),Object.defineProperties(n.prototype,{length:{get:function(){return this.models.length}},isCollection:{value:!0}});var c=["indexOf","lastIndexOf","every","some","forEach","map","filter","reduce","reduceRight"];c.forEach(function(t){n.prototype[t]=function(){return this.models[t].apply(this.models,arguments)}}),n.prototype.each=n.prototype.forEach,n.extend=r,e.exports=n},{"ampersand-class-extend":46,"ampersand-events":48,"lodash.assign":105,"lodash.bind":107,"lodash.isarray":116}],48:[function(t,e){"undefined"!=typeof window&&(window.ampersand=window.ampersand||{},window.ampersand["ampersand-events"]=window.ampersand["ampersand-events"]||[],window.ampersand["ampersand-events"].push("1.1.1"));var n=t("lodash.once"),i=t("lodash.uniqueid"),r=t("lodash.keys"),o=t("lodash.isempty"),a=t("lodash.foreach"),s=(t("lodash.bind"),t("lodash.assign")),u=Array.prototype.slice,c=/\s+/,l={on:function(t,e,n){if(!h(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var i=this._events[t]||(this._events[t]=[]);return i.push({callback:e,context:n,ctx:n||this}),this},once:function(t,e,i){if(!h(this,"once",t,[e,i])||!e)return this;var r=this,o=n(function(){r.off(t,o),e.apply(this,arguments)});return o._callback=e,this.on(t,o,i)},off:function(t,e,n){var i,o,a,s,u,c,l,f;if(!this._events||!h(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events=void 0,this;for(s=t?[t]:r(this._events),u=0,c=s.length;c>u;u++)if(t=s[u],a=this._events[t]){if(this._events[t]=i=[],e||n)for(l=0,f=a.length;f>l;l++)o=a[l],(e&&e!==o.callback&&e!==o.callback._callback||n&&n!==o.context)&&i.push(o);i.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=u.call(arguments,1);if(!h(this,"trigger",t,e))return this;var n=this._events[t],i=this._events.all;return n&&f(n,e),i&&f(i,arguments),this},stopListening:function(t,e,n){var i=this._listeningTo;if(!i)return this;var r=!e&&!n;n||"object"!=typeof e||(n=this),t&&((i={})[t._listenId]=t);for(var a in i)t=i[a],t.off(e,n,this),(r||o(t._events))&&delete this._listeningTo[a];return this},createEmitter:function(t){return s(t||{},l)}};l.bind=l.on,l.unbind=l.off;var h=function(t,e,n,i){if(!n)return!0;if("object"==typeof n){for(var r in n)t[e].apply(t,[r,n[r]].concat(i));return!1}if(c.test(n)){for(var o=n.split(c),a=0,s=o.length;s>a;a++)t[e].apply(t,[o[a]].concat(i));return!1}return!0},f=function(t,e){var n,i=-1,r=t.length,o=e[0],a=e[1],s=e[2];switch(e.length){case 0:for(;++i<r;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o);return;case 2:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o,a);return;case 3:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o,a,s);return;default:for(;++i<r;)(n=t[i]).callback.apply(n.ctx,e);return}},p={listenTo:"on",listenToOnce:"once"};a(p,function(t,e){l[e]=function(e,n,r){var o=this._listeningTo||(this._listeningTo={}),a=e._listenId||(e._listenId=i("l"));return o[a]=e,r||"object"!=typeof n||(r=this),e[t](n,r,this),this}}),l.listenToAndRun=function(t,e,n){return l.listenTo.apply(this,arguments),n||"object"!=typeof e||(n=this),n.apply(this),this},e.exports=l},{"lodash.assign":105,"lodash.bind":107,"lodash.foreach":112,"lodash.isempty":118,"lodash.keys":128,"lodash.once":132,"lodash.uniqueid":139}],49:[function(t,e){function n(t,e){e||(e={}),this.cid||(this.cid=a("state")),this._events={},this._values={},this._definition=Object.create(this._definition),e.parse&&(t=this.parse(t,e)),this.parent=e.parent,this.collection=e.collection,this._keyTree=new S,this._initCollections(),this._initChildren(),this._cache={},this._previousAttributes={},t&&this.set(t,s({silent:!0,initial:!0},e)),this._changed={},this._derived&&this._initDerived(),e.init!==!1&&this.initialize.apply(this,arguments)}function i(t,e,n,i){var r,o,a=t._definition[e]={};if(f(n))r=t._ensureValidType(n),r&&(a.type=r);else{if(d(n)&&(o=n,n={type:o[0],required:o[1],default:o[2]}),r=t._ensureValidType(n.type),r&&(a.type=r),n.required&&(a.required=!0),n.default&&"object"==typeof n.default)throw new TypeError("The default value for "+e+" cannot be an object/array, must be a value or a function which returns a value/object/array");a.default=n.default,a.allowNull=n.allowNull?n.allowNull:!1,n.setOnce&&(a.setOnce=!0),a.required&&g(a.default)&&!a.setOnce&&(a.default=t._getDefaultForType(r)),a.test=n.test,a.values=n.values}return i&&(a.session=!0),Object.defineProperty(t,e,{set:function(t){this.set(e,t)},get:function(){var t=this._values[e],n=this._dataTypes[a.type];return"undefined"!=typeof t?(n&&n.get&&(t=n.get(t)),t):(t=k(a,"default"),this._values[e]=t,t)}}),a}function r(t,e,n){var i=t._derived[e]={fn:y(n)?n:n.fn,cache:n.cache!==!1,depList:n.deps||[]};l(i.depList,function(n){t._deps[n]=T(t._deps[n]||[],[e])}),Object.defineProperty(t,e,{get:function(){return this._getDerivedProperty(e)},set:function(){throw new TypeError('"'+e+"\" is a derived property, it can't be set directly.")}})}function o(t){var e,n=this,o=[].slice.call(arguments);e=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return n.apply(this,arguments)},s(e,n);var a=function(){this.constructor=e};if(a.prototype=n.prototype,e.prototype=new a,e.prototype._derived=s({},n.prototype._derived),e.prototype._deps=s({},n.prototype._deps),e.prototype._definition=s({},n.prototype._definition),e.prototype._collections=s({},n.prototype._collections),e.prototype._children=s({},n.prototype._children),e.prototype._dataTypes=s({},n.prototype._dataTypes||O),t){var c=["dataTypes","props","session","derived","collections","children"];o.forEach(function(t){t.dataTypes&&l(t.dataTypes,function(t,n){e.prototype._dataTypes[n]=t}),t.props&&l(t.props,function(t,n){i(e.prototype,n,t)}),t.session&&l(t.session,function(t,n){i(e.prototype,n,t,!0)}),t.derived&&l(t.derived,function(t,n){r(e.prototype,n,t)}),t.collections&&l(t.collections,function(t,n){e.prototype._collections[n]=t}),t.children&&l(t.children,function(t,n){e.prototype._children[n]=t}),s(e.prototype,u(t,c))})}return e.__super__=n.prototype,e}"undefined"!=typeof window&&(window.ampersand=window.ampersand||{},window.ampersand["ampersand-state"]=window.ampersand["ampersand-state"]||[],window.ampersand["ampersand-state"].push("4.5.3"));var a=t("lodash.uniqueid"),s=t("lodash.assign"),u=t("lodash.omit"),c=t("lodash.escape"),l=t("lodash.foreach"),h=t("lodash.includes"),f=t("lodash.isstring"),p=t("lodash.isobject"),d=t("lodash.isarray"),v=t("lodash.isdate"),g=t("lodash.isundefined"),y=t("lodash.isfunction"),m=t("lodash.isnull"),b=t("lodash.isempty"),_=t("lodash.isequal"),w=t("lodash.clone"),x=t("lodash.has"),k=t("lodash.result"),E=t("lodash.keys"),R=t("lodash.bind"),P=t("lodash.defaults"),T=t("lodash.union"),j=t("ampersand-events"),S=t("key-tree-store"),L=t("array-next"),A=/^change:/;s(n.prototype,j,{extraProperties:"ignore",idAttribute:"id",namespaceAttribute:"namespace",typeAttribute:"modelType",initialize:function(){return this},getId:function(){return this[this.idAttribute]},getNamespace:function(){return this[this.namespaceAttribute]},getType:function(){return this[this.typeAttribute]},isNew:function(){return null==this.getId()},escape:function(t){return c(this.get(t))},isValid:function(t){return this._validate({},s(t||{},{validate:!0}))},parse:function(t){return t},serialize:function(){var t=this.getAttributes({props:!0},!0);return l(this._children,function(e,n){t[n]=this[n].serialize()},this),l(this._collections,function(e,n){t[n]=this[n].serialize()},this),t},set:function(t,e,n){var i,r,o,a,s,u,c,f,d,v,y,b,_,w,x,k,E=this,R=this.extraProperties;if(p(t)||null===t?(d=t,n=e):(d={},d[t]=e),n=n||{},!this._validate(d,n))return!1;b=n.unset,y=n.silent,w=n.initial,r=[],i=this._changing,this._changing=!0,i||(this._previousAttributes=this.attributes,this._changed={});for(f in d){if(a=d[f],o=typeof a,_=this._values[f],s=this._definition[f],!s){if(this._children[f]||this._collections[f]){this[f].set(a,n);continue}if("ignore"===R)continue;if("reject"===R)throw new TypeError('No "'+f+'" property defined on '+(this.type||"this")+' model and extraProperties not set to "ignore" or "allow"');if("allow"===R)s=this._createPropertyDefinition(f,"any");else if(R)throw new TypeError('Invalid value for extraProperties: "'+R+'"')}if(k=this._getCompareForType(s.type),v=this._dataTypes[s.type],v&&v.set&&(u=v.set(a),a=u.val,o=u.type),s.test&&(c=s.test.call(this,a,o)))throw new TypeError("Property '"+f+"' failed validation with error: "+c);if(g(a)&&s.required)throw new TypeError("Required property '"+f+"' must be of type "+s.type+". Tried to set "+a);if(m(a)&&s.required&&!s.allowNull)throw new TypeError("Property '"+f+"' must be of type "+s.type+" (cannot be null). Tried to set "+a);if(s.type&&"any"!==s.type&&s.type!==o&&!m(a)&&!g(a))throw new TypeError("Property '"+f+"' must be of type "+s.type+". Tried to set "+a);if(s.values&&!h(s.values,a))throw new TypeError("Property '"+f+"' must be one of values: "+s.values.join(", ")+". Tried to set "+a);if(x=!k(_,a,f),s.setOnce&&void 0!==_&&x&&!w)throw new TypeError("Property '"+f+"' can only be set once.");x?(r.push({prev:_,val:a,key:f}),E._changed[f]=a):delete E._changed[f]}if(l(r,function(t){E._previousAttributes[t.key]=t.prev,b?delete E._values[t.key]:E._values[t.key]=t.val}),!y&&r.length&&(E._pending=!0),y||l(r,function(t){E.trigger("change:"+t.key,E,t.val,n)}),i)return this;if(!y)for(;this._pending;)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},get:function(t){
return this[t]},toggle:function(t){var e=this._definition[t];if("boolean"===e.type)this[t]=!this[t];else{if(!e||!e.values)throw new TypeError("Can only toggle properties that are type `boolean` or have `values` array.");this[t]=L(e.values,this[t])}return this},previousAttributes:function(){return w(this._previousAttributes)},hasChanged:function(t){return null==t?!b(this._changed):x(this._changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?w(this._changed):!1;var e,n,i,r=!1,o=this._changing?this._previousAttributes:this.attributes;for(var a in t)n=this._definition[a],n&&(i=this._getCompareForType(n.type),i(o[a],e=t[a])||((r||(r={}))[a]=e));return r},toJSON:function(){return this.serialize()},unset:function(t,e){t=Array.isArray(t)?t:[t],l(t,function(t){var n,i=this._definition[t];return i.required?(n=k(i,"default"),this.set(t,n,e)):this.set(t,n,s({},e,{unset:!0}))},this)},clear:function(t){var e=this;return l(E(this.attributes),function(n){e.unset(n,t)}),this},previous:function(t){return null!=t&&Object.keys(this._previousAttributes).length?this._previousAttributes[t]:null},_getDefaultForType:function(t){var e=this._dataTypes[t];return e&&e.default},_getCompareForType:function(t){var e=this._dataTypes[t];return e&&e.compare?R(e.compare,this):_},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=s({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return n?(this.trigger("invalid",this,n,s(e||{},{validationError:n})),!1):!0},_createPropertyDefinition:function(t,e,n){return i(this,t,e,n)},_ensureValidType:function(t){return h(["string","number","boolean","array","object","date","any"].concat(E(this._dataTypes)),t)?t:void 0},getAttributes:function(t,e){t||(t={}),P(t,{session:!1,props:!1,derived:!1});var n,i,r,o={};for(i in this._definition)r=this._definition[i],(t.session&&r.session||t.props&&!r.session)&&(n=e?this._values[i]:this[i],"undefined"==typeof n&&(n=k(r,"default")),"undefined"!=typeof n&&(o[i]=n));if(t.derived)for(i in this._derived)o[i]=this[i];return o},_initDerived:function(){var t=this;l(this._derived,function(e,n){var i=t._derived[n];i.deps=i.depList;var r=function(e){e=e||{};var r=i.fn.call(t);t._cache[n]===r&&i.cache||(i.cache&&(t._previousAttributes[n]=t._cache[n]),t._cache[n]=r,t.trigger("change:"+n,t,t._cache[n]))};i.deps.forEach(function(e){t._keyTree.add(e,r)})}),this.on("all",function(e){A.test(e)&&t._keyTree.get(e.split(":")[1]).forEach(function(t){t()})},this)},_getDerivedProperty:function(t,e){return this._derived[t].cache?((e||!this._cache.hasOwnProperty(t))&&(this._cache[t]=this._derived[t].fn.apply(this)),this._cache[t]):this._derived[t].fn.apply(this)},_initCollections:function(){var t;if(this._collections)for(t in this._collections)this[t]=new this._collections[t](null,{parent:this})},_initChildren:function(){var t;if(this._children)for(t in this._children)this[t]=new this._children[t]({},{parent:this}),this.listenTo(this[t],"all",this._getEventBubblingHandler(t))},_getEventBubblingHandler:function(t){return R(function(e,n,i){A.test(e)?this.trigger("change:"+t+"."+e.split(":")[1],n,i):"change"===e&&this.trigger("change",this)},this)},_verifyRequired:function(){var t=this.attributes;for(var e in this._definition)if(this._definition[e].required&&"undefined"==typeof t[e])return!1;return!0}}),Object.defineProperties(n.prototype,{attributes:{get:function(){return this.getAttributes({props:!0,session:!0})}},all:{get:function(){return this.getAttributes({session:!0,props:!0,derived:!0})}},isState:{get:function(){return!0},set:function(){}}});var O={string:{default:function(){return""}},date:{set:function(t){var e;if(null==t)e="object";else if(v(t))e="date",t=t.valueOf();else try{var n=new Date(t).valueOf();if(isNaN(n)&&(n=new Date(parseInt(t,10)).valueOf(),isNaN(n)))throw TypeError;t=n,e="date"}catch(n){e=typeof t}return{val:t,type:e}},get:function(t){return null==t?t:new Date(t)},default:function(){return new Date}},array:{set:function(t){return{val:t,type:d(t)?"array":typeof t}},default:function(){return[]}},object:{set:function(t){var e=typeof t;return"object"!==e&&g(t)&&(t=null,e="object"),{val:t,type:e}},default:function(){return{}}},state:{set:function(t){var e=t instanceof n||t&&t.isState;return e?{val:t,type:"state"}:{val:t,type:typeof t}},compare:function(t,e,n){var i=t===e;return i||(t&&this.stopListening(t),null!=e&&this.listenTo(e,"all",this._getEventBubblingHandler(n))),i}}};n.extend=o,e.exports=n},{"ampersand-events":48,"array-next":50,"key-tree-store":74,"lodash.assign":105,"lodash.bind":107,"lodash.clone":108,"lodash.defaults":110,"lodash.escape":111,"lodash.foreach":112,"lodash.has":113,"lodash.includes":114,"lodash.isarray":116,"lodash.isdate":117,"lodash.isempty":118,"lodash.isequal":119,"lodash.isfunction":120,"lodash.isnull":122,"lodash.isobject":123,"lodash.isstring":125,"lodash.isundefined":127,"lodash.keys":128,"lodash.omit":131,"lodash.result":136,"lodash.union":138,"lodash.uniqueid":139}],50:[function(t,e){e.exports=function(t,e){var n=t.length,i=t.indexOf(e)+1;return i>n-1&&(i=0),t[i]}},{}],51:[function(t,e,n){function i(t){for(var e=t.context.createBuffer(t.numberOfChannels,t.length,t.sampleRate),n=0,i=t.numberOfChannels;i>n;++n){var r=e.getChannelData(n),o=t.getChannelData(n);r.set(o,0)}return e}function r(t){for(var e=0,n=t.numberOfChannels;n>e;++e){var i=t.getChannelData(e);Array.prototype.reverse.call(i)}}function o(t){for(var e=0,n=t.numberOfChannels;n>e;++e)for(var i=t.getChannelData(e),r=t.length;r--;)i[r]=-i[r]}function a(t){for(var e=0,n=t.numberOfChannels;n>e;++e)for(var i=t.getChannelData(e),r=t.length;r--;)i[r]=0}function s(t){for(var e=0,n=t.numberOfChannels;n>e;++e)for(var i=t.getChannelData(e),r=t.length;r--;)i[r]=2*Math.random()-1}n.clone=i,n.reverse=r,n.invert=o,n.zero=a,n.noise=s},{}],52:[function(t,e){var n=t("global/window"),i=n.AudioContext||n.webkitAudioContext;i&&(e.exports=new i)},{"global/window":69}],53:[function(t,e,n){!function(t){"object"==typeof n?e.exports=t():"function"==typeof define&&define.amd?define(t):window.AudioNotes=t()}(function(){function t(t){return 440*Math.pow(2,(t-57)/12)}for(var e={},n="CcDdEFfGgAaB",i=0;10>=i;++i)for(var r=0;12>r;++r)e[12*i+r]=e[n[r]+i]=t(12*i+r);return e})},{}],54:[function(t,e,n){var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(t){"use strict";function e(t){var e=t.charCodeAt(0);return e===a||e===h?62:e===s||e===f?63:u>e?-1:u+10>e?e-u+26+26:l+26>e?e-l:c+26>e?e-c+26:void 0}function n(t){function n(t){c[h++]=t}var i,r,a,s,u,c;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var l=t.length;u="="===t.charAt(l-2)?2:"="===t.charAt(l-1)?1:0,c=new o(3*t.length/4-u),a=u>0?t.length-4:t.length;var h=0;for(i=0,r=0;a>i;i+=4,r+=3)s=e(t.charAt(i))<<18|e(t.charAt(i+1))<<12|e(t.charAt(i+2))<<6|e(t.charAt(i+3)),n((16711680&s)>>16),n((65280&s)>>8),n(255&s);return 2===u?(s=e(t.charAt(i))<<2|e(t.charAt(i+1))>>4,n(255&s)):1===u&&(s=e(t.charAt(i))<<10|e(t.charAt(i+1))<<4|e(t.charAt(i+2))>>2,n(s>>8&255),n(255&s)),c}function r(t){function e(t){return i.charAt(t)}function n(t){return e(t>>18&63)+e(t>>12&63)+e(t>>6&63)+e(63&t)}var r,o,a,s=t.length%3,u="";for(r=0,a=t.length-s;a>r;r+=3)o=(t[r]<<16)+(t[r+1]<<8)+t[r+2],u+=n(o);switch(s){case 1:o=t[t.length-1],u+=e(o>>2),u+=e(o<<4&63),u+="==";break;case 2:o=(t[t.length-2]<<8)+t[t.length-1],u+=e(o>>10),u+=e(o>>4&63),u+=e(o<<2&63),u+="="}return u}var o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="+".charCodeAt(0),s="/".charCodeAt(0),u="0".charCodeAt(0),c="a".charCodeAt(0),l="A".charCodeAt(0),h="-".charCodeAt(0),f="_".charCodeAt(0);t.toByteArray=n,t.fromByteArray=r}("undefined"==typeof n?this.base64js={}:n)},{}],55:[function(t,e){function n(){if(!a){a=!0;for(var t,e=o.length;e;){t=o,o=[];for(var n=-1;++n<e;)t[n]();e=o.length}a=!1}}function i(){}var r=e.exports={},o=[],a=!1;r.nextTick=function(t){o.push(t),a||setTimeout(n,0)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=i,r.addListener=i,r.once=i,r.off=i,r.removeListener=i,r.removeAllListeners=i,r.emit=i,r.binding=function(){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},{}],56:[function(t,e,n){(function(e){"use strict";function i(){function t(){}try{var e=new Uint8Array(1);return e.foo=function(){return 42},e.constructor=t,42===e.foo()&&e.constructor===t&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}function r(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(t){return this instanceof o?(o.TYPED_ARRAY_SUPPORT||(this.length=0,this.parent=void 0),"number"==typeof t?a(this,t):"string"==typeof t?s(this,t,arguments.length>1?arguments[1]:"utf8"):u(this,t)):arguments.length>1?new o(t,arguments[1]):new o(t)}function a(t,e){if(t=v(t,0>e?0:0|g(e)),!o.TYPED_ARRAY_SUPPORT)for(var n=0;e>n;n++)t[n]=0;return t}function s(t,e,n){("string"!=typeof n||""===n)&&(n="utf8");var i=0|m(e,n);return t=v(t,i),t.write(e,n),t}function u(t,e){if(o.isBuffer(e))return c(t,e);if(Q(e))return l(t,e);if(null==e)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(e.buffer instanceof ArrayBuffer)return h(t,e);if(e instanceof ArrayBuffer)return f(t,e)}return e.length?p(t,e):d(t,e)}function c(t,e){var n=0|g(e.length);return t=v(t,n),e.copy(t,0,0,n),t}function l(t,e){var n=0|g(e.length);t=v(t,n);for(var i=0;n>i;i+=1)t[i]=255&e[i];return t}function h(t,e){var n=0|g(e.length);t=v(t,n);for(var i=0;n>i;i+=1)t[i]=255&e[i];return t}function f(t,e){return o.TYPED_ARRAY_SUPPORT?(e.byteLength,t=o._augment(new Uint8Array(e))):t=h(t,new Uint8Array(e)),t}function p(t,e){var n=0|g(e.length);t=v(t,n);for(var i=0;n>i;i+=1)t[i]=255&e[i];return t}function d(t,e){var n,i=0;"Buffer"===e.type&&Q(e.data)&&(n=e.data,i=0|g(n.length)),t=v(t,i);for(var r=0;i>r;r+=1)t[r]=255&n[r];return t}function v(t,e){o.TYPED_ARRAY_SUPPORT?(t=o._augment(new Uint8Array(e)),t.__proto__=o.prototype):(t.length=e,t._isBuffer=!0);var n=0!==e&&e<=o.poolSize>>>1;return n&&(t.parent=Z),t}function g(t){if(t>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|t}function y(t,e){if(!(this instanceof y))return new y(t,e);var n=new o(t,e);return delete n.parent,n}function m(t,e){"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"binary":case"raw":case"raws":return n;case"utf8":case"utf-8":return z(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return $(t).length;default:if(i)return z(t).length;e=(""+e).toLowerCase(),i=!0}}function b(t,e,n){var i=!1;if(e=0|e,n=void 0===n||n===1/0?this.length:0|n,t||(t="utf8"),0>e&&(e=0),n>this.length&&(n=this.length),e>=n)return"";for(;;)switch(t){case"hex":return A(this,e,n);case"utf8":case"utf-8":return T(this,e,n);case"ascii":return S(this,e,n);case"binary":return L(this,e,n);case"base64":return P(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,e,n);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function _(t,e,n,i){n=Number(n)||0;var r=t.length-n;i?(i=Number(i),i>r&&(i=r)):i=r;var o=e.length;if(o%2!==0)throw new Error("Invalid hex string");i>o/2&&(i=o/2);for(var a=0;i>a;a++){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))throw new Error("Invalid hex string");t[n+a]=s}return a}function w(t,e,n,i){return H(z(e,t.length-n),t,n,i)}function x(t,e,n,i){return H(Y(e),t,n,i)}function k(t,e,n,i){return x(t,e,n,i)}function E(t,e,n,i){return H($(e),t,n,i)}function R(t,e,n,i){return H(W(e,t.length-n),t,n,i)}function P(t,e,n){return V.fromByteArray(0===e&&n===t.length?t:t.slice(e,n))}function T(t,e,n){n=Math.min(t.length,n);for(var i=[],r=e;n>r;){var o=t[r],a=null,s=o>239?4:o>223?3:o>191?2:1;if(n>=r+s){var u,c,l,h;switch(s){case 1:128>o&&(a=o);break;case 2:u=t[r+1],128===(192&u)&&(h=(31&o)<<6|63&u,h>127&&(a=h));break;case 3:u=t[r+1],c=t[r+2],128===(192&u)&&128===(192&c)&&(h=(15&o)<<12|(63&u)<<6|63&c,h>2047&&(55296>h||h>57343)&&(a=h));break;case 4:u=t[r+1],c=t[r+2],l=t[r+3],128===(192&u)&&128===(192&c)&&128===(192&l)&&(h=(15&o)<<18|(63&u)<<12|(63&c)<<6|63&l,h>65535&&1114112>h&&(a=h))}}null===a?(a=65533,s=1):a>65535&&(a-=65536,i.push(a>>>10&1023|55296),a=56320|1023&a),i.push(a),r+=s}return j(i)}function j(t){var e=t.length;if(K>=e)return String.fromCharCode.apply(String,t);for(var n="",i=0;e>i;)n+=String.fromCharCode.apply(String,t.slice(i,i+=K));return n}function S(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;n>r;r++)i+=String.fromCharCode(127&t[r]);return i}function L(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;n>r;r++)i+=String.fromCharCode(t[r]);return i}function A(t,e,n){var i=t.length;(!e||0>e)&&(e=0),(!n||0>n||n>i)&&(n=i);for(var r="",o=e;n>o;o++)r+=U(t[o]);return r}function O(t,e,n){for(var i=t.slice(e,n),r="",o=0;o<i.length;o+=2)r+=String.fromCharCode(i[o]+256*i[o+1]);return r}function C(t,e,n){if(t%1!==0||0>t)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function I(t,e,n,i,r,a){if(!o.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");if(e>r||a>e)throw new RangeError("value is out of bounds");if(n+i>t.length)throw new RangeError("index out of range")}function N(t,e,n,i){0>e&&(e=65535+e+1);for(var r=0,o=Math.min(t.length-n,2);o>r;r++)t[n+r]=(e&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function M(t,e,n,i){0>e&&(e=4294967295+e+1);for(var r=0,o=Math.min(t.length-n,4);o>r;r++)t[n+r]=e>>>8*(i?r:3-r)&255}function q(t,e,n,i,r,o){if(e>r||o>e)throw new RangeError("value is out of bounds");if(n+i>t.length)throw new RangeError("index out of range");if(0>n)throw new RangeError("index out of range")}function B(t,e,n,i,r){return r||q(t,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),J.write(t,e,n,i,23,4),n+4}function D(t,e,n,i,r){return r||q(t,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),J.write(t,e,n,i,52,8),n+8}function F(t){if(t=G(t).replace(tt,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function G(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function U(t){return 16>t?"0"+t.toString(16):t.toString(16)}function z(t,e){e=e||1/0;for(var n,i=t.length,r=null,o=[],a=0;i>a;a++){if(n=t.charCodeAt(a),n>55295&&57344>n){if(!r){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===i){(e-=3)>-1&&o.push(239,191,189);continue}r=n;continue}if(56320>n){(e-=3)>-1&&o.push(239,191,189),r=n;continue}n=(r-55296<<10|n-56320)+65536}else r&&(e-=3)>-1&&o.push(239,191,189);if(r=null,128>n){if((e-=1)<0)break;o.push(n)}else if(2048>n){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(65536>n){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(1114112>n))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function Y(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e}function W(t,e){for(var n,i,r,o=[],a=0;a<t.length&&!((e-=2)<0);a++)n=t.charCodeAt(a),i=n>>8,r=n%256,o.push(r),o.push(i);return o}function $(t){return V.toByteArray(F(t))}function H(t,e,n,i){for(var r=0;i>r&&!(r+n>=e.length||r>=t.length);r++)e[r+n]=t[r];return r}var V=t("base64-js"),J=t("ieee754"),Q=t("isarray");n.Buffer=o,n.SlowBuffer=y,n.INSPECT_MAX_BYTES=50,o.poolSize=8192;var Z={};o.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:i(),o.TYPED_ARRAY_SUPPORT?(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array):(o.prototype.length=void 0,o.prototype.parent=void 0),o.isBuffer=function(t){return!(null==t||!t._isBuffer)},o.compare=function(t,e){if(!o.isBuffer(t)||!o.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,i=e.length,r=0,a=Math.min(n,i);a>r&&t[r]===e[r];)++r;return r!==a&&(n=t[r],i=e[r]),i>n?-1:n>i?1:0},o.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(t,e){if(!Q(t))throw new TypeError("list argument must be an Array of Buffers.");if(0===t.length)return new o(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;n++)e+=t[n].length;var i=new o(e),r=0;for(n=0;n<t.length;n++){var a=t[n];a.copy(i,r),r+=a.length}return i},o.byteLength=m,o.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?T(this,0,t):b.apply(this,arguments)},o.prototype.equals=function(t){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:0===o.compare(this,t)},o.prototype.inspect=function(){var t="",e=n.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},o.prototype.compare=function(t){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?0:o.compare(this,t)},o.prototype.indexOf=function(t,e){function n(t,e,n){for(var i=-1,r=0;n+r<t.length;r++)if(t[n+r]===e[-1===i?0:r-i]){if(-1===i&&(i=r),r-i+1===e.length)return n+i}else i=-1;return-1}if(e>2147483647?e=2147483647:-2147483648>e&&(e=-2147483648),e>>=0,0===this.length)return-1;if(e>=this.length)return-1;if(0>e&&(e=Math.max(this.length+e,0)),"string"==typeof t)return 0===t.length?-1:String.prototype.indexOf.call(this,t,e);if(o.isBuffer(t))return n(this,t,e);if("number"==typeof t)return o.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,t,e):n(this,[t],e);throw new TypeError("val must be string, number or Buffer")},o.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},o.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},o.prototype.write=function(t,e,n,i){if(void 0===e)i="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)i=e,n=this.length,e=0;else if(isFinite(e))e=0|e,isFinite(n)?(n=0|n,void 0===i&&(i="utf8")):(i=n,n=void 0);else{var r=i;i=e,e=0|n,n=r}var o=this.length-e;if((void 0===n||n>o)&&(n=o),t.length>0&&(0>n||0>e)||e>this.length)throw new RangeError("attempt to write outside buffer bounds");i||(i="utf8");for(var a=!1;;)switch(i){case"hex":return _(this,t,e,n);case"utf8":case"utf-8":return w(this,t,e,n);case"ascii":return x(this,t,e,n);case"binary":return k(this,t,e,n);case"base64":return E(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,t,e,n);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),a=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var K=4096;o.prototype.slice=function(t,e){var n=this.length;t=~~t,e=void 0===e?n:~~e,0>t?(t+=n,0>t&&(t=0)):t>n&&(t=n),0>e?(e+=n,0>e&&(e=0)):e>n&&(e=n),t>e&&(e=t);var i;if(o.TYPED_ARRAY_SUPPORT)i=o._augment(this.subarray(t,e));else{var r=e-t;i=new o(r,void 0);for(var a=0;r>a;a++)i[a]=this[a+t]}return i.length&&(i.parent=this.parent||this),i},o.prototype.readUIntLE=function(t,e,n){t=0|t,e=0|e,n||C(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return i},o.prototype.readUIntBE=function(t,e,n){t=0|t,e=0|e,n||C(t,e,this.length);for(var i=this[t+--e],r=1;e>0&&(r*=256);)i+=this[t+--e]*r;return i},o.prototype.readUInt8=function(t,e){return e||C(t,1,this.length),this[t]},o.prototype.readUInt16LE=function(t,e){return e||C(t,2,this.length),this[t]|this[t+1]<<8},o.prototype.readUInt16BE=function(t,e){return e||C(t,2,this.length),this[t]<<8|this[t+1]},o.prototype.readUInt32LE=function(t,e){return e||C(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},o.prototype.readUInt32BE=function(t,e){return e||C(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},o.prototype.readIntLE=function(t,e,n){t=0|t,e=0|e,n||C(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return r*=128,i>=r&&(i-=Math.pow(2,8*e)),i},o.prototype.readIntBE=function(t,e,n){t=0|t,e=0|e,n||C(t,e,this.length);for(var i=e,r=1,o=this[t+--i];i>0&&(r*=256);)o+=this[t+--i]*r;return r*=128,o>=r&&(o-=Math.pow(2,8*e)),o},o.prototype.readInt8=function(t,e){return e||C(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},o.prototype.readInt16LE=function(t,e){e||C(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(t,e){e||C(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(t,e){return e||C(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},o.prototype.readInt32BE=function(t,e){return e||C(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},o.prototype.readFloatLE=function(t,e){return e||C(t,4,this.length),J.read(this,t,!0,23,4)},o.prototype.readFloatBE=function(t,e){return e||C(t,4,this.length),J.read(this,t,!1,23,4)},o.prototype.readDoubleLE=function(t,e){return e||C(t,8,this.length),J.read(this,t,!0,52,8)},o.prototype.readDoubleBE=function(t,e){return e||C(t,8,this.length),J.read(this,t,!1,52,8)},o.prototype.writeUIntLE=function(t,e,n,i){t=+t,e=0|e,n=0|n,i||I(this,t,e,n,Math.pow(2,8*n),0);var r=1,o=0;for(this[e]=255&t;++o<n&&(r*=256);)this[e+o]=t/r&255;return e+n},o.prototype.writeUIntBE=function(t,e,n,i){t=+t,e=0|e,n=0|n,i||I(this,t,e,n,Math.pow(2,8*n),0);var r=n-1,o=1;for(this[e+r]=255&t;--r>=0&&(o*=256);)this[e+r]=t/o&255;return e+n},o.prototype.writeUInt8=function(t,e,n){return t=+t,e=0|e,n||I(this,t,e,1,255,0),o.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},o.prototype.writeUInt16LE=function(t,e,n){return t=+t,e=0|e,n||I(this,t,e,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):N(this,t,e,!0),e+2},o.prototype.writeUInt16BE=function(t,e,n){return t=+t,e=0|e,n||I(this,t,e,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):N(this,t,e,!1),e+2},o.prototype.writeUInt32LE=function(t,e,n){return t=+t,e=0|e,n||I(this,t,e,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):M(this,t,e,!0),e+4},o.prototype.writeUInt32BE=function(t,e,n){return t=+t,e=0|e,n||I(this,t,e,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):M(this,t,e,!1),e+4},o.prototype.writeIntLE=function(t,e,n,i){if(t=+t,e=0|e,!i){var r=Math.pow(2,8*n-1);I(this,t,e,n,r-1,-r)}var o=0,a=1,s=0>t?1:0;for(this[e]=255&t;++o<n&&(a*=256);)this[e+o]=(t/a>>0)-s&255;return e+n},o.prototype.writeIntBE=function(t,e,n,i){if(t=+t,e=0|e,!i){var r=Math.pow(2,8*n-1);I(this,t,e,n,r-1,-r)}var o=n-1,a=1,s=0>t?1:0;for(this[e+o]=255&t;--o>=0&&(a*=256);)this[e+o]=(t/a>>0)-s&255;return e+n},o.prototype.writeInt8=function(t,e,n){return t=+t,e=0|e,n||I(this,t,e,1,127,-128),o.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),0>t&&(t=255+t+1),this[e]=255&t,e+1},o.prototype.writeInt16LE=function(t,e,n){return t=+t,e=0|e,n||I(this,t,e,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):N(this,t,e,!0),e+2},o.prototype.writeInt16BE=function(t,e,n){return t=+t,e=0|e,n||I(this,t,e,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):N(this,t,e,!1),e+2},o.prototype.writeInt32LE=function(t,e,n){return t=+t,e=0|e,n||I(this,t,e,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):M(this,t,e,!0),e+4},o.prototype.writeInt32BE=function(t,e,n){return t=+t,e=0|e,n||I(this,t,e,4,2147483647,-2147483648),0>t&&(t=4294967295+t+1),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):M(this,t,e,!1),e+4},o.prototype.writeFloatLE=function(t,e,n){return B(this,t,e,!0,n)},o.prototype.writeFloatBE=function(t,e,n){return B(this,t,e,!1,n)},o.prototype.writeDoubleLE=function(t,e,n){return D(this,t,e,!0,n)},o.prototype.writeDoubleBE=function(t,e,n){return D(this,t,e,!1,n)},o.prototype.copy=function(t,e,n,i){if(n||(n=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&n>i&&(i=n),i===n)return 0;if(0===t.length||0===this.length)return 0;if(0>e)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("sourceStart out of bounds");if(0>i)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var r,a=i-n;if(this===t&&e>n&&i>e)for(r=a-1;r>=0;r--)t[r+e]=this[r+n];else if(1e3>a||!o.TYPED_ARRAY_SUPPORT)for(r=0;a>r;r++)t[r+e]=this[r+n];else t._set(this.subarray(n,n+a),e);return a},o.prototype.fill=function(t,e,n){if(t||(t=0),e||(e=0),n||(n=this.length),e>n)throw new RangeError("end < start");if(n!==e&&0!==this.length){if(0>e||e>=this.length)throw new RangeError("start out of bounds");if(0>n||n>this.length)throw new RangeError("end out of bounds");var i;if("number"==typeof t)for(i=e;n>i;i++)this[i]=t;else{var r=z(t.toString()),o=r.length;for(i=e;n>i;i++)this[i]=r[i%o]}return this}},o.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(o.TYPED_ARRAY_SUPPORT)return new o(this).buffer;for(var t=new Uint8Array(this.length),e=0,n=t.length;n>e;e+=1)t[e]=this[e];return t.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var X=o.prototype;o._augment=function(t){return t.constructor=o,t._isBuffer=!0,t._set=t.set,t.get=X.get,t.set=X.set,t.write=X.write,t.toString=X.toString,t.toLocaleString=X.toString,t.toJSON=X.toJSON,t.equals=X.equals,t.compare=X.compare,t.indexOf=X.indexOf,t.copy=X.copy,t.slice=X.slice,t.readUIntLE=X.readUIntLE,t.readUIntBE=X.readUIntBE,t.readUInt8=X.readUInt8,t.readUInt16LE=X.readUInt16LE,t.readUInt16BE=X.readUInt16BE,t.readUInt32LE=X.readUInt32LE,t.readUInt32BE=X.readUInt32BE,t.readIntLE=X.readIntLE,t.readIntBE=X.readIntBE,t.readInt8=X.readInt8,t.readInt16LE=X.readInt16LE,t.readInt16BE=X.readInt16BE,t.readInt32LE=X.readInt32LE,t.readInt32BE=X.readInt32BE,t.readFloatLE=X.readFloatLE,t.readFloatBE=X.readFloatBE,t.readDoubleLE=X.readDoubleLE,t.readDoubleBE=X.readDoubleBE,t.writeUInt8=X.writeUInt8,t.writeUIntLE=X.writeUIntLE,t.writeUIntBE=X.writeUIntBE,t.writeUInt16LE=X.writeUInt16LE,t.writeUInt16BE=X.writeUInt16BE,t.writeUInt32LE=X.writeUInt32LE,t.writeUInt32BE=X.writeUInt32BE,t.writeIntLE=X.writeIntLE,t.writeIntBE=X.writeIntBE,t.writeInt8=X.writeInt8,t.writeInt16LE=X.writeInt16LE,t.writeInt16BE=X.writeInt16BE,t.writeInt32LE=X.writeInt32LE,t.writeInt32BE=X.writeInt32BE,t.writeFloatLE=X.writeFloatLE,t.writeFloatBE=X.writeFloatBE,t.writeDoubleLE=X.writeDoubleLE,t.writeDoubleBE=X.writeDoubleBE,t.fill=X.fill,t.inspect=X.inspect,t.toArrayBuffer=X.toArrayBuffer,t};var tt=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":54,ieee754:70,isarray:57}],57:[function(t,e){var n={}.toString;e.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},{}],58:[function(t,e,n){(function(t){function e(t){return Array.isArray?Array.isArray(t):"[object Array]"===g(t)}function i(t){return"boolean"==typeof t}function r(t){return null===t}function o(t){return null==t}function a(t){return"number"==typeof t}function s(t){return"string"==typeof t}function u(t){return"symbol"==typeof t}function c(t){return void 0===t}function l(t){return"[object RegExp]"===g(t)}function h(t){return"object"==typeof t&&null!==t}function f(t){return"[object Date]"===g(t)}function p(t){return"[object Error]"===g(t)||t instanceof Error}function d(t){return"function"==typeof t}function v(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function g(t){return Object.prototype.toString.call(t)}n.isArray=e,n.isBoolean=i,n.isNull=r,n.isNullOrUndefined=o,n.isNumber=a,n.isString=s,n.isSymbol=u,n.isUndefined=c,n.isRegExp=l,n.isObject=h,n.isDate=f,n.isError=p,n.isFunction=d,n.isPrimitive=v,n.isBuffer=t.isBuffer}).call(this,{isBuffer:t("../../is-buffer/index.js")})},{"../../is-buffer/index.js":72}],59:[function(t,e){function n(){return[].slice.call(arguments).join("//")}function i(){return[].slice.call(arguments).map(function(t){return"object"==typeof t?JSON.stringify(t):t}).join("//")}function r(t,e,n,i){var r=1;if(/^\d+$/.test(t))return void(e[t]={});var o=t.match(p)||0;o&&(o=o&&parseInt(o[1],10),r=o+1,t=t.replace(p,""));var a=t.match(d)||0;a&&(a=a&&parseInt(a[1],10),n=a-1,t=t.replace(d,""));var s=h(r,n);if(t&&"*"!==t){if("odd"===t||"even"===t){var u="even"===t?0:1;f(s,2,u).forEach(function(t){e[t]={}})}else if("string"==typeof t&&~t.indexOf("%")){var c=t.split("%"),v=c[0]&&parseInt(c[0],10)||1,g=parseInt(c[1],10);l(o,n,v,g).forEach(function(t){e[t]={}})}else if("function"==typeof i){var y=i(t,r,n);Array.isArray(y)&&y.forEach(function(t){e[t]={}})}}else s.forEach(function(t){e[t]={}})}function o(t){var e=[];return Object.keys(t).forEach(function(n){Object.keys(t[n]).forEach(function(i){Object.keys(t[n][i]).forEach(function(t){t=10>t?"0"+t:t,e.push([n,i,t].join("."))})})}),e}function a(t,e){if(!t)throw new Error('Invalid "notes" array');if(!e||"object"!=typeof e)throw new Error('Invalid "options" object');if("number"!=typeof e.beatsPerBar||e.beatsPerBar<0)throw new Error("Invalid options: beatsPerBar is not a valid number");if("number"!=typeof e.barsPerLoop||e.barsPerLoop<0)throw new Error("Invalid options: barsPerLoop is not a valid number");var n=[];return t.forEach(function(t){var i=t[0];return u(i)?n.push(t):void v(i,e.barsPerLoop,e.beatsPerBar,e.expander).forEach(function(e){var i=t.slice();i[0]=e,n.push(i)})}),n}var s=t("meemo"),u=s(function(t){return!!t.match(/^\d+\.\d+\.\d+$/)}),c=s(function(t){return t.split(".").map(function(t){var e=parseInt(t,10);return t.match(/^\d+$/)&&!isNaN(e)?e:t})}),l=s(function(t,e,n,i){for(var r=[];e>=n;)n>t&&r.push(n),n+=i;return r},i),h=s(function(t,e){for(var n=[],i=t;e>=i;)n.push(i),i++;return n},n),f=s(function(t,e,n){return t.filter(function(t){return t%e===n})},n),p=/>(\d+)/,d=/<(\d+)/,v=s(function(t,e,n,i){var a=c(t),s={};return r(a[0],s,e,i),Object.keys(s).forEach(function(t){r(a[1],s[t],n,i),Object.keys(s[t]).forEach(function(e){r(a[2],s[t][e],96,i)})}),o(s)},n);e.exports=a},{meemo:140}],60:[function(t,e){function n(t,e){if(!(this instanceof n))return new n(t,e);if(!t||"object"!=typeof t||"function"!=typeof t.createScriptProcessor)throw new Error("Invalid arguments: cannot init without AudioContext");i.EventEmitter.call(this),e=e||{},this.context=t,this.clock=o(this.context),this.scheduler=a(),this.expressions=s,this.expandNote=e.expandNote,this.upstartWait=e.upstartWait||250,this.setTempo(e.tempo||120),this.setBeatsPerBar(e.beatsPerBar||4),this.setLoopLength(e.loopLength||2),this._position="0.0.00",this.clock.on("data",this.updatePositionFromClock.bind(this)),this.clock.pipe(this.scheduler).on("data",this.emitStep.bind(this)),this._keepAlive=this._keepAlive.bind(this)}var i=t("events"),r=t("util").inherits,o=t("./vendor/bopper"),a=t("./vendor/ditty"),s=t("dilla-expressions"),u=t("meemo"),c=t("./lib/checkValid"),l=t("./lib/positionHelper"),h=(new Date).valueOf(),f="//";r(n,i.EventEmitter);var p=n.prototype;p.updatePositionFromClock=function(t){var e=this.getPositionFromTime(t.time);this._position!==e&&(this._position=e,this.emit("tick",{position:this._position,context:this.context}))},p.getPositionFromTime=function(t){var e=this.clock._state.cycleLength*this.clock._state.preCycle*1,n=this.clock.getPositionAt(t-e);return this.getPositionFromClockPosition(n)},p.getPositionFromClockPosition=function(t){if(c.number("clockPosition",t),0>t)return"0.0.00";var e=this._loopLength*this._beatsPerBar,n=Math.floor(t/e)||0;t-=n*e;var i=Math.floor(t/this._beatsPerBar);t-=i*this._beatsPerBar;var r=Math.floor(t);t-=r;var o=Math.floor(96*t)+1;return 10>o&&(o="0"+o),i+1+"."+(r+1)+"."+o;

},p.getClockPositionFromPosition=u(function(t){var e=t.split("."),n=parseInt(e[0],10)-1,i=parseInt(e[1],10)-1,r=parseInt(e[2],10)-1;return n*this._beatsPerBar+i+r/96}),p.getPositionWithOffset=u(function(t,e){if(!c.positionString(t))throw new Error("Invalid argument: position is not a valid position string");if("number"!=typeof e||isNaN(e)||e%1!==0)throw new Error("Invalid argument: offset is not a valid number");if(!e)return t;var n=this.getClockPositionFromPosition(t),i=e/96;return this.getPositionFromClockPosition(n+i)},function(t,e){return t+f+e}),p.getDurationFromTicks=function(t){return c.positiveNumber("ticks",t),1/96*t},p.emitStep=function(t){var e=t.offset=this.clock._state.cycleLength*this.clock._state.preCycle*1,n=t.args;t.time=t.time+e,t.clockPosition=t.position,t.position="start"===t.event?n.position:n.duration?this.getPositionWithOffset(n.position,n.duration):n.position,("stop"!==t.event||t.position!==n.position)&&(t.context=this.context,this.emit("step",t))},p.notesForSet=u(function(t,e,n,i){var r=this;e.forEach(function(t,n){!Array.isArray(t)&&"object"==typeof t&&t.position&&(e[n]=[t.position,t])}),e=r.expressions(e,{beatsPerBar:n,barsPerLoop:i});var o=!1;return e.forEach(function(t,a){if(l.isPositionWithinBounds(t[0],i,n)){r.expandNote&&(t=r.expandNote(t));var s=l.normalizeNote(t);e[a]=[r.getClockPositionFromPosition(s.position),r.getDurationFromTicks(s.duration||0),null,null,s]}else e[a]=null,o=!0}),o?e.filter(function(t){return!!t}):e},function(t,e,n,i){return t+f+JSON.stringify(e)+f+n+f+i}),p.set=function(t,e){if("string"!=typeof t)throw new Error("Invalid argument: id is not a valid string");if(!e||!Array.isArray(e))throw new Error("Invalid argument: notes is not a valid array");this.scheduler.set(t,this.notesForSet(t,e,this.beatsPerBar(),this.loopLength()),this.beatsPerBar()*this.loopLength())},p.get=function(t){if("string"!=typeof t)throw new Error("Invalid argument: id is not a valid string");return(this.scheduler.get(t)||[]).map(function(t){return t[4]})},p.channels=function(){return this.scheduler.getIds()},p.clear=function(t){var e=this;if(t){if("string"!=typeof t)throw new Error("Invalid argument: id is not a valid string");this.set(t,[])}else this.scheduler.getIds().forEach(function(t){e.clear(t)})},p._keepAlive=function(){this.clock._state.playing&&(window.__lastDillaPosition=this._position,setTimeout(window.requestAnimationFrame.bind(null,this._keepAlive),100))},p.start=function t(){var e=(new Date).valueOf(),n=e-h;return n<this.upstartWait?setTimeout(t.bind(this),this.upstartWait-n):void(this.clock._state.playing||(this.clock.start(),this._keepAlive(),this.emit("playing")))},p.pause=function(){this.clock._state.playing&&(this.clock.stop(),this.emit("paused"))},p.stop=function(){this.clock._state.playing&&(this.clock.stop(),this.emit("paused"),this.clock.setPosition(0),this._position="0.0.00")},p.position=function(){return this._position},p.setPosition=function(t){if(!l.isPositionWithinBounds(t,this.loopLength(),this.beatsPerBar()))throw new Error("Invalid argument: position is not valid");this._position=t,this.clock.setPosition(this.getClockPositionFromPosition(t))},p.tempo=function(){return this.clock.getTempo()},p.setTempo=function(t){if("number"!=typeof t||0>t||isNaN(t))throw new Error("Invalid argument: tempo is not a valid number");this.clock.setTempo(t)},p.beatsPerBar=function(){return this._beatsPerBar},p.setBeatsPerBar=function(t){c.positiveNumber("beats",t),this._beatsPerBar=t},p.loopLength=function(){return this._loopLength},p.setLoopLength=function(t){c.positiveNumber("bars",t),this._loopLength=t},e.exports=n},{"./lib/checkValid":61,"./lib/positionHelper":62,"./vendor/bopper":63,"./vendor/ditty":64,"dilla-expressions":59,events:66,meemo:140,util:160}],61:[function(t,e){var n={number:function(t,e){if("number"!=typeof e||isNaN(e))throw new Error("Invalid argument: "+t+" is not a valid number")},positiveNumber:function(t,e){if(n.number(t,e),0>e)throw new Error("Invalid argument: "+t+" is not a valid positive number")},positionString:function(t){return"string"==typeof t&&!!t.match(/\d+\.\d+\.\d+/)}};e.exports=n},{}],62:[function(t,e){var n=t("./checkValid"),i=t("meemo"),r={normalizeNote:i(function(t){if(!t||!Array.isArray(t))throw new Error("Invalid argument: note params is not valid array");var e="object"==typeof t[1]?t[1]:"object"==typeof t[0]?t[0]:{position:""},i="string"==typeof t[0]&&n.positionString(t[0])?t[0]:"string"==typeof e.position&&n.positionString(e.position)?e.position:null;if(!i)throw new Error("Invalid argument: position is not valid");return e.position=i,e},function(t){return JSON.stringify(t)}),isPositionWithinBounds:i(function(t,e,i){if(!n.positionString(t))return!1;var r=t.split("."),o=parseInt(r[0],10)-1,a=parseInt(r[1],10)-1,s=parseInt(r[2],10)-1;return 0>s||0>a||0>o||s>=96||a>=i||o>=e?!1:!0},function(t,e,n){return t+"//"+e+"//"+n})};e.exports=r},{"./checkValid":61,meemo:140}],63:[function(t,e){function n(t){if(!(this instanceof n))return new n(t);var e=this;r.call(this),this.readable=!0,this.writable=!1,this.context=t;var a=this._processor=t.createScriptProcessor(512,1,1),s=i.bind(this);this._processor.onaudioprocess=s;var u=120,c=1/t.sampleRate*this._processor.bufferSize;this._state={lastTo:0,lastEndTime:0,playing:!1,bpm:u,beatDuration:60/u,increment:u/60*c,cycleLength:c,preCycle:4},this.onSchedule=o(function(t){e.on("data",t)}),a.connect(t.destination)}function i(){var t=this._state;this.schedule(t.cycleLength*t.preCycle)}var r=t("stream"),o=t("geval"),a=t("util").inherits;e.exports=n,a(n,r);var s=n.prototype;s.start=function(){this._state.playing=!0,this.emit("start")},s.stop=function(){this._state.playing=!1,this.emit("stop")},s.schedule=function(t){var e=this._state,n=(this.context.currentTime,this.context.currentTime+t),i=e.lastEndTime;if(n>=i&&(e.lastEndTime=n,e.playing)){var t=n-i,r=t/e.beatDuration,o=e.lastTo,a=o+r;e.lastTo=a,this._schedule(i,o,a)}},s.setTempo=function(t){var e=t/60,n=this._state;n.beatDuration=60/t,n.increment=e*n.cycleLength,n.bpm=t,this.emit("tempo",n.bpm)},s.getTempo=function(){return this._state.bpm},s.isPlaying=function(){return this._state.playing},s.setPosition=function(t){this._state.lastTo=parseFloat(t)},s.setSpeed=function(t){var e=this._state;t=parseFloat(t)||0;var n=e.bpm*t,i=n/60;e.beatDuration=60/n,e.increment=i*e.cycleLength},s.getPositionAt=function(t){var e=this._state,n=e.lastEndTime-t;return e.lastTo-n/e.beatDuration},s.getTimeAt=function(t){var e=this._state,n=this.getCurrentPosition()-t;return this.context.currentTime-n*e.beatDuration},s.getCurrentPosition=function(){return this.getPositionAt(this.context.currentTime)},s.getNextScheduleTime=function(){var t=this._state;return t.lastEndTime},s.getBeatDuration=function(){var t=this._state;return t.beatDuration};var u={from:0,to:0,time:0,duration:0,beatDuration:0};s._schedule=function(t,e,n){var i=this._state,r=(n-e)*i.beatDuration;u.from=e,u.to=n,u.time=t,u.duration=r,u.beatDuration=i.beatDuration,this.emit("data",u)}},{geval:68,stream:156,util:160}],64:[function(t,e){function n(){return this instanceof n?(o.call(this),this.readable=!0,this.writable=!0,void(this._state={loops:{},lengths:{},ids:[],queue:[]})):new n}function i(t,e,n){var i=t%n,r=e%n,o=e+i-r;return e>o?o+n:o}function r(t,e){return!("stop"!==t.event||e&&e.length)}e.exports=n;var o=t("stream"),a=t("util").inherits;a(n,o);var s=n.prototype;s.set=function(t,e,n){var i=this._state;if(e)i.loops[t]||i.ids.push(t),i.loops[t]=e,i.lengths[t]=n||8;else{var r=i.ids.indexOf(t);~r&&i.ids.splice(r,1),i.loops[t]=null}i.loops[t]?this.emit("change",{id:t,events:i.loops[t],length:i.lengths[t]}):this.emit("change",{id:t})},s.get=function(t){return this._state.loops[t]},s.getLength=function(t){return this._state.lengths[t]},s.getIds=function(){return this._state.ids},s.getDescriptors=function(){for(var t,e=this._state,n=[],i=0,r=e.ids.length;r>i;i++)t=e.ids[i],e.loops[t]&&n.push({id:t,length:e.lengths[t],events:e.loops[t]});return n},s.update=function(t){this.set(t.id,t.events,t.length)},s.push=function(t){this.emit("data",t)},s.write=function(t){this._transform(t)},s._updateItemProperties=function(t,e,n){var i=this._state,o=n.from,a=n.to,s=n.time,u=(n.time+n.duration,n.beatDuration),c=i.queue;if(a>e.position||r(e,i.loops[e.id])){if(a>e.position){var l=(e.position-o)*u;e.time=s+l}else e.time=s,e.position=o;c.splice(t,1),this.push(e)}},s._queueEvent=function(t,e,n,r,o){var a=o.from,s=o.to,u=o.time,c=o.beatDuration,l=i(t[0],a,r),h=l+t[1];if(l>=a&&s>l){var f=(l-a)*c,p=t[1]*c,d=u+f,v=d+p;n.push({id:e,event:"start",position:l,args:t[4],time:d}),p&&n.push({id:e,event:"stop",position:h,args:t[4],time:v})}},s._transform=function(t){for(var e,n,i,r,o=window.performance.now(),a=(o+5e3*t.duration,this._state),s=(t.from,t.to,t.time,t.time+t.duration),u=(t.beatDuration,a.ids),c=a.queue,l=[],h=c.length-1;h>=0;h--)this._updateItemProperties(h,c[h],t);for(var f=0,p=u.length;p>f;f++){e=u[f],n=a.loops[e],i=a.lengths[e];for(var d=0,v=n.length;v>d;d++)this._queueEvent(n[d],e,l,i,t)}for(var g=0,y=l.length;y>g;g++)r=l[g],r.time<s?this.push(r):c.push(r)}},{stream:156,util:160}],65:[function(t,e){"use strict";function n(t){if(void 0===t||null===t)throw new TypeError("Cannot convert first argument to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(void 0!==i&&null!==i)for(var r=Object.keys(Object(i)),o=0,a=r.length;a>o;o++){var s=r[o],u=Object.getOwnPropertyDescriptor(i,s);void 0!==u&&u.enumerable&&(e[s]=i[s])}}return e}function i(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:n})}e.exports={assign:n,polyfill:i}},{}],66:[function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function r(t){return"number"==typeof t}function o(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!r(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,r,s,u,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[t],a(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(r=arguments.length,s=new Array(r-1),u=1;r>u;u++)s[u-1]=arguments[u];n.apply(this,s)}else if(o(n)){for(r=arguments.length,s=new Array(r-1),u=1;r>u;u++)s[u-1]=arguments[u];for(c=n.slice(),r=c.length,u=0;r>u;u++)c[u].apply(this,s)}return!0},n.prototype.addListener=function(t,e){var r;if(!i(e))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned){var r;r=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,r&&r>0&&this._events[t].length>r&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())}return this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function n(){this.removeListener(t,n),r||(r=!0,e.apply(this,arguments))}if(!i(e))throw TypeError("listener must be a function");var r=!1;return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var n,r,a,s;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],a=n.length,r=-1,n===e||i(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(n)){for(s=a;s-->0;)if(n[s]===e||n[s].listener&&n[s].listener===e){r=s;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],i(n))this.removeListener(t,n);else for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.listenerCount=function(t,e){var n;return n=t._events&&t._events[e]?i(t._events[e])?1:t._events[e].length:0}},{}],67:[function(t,e){function n(){function t(t){for(var e=0;e<n.length;e++)n[e](t)}function e(t){function e(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}return n.push(t),e}var n=[];return{broadcast:t,listen:e}}e.exports=n},{}],68:[function(t,e){function n(t){var e=i();return t(e.broadcast),e.listen}var i=t("./event.js");e.exports=n},{"./event.js":67}],69:[function(t,e){(function(t){e.exports="undefined"!=typeof window?window:"undefined"!=typeof t?t:{}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],70:[function(t,e,n){n.read=function(t,e,n,i,r){var o,a,s=8*r-i-1,u=(1<<s)-1,c=u>>1,l=-7,h=n?r-1:0,f=n?-1:1,p=t[e+h];for(h+=f,o=p&(1<<-l)-1,p>>=-l,l+=s;l>0;o=256*o+t[e+h],h+=f,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=i;l>0;a=256*a+t[e+h],h+=f,l-=8);if(0===o)o=1-c;else{if(o===u)return a?0/0:(p?-1:1)*(1/0);a+=Math.pow(2,i),o-=c}return(p?-1:1)*a*Math.pow(2,o-i)},n.write=function(t,e,n,i,r,o){var a,s,u,c=8*o-r-1,l=(1<<c)-1,h=l>>1,f=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:o-1,d=i?1:-1,v=0>e||0===e&&0>1/e?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),e+=a+h>=1?f/u:f*Math.pow(2,1-h),e*u>=2&&(a++,u/=2),a+h>=l?(s=0,a=l):a+h>=1?(s=(e*u-1)*Math.pow(2,r),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,r),a=0));r>=8;t[n+p]=255&s,p+=d,s/=256,r-=8);for(a=a<<r|s,c+=r;c>0;t[n+p]=255&a,p+=d,a/=256,c-=8);t[n+p-d]|=128*v}},{}],71:[function(t,e){e.exports="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],72:[function(t,e){e.exports=function(t){return!(null==t||!(t._isBuffer||t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)))}},{}],73:[function(t,e){e.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},{}],74:[function(t,e){function n(t){if(t=t||{},"object"!=typeof t)throw new TypeError("Options must be an object");var e=".";this.storage={},this.separator=t.separator||e}var i=Array.prototype.slice;n.prototype.add=function(t,e){var n=this.storage[t]||(this.storage[t]=[]);n.push(e)},n.prototype.remove=function(t){var e,n;for(e in this.storage)n=this.storage[e],n.some(function(e,i){return e===t?(n.splice(i,1),!0):void 0})},n.prototype.get=function(t){var e,n=[];for(e in this.storage)t&&t!==e&&0!==e.indexOf(t+this.separator)||(n=n.concat(this.storage[e]));return n},n.prototype.getGrouped=function(t){var e,n={};for(e in this.storage)t&&t!==e&&0!==e.indexOf(t+this.separator)||(n[e]=i.call(this.storage[e]));return n},n.prototype.getAll=function(t){var e,n={};for(e in this.storage)(t===e||0===e.indexOf(t+this.separator))&&(n[e]=i.call(this.storage[e]));return n},n.prototype.run=function(t,e){var n=i.call(arguments,2);this.get(t).forEach(function(t){t.apply(e||this,n)})},e.exports=n},{}],75:[function(t,e){function n(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e}e.exports=n},{}],76:[function(t,e){function n(t,e){for(var n=-1,i=t.length;++n<i&&e(t[n],n,t)!==!1;);return t}e.exports=n},{}],77:[function(t,e){function n(t,e){for(var n=-1,i=t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}e.exports=n},{}],78:[function(t,e){function n(t,e){return null==e?t:i(e,r(e),t)}var i=t("lodash._basecopy"),r=t("lodash.keys");e.exports=n},{"lodash._basecopy":80,"lodash.keys":128}],79:[function(t,e){(function(n){function i(t,e,n,o,p,v,y){var m;if(n&&(m=p?n(t,o,p):n(t)),void 0!==m)return m;if(!c(t))return t;var b=d(t);if(b){if(m=a(t),!e)return l(t,m)}else{var _=z.call(t),x=_==w;if(_!=E&&_!=g&&(!x||p))return F[_]?u(t,_,e):p?t:{};if(m=s(x?{}:t),!e)return f(m,t)}v||(v=[]),y||(y=[]);for(var k=v.length;k--;)if(v[k]==t)return y[k];return v.push(t),y.push(m),(b?h:r)(t,function(r,o){m[o]=i(r,e,n,o,t,v,y)}),m}function r(t,e){return p(t,e,v)}function o(t){var e=new Y(t.byteLength),n=new W(e);return n.set(new W(t)),e}function a(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&U.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function s(t){var e=t.constructor;return"function"==typeof e&&e instanceof e||(e=Object),new e}function u(t,e,n){var i=t.constructor;switch(e){case S:return o(t);case m:case b:return new i(+t);case L:case A:case O:case C:case I:case N:case M:case q:case B:var r=t.buffer;return new i(n?o(r):r,t.byteOffset,t.length);case k:case T:return new i(t);case R:var a=new i(t.source,D.exec(t));a.lastIndex=t.lastIndex}return a}function c(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var l=t("lodash._arraycopy"),h=t("lodash._arrayeach"),f=t("lodash._baseassign"),p=t("lodash._basefor"),d=t("lodash.isarray"),v=t("lodash.keys"),g="[object Arguments]",y="[object Array]",m="[object Boolean]",b="[object Date]",_="[object Error]",w="[object Function]",x="[object Map]",k="[object Number]",E="[object Object]",R="[object RegExp]",P="[object Set]",T="[object String]",j="[object WeakMap]",S="[object ArrayBuffer]",L="[object Float32Array]",A="[object Float64Array]",O="[object Int8Array]",C="[object Int16Array]",I="[object Int32Array]",N="[object Uint8Array]",M="[object Uint8ClampedArray]",q="[object Uint16Array]",B="[object Uint32Array]",D=/\w*$/,F={};F[g]=F[y]=F[S]=F[m]=F[b]=F[L]=F[A]=F[O]=F[C]=F[I]=F[k]=F[E]=F[R]=F[T]=F[N]=F[M]=F[q]=F[B]=!0,F[_]=F[w]=F[x]=F[P]=F[j]=!1;var G=Object.prototype,U=G.hasOwnProperty,z=G.toString,Y=n.ArrayBuffer,W=n.Uint8Array;e.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"lodash._arraycopy":75,"lodash._arrayeach":76,"lodash._baseassign":78,"lodash._basefor":84,"lodash.isarray":116,"lodash.keys":128}],80:[function(t,e){function n(t,e,n){n||(n={});for(var i=-1,r=e.length;++i<r;){var o=e[i];n[o]=t[o]}return n}e.exports=n},{}],81:[function(t,e){function n(t,e){var n=t?t.length:0,s=[];if(!n)return s;var u=-1,c=i,l=!0,h=l&&e.length>=a?o(e):null,f=e.length;h&&(c=r,l=!1,e=h);t:for(;++u<n;){var p=t[u];if(l&&p===p){for(var d=f;d--;)if(e[d]===p)continue t;s.push(p)}else c(e,p,0)<0&&s.push(p)}return s}var i=t("lodash._baseindexof"),r=t("lodash._cacheindexof"),o=t("lodash._createcache"),a=200;e.exports=n},{"lodash._baseindexof":86,"lodash._cacheindexof":93,"lodash._createcache":95}],82:[function(t,e){function n(t,e){return f(t,e,c)}function i(t){return function(e){return null==e?void 0:e[t]}}function r(t,e){return function(n,i){var r=n?p(n):0;if(!a(r))return t(n,i);for(var o=e?r:-1,u=s(n);(e?o--:++o<r)&&i(u[o],o,u)!==!1;);return n}}function o(t){return function(e,n,i){for(var r=s(e),o=i(e),a=o.length,u=t?a:-1;t?u--:++u<a;){var c=o[u];if(n(r[c],c,r)===!1)break}return e}}function a(t){return"number"==typeof t&&t>-1&&t%1==0&&l>=t}function s(t){return u(t)?t:Object(t)}function u(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var c=t("lodash.keys"),l=9007199254740991,h=r(n),f=o(),p=i("length");e.exports=h},{"lodash.keys":128}],83:[function(t,e){function n(t){return!!t&&"object"==typeof t}function i(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}function r(t,e,o,s){s||(s=[]);for(var l=-1,h=t.length;++l<h;){var f=t[l];n(f)&&a(f)&&(o||c(f)||u(f))?e?r(f,e,o,s):i(s,f):o||(s[s.length]=f)}return s}function o(t){return function(e){return null==e?void 0:e[t]}}function a(t){return null!=t&&s(h(t))}function s(t){return"number"==typeof t&&t>-1&&t%1==0&&l>=t}var u=t("lodash.isarguments"),c=t("lodash.isarray"),l=9007199254740991,h=o("length");e.exports=r},{"lodash.isarguments":115,"lodash.isarray":116}],84:[function(t,e){function n(t){return function(e,n,i){for(var r=-1,o=Object(e),a=i(e),s=a.length;s--;){var u=a[t?s:++r];if(n(o[u],u,o)===!1)break}return e}}var i=n();e.exports=i},{}],85:[function(t,e){function n(t,e,n){if(null!=t){void 0!==n&&n in i(t)&&(e=[n]);for(var r=0,o=e.length;null!=t&&o>r;)t=t[e[r++]];return r&&r==o?t:void 0}}function i(t){return r(t)?t:Object(t)}function r(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}e.exports=n},{}],86:[function(t,e){function n(t,e,n){if(e!==e)return i(t,n);for(var r=n-1,o=t.length;++r<o;)if(t[r]===e)return r;return-1}function i(t,e,n){for(var i=t.length,r=e+(n?0:-1);n?r--:++r<i;){var o=t[r];if(o!==o)return r}return-1}e.exports=n},{}],87:[function(t,e){function n(t){return!!t&&"object"==typeof t}function i(t,e){for(var n=-1,i=t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}function r(t,e,i,a,s,u){return t===e?!0:null==t||null==e||!c(t)&&!n(e)?t!==t&&e!==e:o(t,e,r,i,a,s,u)}function o(t,e,n,i,r,o,c){var f=l(t),v=l(e),g=d,y=d;f||(g=E.call(t),g==p?g=b:g!=b&&(f=h(t))),v||(y=E.call(e),y==p?y=b:y!=b&&(v=h(e)));var m=g==b,_=y==b,w=g==y;if(w&&!f&&!m)return s(t,e,g);if(!r){var x=m&&k.call(t,"__wrapped__"),R=_&&k.call(e,"__wrapped__");if(x||R)return n(x?t.value():t,R?e.value():e,i,r,o,c)}if(!w)return!1;o||(o=[]),c||(c=[]);for(var P=o.length;P--;)if(o[P]==t)return c[P]==e;o.push(t),c.push(e);var T=(f?a:u)(t,e,n,i,r,o,c);return o.pop(),c.pop(),T}function a(t,e,n,r,o,a,s){var u=-1,c=t.length,l=e.length;if(c!=l&&!(o&&l>c))return!1;for(;++u<c;){var h=t[u],f=e[u],p=r?r(o?f:h,o?h:f,u):void 0;if(void 0!==p){if(p)continue;return!1}if(o){if(!i(e,function(t){return h===t||n(h,t,r,o,a,s)}))return!1}else if(h!==f&&!n(h,f,r,o,a,s))return!1}return!0}function s(t,e,n){switch(n){case v:case g:return+t==+e;case y:return t.name==e.name&&t.message==e.message;case m:return t!=+t?e!=+e:t==+e;case _:case w:return t==e+""}return!1}function u(t,e,n,i,r,o,a){var s=f(t),u=s.length,c=f(e),l=c.length;if(u!=l&&!r)return!1;for(var h=u;h--;){var p=s[h];if(!(r?p in e:k.call(e,p)))return!1}for(var d=r;++h<u;){p=s[h];var v=t[p],g=e[p],y=i?i(r?g:v,r?v:g,p):void 0;if(!(void 0===y?n(v,g,i,r,o,a):y))return!1;d||(d="constructor"==p)}if(!d){var m=t.constructor,b=e.constructor;if(m!=b&&"constructor"in t&&"constructor"in e&&!("function"==typeof m&&m instanceof m&&"function"==typeof b&&b instanceof b))return!1}return!0}function c(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var l=t("lodash.isarray"),h=t("lodash.istypedarray"),f=t("lodash.keys"),p="[object Arguments]",d="[object Array]",v="[object Boolean]",g="[object Date]",y="[object Error]",m="[object Number]",b="[object Object]",_="[object RegExp]",w="[object String]",x=Object.prototype,k=x.hasOwnProperty,E=x.toString;e.exports=r},{"lodash.isarray":116,"lodash.istypedarray":126,"lodash.keys":128}],88:[function(t,e){function n(t,e,n){var i=-1,r=t.length;e=null==e?0:+e||0,0>e&&(e=-e>r?0:r+e),n=void 0===n||n>r?r:+n||0,0>n&&(n+=r),r=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(r);++i<r;)o[i]=t[i+e];return o}e.exports=n},{}],89:[function(t,e){function n(t){return null==t?"":t+""}e.exports=n},{}],90:[function(t,e){function n(t,e){var n=-1,s=i,u=t.length,c=!0,l=c&&u>=a,h=l?o():null,f=[];h?(s=r,c=!1):(l=!1,h=e?[]:f);t:for(;++n<u;){var p=t[n],d=e?e(p,n,t):p;if(c&&p===p){for(var v=h.length;v--;)if(h[v]===d)continue t;e&&h.push(d),f.push(p)}else s(h,d,0)<0&&((e||l)&&h.push(d),f.push(p))}return f}var i=t("lodash._baseindexof"),r=t("lodash._cacheindexof"),o=t("lodash._createcache"),a=200;e.exports=n},{"lodash._baseindexof":86,"lodash._cacheindexof":93,"lodash._createcache":95}],91:[function(t,e){function n(t,e){for(var n=-1,i=e.length,r=Array(i);++n<i;)r[n]=t[e[n]];return r}e.exports=n},{}],92:[function(t,e){function n(t,e,n){if("function"!=typeof t)return i;if(void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,i,r){return t.call(e,n,i,r)};case 4:return function(n,i,r,o){return t.call(e,n,i,r,o)};case 5:return function(n,i,r,o,a){return t.call(e,n,i,r,o,a)}}return function(){return t.apply(e,arguments)}}function i(t){return t}e.exports=n},{}],93:[function(t,e){function n(t,e){var n=t.data,r="string"==typeof e||i(e)?n.set.has(e):n.hash[e];return r?0:-1}function i(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}e.exports=n},{}],94:[function(t,e){function n(t){return o(function(e,n){var o=-1,a=null==e?0:n.length,s=a>2?n[a-2]:void 0,u=a>2?n[2]:void 0,c=a>1?n[a-1]:void 0;for("function"==typeof s?(s=i(s,c,5),a-=2):(s="function"==typeof c?c:void 0,a-=s?1:0),u&&r(n[0],n[1],u)&&(s=3>a?void 0:s,a=1);++o<a;){var l=n[o];l&&t(e,l,s)}return e})}var i=t("lodash._bindcallback"),r=t("lodash._isiterateecall"),o=t("lodash.restparam");e.exports=n},{"lodash._bindcallback":92,"lodash._isiterateecall":99,"lodash.restparam":135}],95:[function(t,e){(function(n){function i(t){var e=t?t.length:0;for(this.data={hash:c(null),set:new u};e--;)this.push(t[e])}function r(t){var e=this.data;"string"==typeof t||a(t)?e.set.add(t):e.hash[t]=!0}function o(t){return c&&u?new i(t):null}function a(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var s=t("lodash._getnative"),u=s(n,"Set"),c=s(Object,"create");i.prototype.push=r,e.exports=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"lodash._getnative":98}],96:[function(t,e){(function(n){function i(t,e,n){var i=t.length;if(e=+e,i>=e||!a(e))return"";var s=e-i;return n=null==n?" ":n+"",r(n,o(s/n.length)).slice(0,s)}var r=t("lodash.repeat"),o=Math.ceil,a=n.isFinite;e.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"lodash.repeat":134}],97:[function(t,e){function n(t,e,n){var i=n.length;switch(i){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function i(t,e){return t="number"==typeof t||U.test(t)?+t:-1,e=null==e?O:e,t>-1&&t%1==0&&e>t}function r(t,e){for(var n=-1,i=t.length,r=-1,o=[];++n<i;)t[n]===e&&(t[n]=N,o[++r]=n);return o}function o(t,e,n){for(var i=n.length,r=-1,o=$(t.length-i,0),a=-1,s=e.length,u=Array(s+o);++a<s;)u[a]=e[a];for(;++r<i;)u[n[r]]=t[r];for(;o--;)u[a++]=t[r++];return u}function a(t,e,n){for(var i=-1,r=n.length,o=-1,a=$(t.length-r,0),s=-1,u=e.length,c=Array(a+u);++o<a;)c[o]=t[o];for(var l=o;++s<u;)c[l+s]=e[s];for(;++i<r;)c[l+n[i]]=t[o++];return c}function s(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e}function u(t,e,n){function i(){var e=this&&this!==_&&this instanceof i?o:t;return e.apply(r?n:this,arguments)}var r=e&w,o=c(t);return i}function c(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=V(t.prototype),i=t.apply(n,e);return y(i)?i:n}}function l(t,e,i){function o(){for(var s=arguments.length,u=s,c=Array(s),l=this&&this!==_&&this instanceof o?a:t,f=o.placeholder;u--;)c[u]=arguments[u];var d=3>s&&c[0]!==f&&c[s-1]!==f?[]:r(c,f);return s-=d.length,i>s?p(t,e,h,f,void 0,c,d,void 0,void 0,i-s):n(l,this,c)}var a=c(t);return o}function h(t,e,n,i,s,u,l,f,d,g){function y(){for(var w=arguments.length,x=w,E=Array(w);x--;)E[x]=arguments[x];if(i&&(E=o(E,i,s)),u&&(E=a(E,u,l)),P||T){var R=y.placeholder,j=r(E,R);if(w-=j.length,g>w)return p(t,e,h,R,n,E,j,f,d,g-w)}var S=b?n:this,O=k?S[t]:t;return f?E=v(E,f):L&&E.length>1&&E.reverse(),m&&d<E.length&&(E.length=d),this&&this!==_&&this instanceof y&&(O=A||c(O)),O.apply(S,E)}var m=e&j,b=e&w,k=e&x,P=e&E,T=e&R,L=e&S,A=k?void 0:c(t);return y}function f(t,e,i,r){function o(){for(var e=-1,u=arguments.length,c=-1,l=r.length,h=Array(l+u),f=this&&this!==_&&this instanceof o?s:t;++c<l;)h[c]=r[c];for(;u--;)h[c++]=arguments[++e];return n(f,a?i:this,h)}var a=e&w,s=c(t);return o}function p(t,e,n,i,r,o,a,u,c,l){var h=e&E,f=u?s(u):void 0,p=h?a:void 0,d=h?void 0:a,v=h?o:void 0,g=h?void 0:o;e|=h?P:T,e&=~(h?T:P),e&k||(e&=~(w|x));var y=n(t,e,r,v,p,g,d,f,c,l);return y.placeholder=i,y}function d(t,e,n,i,r,o,a,s){var c=e&x;if(!c&&"function"!=typeof t)throw new TypeError(L);var p=i?i.length:0;if(p||(e&=~(P|T),i=r=void 0),a=void 0===a?a:$(m(a),0),s=void 0===s?s:m(s),p-=r?r.length:0,e&T){var d=i,v=r;i=r=void 0}var g=[t,e,n,i,r,d,v,o,a,s];if(t=g[0],e=g[1],n=g[2],i=g[3],r=g[4],s=g[9]=null==g[9]?c?0:t.length:$(g[9]-p,0),!s&&e&(E|R)&&(e&=~(E|R)),e&&e!=w)y=e==E||e==R?l(t,e,s):e!=P&&e!=(w|P)||r.length?h.apply(void 0,g):f(t,e,n,i);else var y=u(t,e,n);return y}function v(t,e){for(var n=t.length,r=H(e.length,n),o=s(t);r--;){var a=e[r];t[r]=i(a,n)?o[a]:void 0}return t}function g(t){var e=y(t)?W.call(t):"";return e==M||e==q}function y(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function m(t){if(!t)return 0===t?t:0;if(t=b(t),t===A||t===-A){var e=0>t?-1:1;return e*C}var n=t%1;return t===t?n?t-n:t:0}function b(t){if(y(t)){var e=g(t.valueOf)?t.valueOf():t;t=y(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(B,"");var n=F.test(t);return n||G.test(t)?z(t.slice(2),n?2:8):D.test(t)?I:+t}var _=t("lodash._root"),w=1,x=2,k=4,E=8,R=16,P=32,T=64,j=128,S=512,L="Expected a function",A=1/0,O=9007199254740991,C=1.7976931348623157e308,I=0/0,N="__lodash_placeholder__",M="[object Function]",q="[object GeneratorFunction]",B=/^\s+|\s+$/g,D=/^[-+]0x[0-9a-f]+$/i,F=/^0b[01]+$/i,G=/^0o[0-7]+$/i,U=/^(?:0|[1-9]\d*)$/,z=parseInt,Y=Object.prototype,W=Y.toString,$=Math.max,H=Math.min,V=function(){function t(){}return function(e){if(y(e)){t.prototype=e;var n=new t;t.prototype=void 0}return n||{}}}();e.exports=d},{"lodash._root":103}],98:[function(t,e){function n(t){return!!t&&"object"==typeof t}function i(t,e){var n=null==t?void 0:t[e];return a(n)?n:void 0}function r(t){return o(t)&&f.call(t)==s}function o(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function a(t){return null==t?!1:r(t)?p.test(l.call(t)):n(t)&&u.test(t)}var s="[object Function]",u=/^\[object .+?Constructor\]$/,c=Object.prototype,l=Function.prototype.toString,h=c.hasOwnProperty,f=c.toString,p=RegExp("^"+l.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=i},{}],99:[function(t,e){function n(t){return function(e){return null==e?void 0:e[t]}}function i(t){return null!=t&&a(l(t))}function r(t,e){return t="number"==typeof t||u.test(t)?+t:-1,e=null==e?c:e,t>-1&&t%1==0&&e>t}function o(t,e,n){if(!s(n))return!1;var o=typeof e;if("number"==o?i(n)&&r(e,n.length):"string"==o&&e in n){var a=n[e];return t===t?t===a:a!==a}return!1}function a(t){return"number"==typeof t&&t>-1&&t%1==0&&c>=t}function s(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var u=/^\d+$/,c=9007199254740991,l=n("length");e.exports=o},{}],100:[function(t,e){function n(t,e){t=i(t);for(var n=-1,r=e.length,o={};++n<r;){var a=e[n];a in t&&(o[a]=t[a])}return o;

}function i(t){return r(t)?t:Object(t)}function r(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}e.exports=n},{}],101:[function(t,e){function n(t,e){return r(t,e,o)}function i(t,e){var i={};return n(t,function(t,n,r){e(t,n,r)&&(i[n]=t)}),i}var r=t("lodash._basefor"),o=t("lodash.keysin");e.exports=i},{"lodash._basefor":84,"lodash.keysin":129}],102:[function(t,e){function n(t,e){for(var n=-1,r=t.length,o=-1,a=[];++n<r;)t[n]===e&&(t[n]=i,a[++o]=n);return a}var i="__lodash_placeholder__";e.exports=n},{}],103:[function(t,e,n){(function(t){function i(t){return t&&t.Object===Object?t:null}var r={function:!0,object:!0},o=r[typeof n]&&n&&!n.nodeType?n:void 0,a=r[typeof e]&&e&&!e.nodeType?e:void 0,s=i(o&&a&&"object"==typeof t&&t),u=i(r[typeof self]&&self),c=i(r[typeof window]&&window),l=i(r[typeof this]&&this),h=s||c!==(l&&l.window)&&c||u||l||Function("return this")();e.exports=h}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],104:[function(t,e){function n(t){return null==t?"":t+""}function i(t){if(r(t))return t;var e=[];return n(t).replace(o,function(t,n,i,r){e.push(i?r.replace(a,"$1"):n||t)}),e}var r=t("lodash.isarray"),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,a=/\\(\\)?/g;e.exports=i},{"lodash.isarray":116}],105:[function(t,e){function n(t,e,n){for(var i=-1,r=o(e),a=r.length;++i<a;){var s=r[i],u=t[s],c=n(u,e[s],s,t,e);(c===c?c===u:u!==u)&&(void 0!==u||s in t)||(t[s]=c)}return t}var i=t("lodash._baseassign"),r=t("lodash._createassigner"),o=t("lodash.keys"),a=r(function(t,e,r){return r?n(t,e,r):i(t,e)});e.exports=a},{"lodash._baseassign":78,"lodash._createassigner":94,"lodash.keys":128}],106:[function(t,e){function n(t,e){var n;if("function"!=typeof e){if("function"!=typeof t)throw new TypeError(i);var r=t;t=e,e=r}return function(){return--t>0&&(n=e.apply(this,arguments)),1>=t&&(e=void 0),n}}var i="Expected a function";e.exports=n},{}],107:[function(t,e){var n=t("lodash._createwrapper"),i=t("lodash._replaceholders"),r=t("lodash.restparam"),o=1,a=32,s=r(function(t,e,r){var u=o;if(r.length){var c=i(r,s.placeholder);u|=a}return n(t,u,e,r,c)});s.placeholder={},e.exports=s},{"lodash._createwrapper":97,"lodash._replaceholders":102,"lodash.restparam":135}],108:[function(t,e){function n(t,e,n,a){return e&&"boolean"!=typeof e&&o(t,e,n)?e=!1:"function"==typeof e&&(a=n,n=e,e=!1),"function"==typeof n?i(t,e,r(n,a,3)):i(t,e)}var i=t("lodash._baseclone"),r=t("lodash._bindcallback"),o=t("lodash._isiterateecall");e.exports=n},{"lodash._baseclone":79,"lodash._bindcallback":92,"lodash._isiterateecall":99}],109:[function(t,e){function n(t,e,n){function r(){g&&clearTimeout(g),f&&clearTimeout(f),f=g=y=void 0}function s(){var n=e-(u()-d);if(0>=n||n>e){f&&clearTimeout(f);var i=y;f=g=y=void 0,i&&(m=u(),p=t.apply(v,h),g||f||(h=v=null))}else g=setTimeout(s,n)}function c(){g&&clearTimeout(g),f=g=y=void 0,(_||b!==e)&&(m=u(),p=t.apply(v,h),g||f||(h=v=null))}function l(){if(h=arguments,d=u(),v=this,y=_&&(g||!w),b===!1)var n=w&&!g;else{f||w||(m=d);var i=b-(d-m),r=0>=i||i>b;r?(f&&(f=clearTimeout(f)),m=d,p=t.apply(v,h)):f||(f=setTimeout(c,i))}return r&&g?g=clearTimeout(g):g||e===b||(g=setTimeout(s,e)),n&&(r=!0,p=t.apply(v,h)),!r||g||f||(h=v=null),p}var h,f,p,d,v,g,y,m=0,b=!1,_=!0;if("function"!=typeof t)throw new TypeError(o);if(e=0>e?0:+e||0,n===!0){var w=!0;_=!1}else i(n)&&(w=n.leading,b="maxWait"in n&&a(+n.maxWait||0,e),_="trailing"in n?n.trailing:_);return l.cancel=r,l}function i(t){var e=typeof t;return"function"==e||!!t&&"object"==e}var r=t("lodash.isnative"),o="Expected a function",a=Math.max,s=r(s=Date.now)&&s,u=s||function(){return(new Date).getTime()};e.exports=n},{"lodash.isnative":121}],110:[function(t,e){function n(t,e){return void 0===t?e:t}function i(t,e){return o(function(n){var i=n[0];return null==i?i:(n.push(e),t.apply(void 0,n))})}var r=t("lodash.assign"),o=t("lodash.restparam"),a=i(r,n);e.exports=a},{"lodash.assign":105,"lodash.restparam":135}],111:[function(t,e){function n(t){return f[t]}function i(t){return!!t&&"object"==typeof t}function r(t){return"symbol"==typeof t||i(t)&&d.call(t)==c}function o(t){if("string"==typeof t)return t;if(null==t)return"";if(r(t))return v?y.call(t):"";var e=t+"";return"0"==e&&1/t==-u?"-0":e}function a(t){return t=o(t),t&&h.test(t)?t.replace(l,n):t}var s=t("lodash._root"),u=1/0,c="[object Symbol]",l=/[&<>"'`]/g,h=RegExp(l.source),f={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},p=Object.prototype,d=p.toString,v=s.Symbol,g=v?v.prototype:void 0,y=v?g.toString:void 0;e.exports=a},{"lodash._root":103}],112:[function(t,e){function n(t,e){return function(n,i,r){return"function"==typeof i&&void 0===r&&a(n)?t(n,i):e(n,o(i,r,3))}}var i=t("lodash._arrayeach"),r=t("lodash._baseeach"),o=t("lodash._bindcallback"),a=t("lodash.isarray"),s=n(i,r);e.exports=s},{"lodash._arrayeach":76,"lodash._baseeach":82,"lodash._bindcallback":92,"lodash.isarray":116}],113:[function(t,e){function n(t,e){return t="number"==typeof t||g.test(t)?+t:-1,e=null==e?b:e,t>-1&&t%1==0&&e>t}function i(t,e){var n=typeof t;if("string"==n&&v.test(t)||"number"==n)return!0;if(p(t))return!1;var i=!d.test(t);return i||null!=e&&t in o(e)}function r(t){return"number"==typeof t&&t>-1&&t%1==0&&b>=t}function o(t){return s(t)?t:Object(t)}function a(t){var e=t?t.length:0;return e?t[e-1]:void 0}function s(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function u(t,e){if(null==t)return!1;var o=m.call(t,e);if(!o&&!i(e)){if(e=h(e),t=1==e.length?t:c(t,l(e,0,-1)),null==t)return!1;e=a(e),o=m.call(t,e)}return o||r(t.length)&&n(e,t.length)&&(p(t)||f(t))}var c=t("lodash._baseget"),l=t("lodash._baseslice"),h=t("lodash._topath"),f=t("lodash.isarguments"),p=t("lodash.isarray"),d=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,v=/^\w*$/,g=/^\d+$/,y=Object.prototype,m=y.hasOwnProperty,b=9007199254740991;e.exports=u},{"lodash._baseget":85,"lodash._baseslice":88,"lodash._topath":104,"lodash.isarguments":115,"lodash.isarray":116}],114:[function(t,e){function n(t){return function(e){return null==e?void 0:e[t]}}function i(t){return"number"==typeof t&&t>-1&&t%1==0&&p>=t}function r(t,e,n,r){var s=t?d(t):0;return i(s)||(t=o(t),s=t.length),n="number"!=typeof n||r&&u(e,n,r)?0:0>n?f(s+n,0):n||0,"string"==typeof t||!c(t)&&l(t)?s>=n&&t.indexOf(e,n)>-1:!!s&&a(t,e,n)>-1}function o(t){return s(t,h(t))}var a=t("lodash._baseindexof"),s=t("lodash._basevalues"),u=t("lodash._isiterateecall"),c=t("lodash.isarray"),l=t("lodash.isstring"),h=t("lodash.keys"),f=Math.max,p=9007199254740991,d=n("length");e.exports=r},{"lodash._baseindexof":86,"lodash._basevalues":91,"lodash._isiterateecall":99,"lodash.isarray":116,"lodash.isstring":125,"lodash.keys":128}],115:[function(t,e){function n(t){return function(e){return null==e?void 0:e[t]}}function i(t){return o(t)&&v.call(t,"callee")&&(!y.call(t,"callee")||g.call(t)==h)}function r(t){return null!=t&&s(m(t))&&!a(t)}function o(t){return c(t)&&r(t)}function a(t){var e=u(t)?g.call(t):"";return e==f||e==p}function s(t){return"number"==typeof t&&t>-1&&t%1==0&&l>=t}function u(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function c(t){return!!t&&"object"==typeof t}var l=9007199254740991,h="[object Arguments]",f="[object Function]",p="[object GeneratorFunction]",d=Object.prototype,v=d.hasOwnProperty,g=d.toString,y=d.propertyIsEnumerable,m=n("length");e.exports=i},{}],116:[function(t,e){function n(t){return!!t&&"object"==typeof t}function i(t,e){var n=null==t?void 0:t[e];return s(n)?n:void 0}function r(t){return"number"==typeof t&&t>-1&&t%1==0&&y>=t}function o(t){return a(t)&&d.call(t)==c}function a(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function s(t){return null==t?!1:o(t)?v.test(f.call(t)):n(t)&&l.test(t)}var u="[object Array]",c="[object Function]",l=/^\[object .+?Constructor\]$/,h=Object.prototype,f=Function.prototype.toString,p=h.hasOwnProperty,d=h.toString,v=RegExp("^"+f.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),g=i(Array,"isArray"),y=9007199254740991,m=g||function(t){return n(t)&&r(t.length)&&d.call(t)==u};e.exports=m},{}],117:[function(t,e){function n(t){return i(t)&&a.call(t)==r}function i(t){return!!t&&"object"==typeof t}var r="[object Date]",o=Object.prototype,a=o.toString;e.exports=n},{}],118:[function(t,e){function n(t){return!!t&&"object"==typeof t}function i(t){return function(e){return null==e?void 0:e[t]}}function r(t){return null!=t&&o(p(t))}function o(t){return"number"==typeof t&&t>-1&&t%1==0&&f>=t}function a(t){return null==t?!0:r(t)&&(u(t)||l(t)||s(t)||n(t)&&c(t.splice))?!t.length:!h(t).length}var s=t("lodash.isarguments"),u=t("lodash.isarray"),c=t("lodash.isfunction"),l=t("lodash.isstring"),h=t("lodash.keys"),f=9007199254740991,p=i("length");e.exports=a},{"lodash.isarguments":115,"lodash.isarray":116,"lodash.isfunction":120,"lodash.isstring":125,"lodash.keys":128}],119:[function(t,e){function n(t,e,n,o){n="function"==typeof n?r(n,o,3):void 0;var a=n?n(t,e):void 0;return void 0===a?i(t,e,n):!!a}var i=t("lodash._baseisequal"),r=t("lodash._bindcallback");e.exports=n},{"lodash._baseisequal":87,"lodash._bindcallback":92}],120:[function(t,e){function n(t){var e=i(t)?s.call(t):"";return e==r||e==o}function i(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var r="[object Function]",o="[object GeneratorFunction]",a=Object.prototype,s=a.toString;e.exports=n},{}],121:[function(t,e){function n(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function i(t){if(null!=t){try{return f.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function r(t){var e=o(t)?d.call(t):"";return e==s||e==u}function o(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function a(t){if(!o(t))return!1;var e=r(t)||n(t)?v:l;return e.test(i(t))}var s="[object Function]",u="[object GeneratorFunction]",c=/[\\^$.*+?()[\]{}|]/g,l=/^\[object .+?Constructor\]$/,h=Object.prototype,f=Function.prototype.toString,p=h.hasOwnProperty,d=h.toString,v=RegExp("^"+f.call(p).replace(c,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=a},{}],122:[function(t,e){function n(t){return null===t}e.exports=n},{}],123:[function(t,e){function n(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}e.exports=n},{}],124:[function(t,e){function n(t){return!!t&&"object"==typeof t}function i(t,e){return o(t,e,s)}function r(t){var e;if(!n(t)||h.call(t)!=u||a(t)||!l.call(t,"constructor")&&(e=t.constructor,"function"==typeof e&&!(e instanceof e)))return!1;var r;return i(t,function(t,e){r=e}),void 0===r||l.call(t,r)}var o=t("lodash._basefor"),a=t("lodash.isarguments"),s=t("lodash.keysin"),u="[object Object]",c=Object.prototype,l=c.hasOwnProperty,h=c.toString;e.exports=r},{"lodash._basefor":84,"lodash.isarguments":115,"lodash.keysin":129}],125:[function(t,e){function n(t){return!!t&&"object"==typeof t}function i(t){return"string"==typeof t||n(t)&&a.call(t)==r}var r="[object String]",o=Object.prototype,a=o.toString;e.exports=i},{}],126:[function(t,e){function n(t){return"number"==typeof t&&t>-1&&t%1==0&&o>=t}function i(t){return!!t&&"object"==typeof t}function r(t){return i(t)&&n(t.length)&&!!L[O.call(t)]}var o=9007199254740991,a="[object Arguments]",s="[object Array]",u="[object Boolean]",c="[object Date]",l="[object Error]",h="[object Function]",f="[object Map]",p="[object Number]",d="[object Object]",v="[object RegExp]",g="[object Set]",y="[object String]",m="[object WeakMap]",b="[object ArrayBuffer]",_="[object DataView]",w="[object Float32Array]",x="[object Float64Array]",k="[object Int8Array]",E="[object Int16Array]",R="[object Int32Array]",P="[object Uint8Array]",T="[object Uint8ClampedArray]",j="[object Uint16Array]",S="[object Uint32Array]",L={};L[w]=L[x]=L[k]=L[E]=L[R]=L[P]=L[T]=L[j]=L[S]=!0,L[a]=L[s]=L[b]=L[u]=L[_]=L[c]=L[l]=L[h]=L[f]=L[p]=L[d]=L[v]=L[g]=L[y]=L[m]=!1;var A=Object.prototype,O=A.toString;e.exports=r},{}],127:[function(t,e){function n(t){return void 0===t}e.exports=n},{}],128:[function(t,e){function n(t){return function(e){return null==e?void 0:e[t]}}function i(t){return null!=t&&o(y(t))}function r(t,e){return t="number"==typeof t||f.test(t)?+t:-1,e=null==e?g:e,t>-1&&t%1==0&&e>t}function o(t){return"number"==typeof t&&t>-1&&t%1==0&&g>=t}function a(t){for(var e=u(t),n=e.length,i=n&&t.length,a=!!i&&o(i)&&(h(t)||l(t)),s=-1,c=[];++s<n;){var f=e[s];(a&&r(f,i)||d.call(t,f))&&c.push(f)}return c}function s(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function u(t){if(null==t)return[];s(t)||(t=Object(t));var e=t.length;e=e&&o(e)&&(h(t)||l(t))&&e||0;for(var n=t.constructor,i=-1,a="function"==typeof n&&n.prototype===t,u=Array(e),c=e>0;++i<e;)u[i]=i+"";for(var f in t)c&&r(f,e)||"constructor"==f&&(a||!d.call(t,f))||u.push(f);return u}var c=t("lodash._getnative"),l=t("lodash.isarguments"),h=t("lodash.isarray"),f=/^\d+$/,p=Object.prototype,d=p.hasOwnProperty,v=c(Object,"keys"),g=9007199254740991,y=n("length"),m=v?function(t){var e=null==t?void 0:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&i(t)?a(t):s(t)?v(t):[]}:a;e.exports=m},{"lodash._getnative":98,"lodash.isarguments":115,"lodash.isarray":116}],129:[function(t,e){function n(t,e){return t="number"==typeof t||u.test(t)?+t:-1,e=null==e?h:e,t>-1&&t%1==0&&e>t}function i(t){return"number"==typeof t&&t>-1&&t%1==0&&h>=t}function r(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function o(t){if(null==t)return[];r(t)||(t=Object(t));var e=t.length;e=e&&i(e)&&(s(t)||a(t))&&e||0;for(var o=t.constructor,u=-1,c="function"==typeof o&&o.prototype===t,h=Array(e),f=e>0;++u<e;)h[u]=u+"";for(var p in t)f&&n(p,e)||"constructor"==p&&(c||!l.call(t,p))||h.push(p);return h}var a=t("lodash.isarguments"),s=t("lodash.isarray"),u=/^\d+$/,c=Object.prototype,l=c.hasOwnProperty,h=9007199254740991;e.exports=o},{"lodash.isarguments":115,"lodash.isarray":116}],130:[function(t,e){function n(t){return!!t&&"object"==typeof t}function i(t,e){return l(t,e,g)}function r(t,e,u,l,h){if(!s(t))return t;var f=a(e.length)&&(p(e)||v(e));return(f?c:i)(e,function(e,i,a){if(n(e))return l||(l=[]),h||(h=[]),o(t,a,i,r,u,l,h);var s=t[i],c=u?u(s,e,i,t,a):void 0,p="undefined"==typeof c;p&&(c=e),!f&&"undefined"==typeof c||!p&&(c===c?c===s:s!==s)||(t[i]=c)}),t}function o(t,e,n,i,r,o,s){for(var c=o.length,l=e[n];c--;)if(o[c]==l)return void(t[n]=s[c]);var h=t[n],g=r?r(h,l,n,t,e):void 0,m="undefined"==typeof g;m&&(g=l,a(l.length)&&(p(l)||v(l))?g=p(h)?h:h&&h.length?u(h):[]:d(l)||f(l)?g=f(h)?y(h):d(h)?h:{}:m=!1),o.push(l),s.push(g),m?t[n]=i(g,l,r,o,s):(g===g?g!==h:h===h)&&(t[n]=g)}function a(t){return"number"==typeof t&&t>-1&&t%1==0&&m>=t}function s(t){var e=typeof t;return"function"==e||!!t&&"object"==e}var u=t("lodash._arraycopy"),c=t("lodash._arrayeach"),l=t("lodash._basefor"),h=t("lodash._createassigner"),f=t("lodash.isarguments"),p=t("lodash.isarray"),d=(t("lodash.isnative"),t("lodash.isplainobject")),v=t("lodash.istypedarray"),g=t("lodash.keys"),y=(t("lodash.keysin"),t("lodash.toplainobject")),m=Math.pow(2,53)-1,b=h(r);e.exports=b},{"lodash._arraycopy":75,"lodash._arrayeach":76,"lodash._basefor":84,"lodash._createassigner":94,"lodash.isarguments":115,"lodash.isarray":116,"lodash.isnative":121,"lodash.isplainobject":124,"lodash.istypedarray":126,"lodash.keys":128,"lodash.keysin":129,"lodash.toplainobject":137}],131:[function(t,e){var n=t("lodash._arraymap"),i=t("lodash._basedifference"),r=t("lodash._baseflatten"),o=t("lodash._bindcallback"),a=t("lodash._pickbyarray"),s=t("lodash._pickbycallback"),u=t("lodash.keysin"),c=t("lodash.restparam"),l=c(function(t,e){if(null==t)return{};if("function"!=typeof e[0]){var e=n(r(e),String);return a(t,i(u(t),e))}var c=o(e[0],e[1],3);return s(t,function(t,e,n){return!c(t,e,n)})});e.exports=l},{"lodash._arraymap":77,"lodash._basedifference":81,"lodash._baseflatten":83,"lodash._bindcallback":92,"lodash._pickbyarray":100,"lodash._pickbycallback":101,"lodash.keysin":129,"lodash.restparam":135}],132:[function(t,e){function n(t){return i(2,t)}var i=t("lodash.before");e.exports=n},{"lodash.before":106}],133:[function(t,e){function n(t){return function(e,n,o){return e=i(e),e&&(t?e:"")+r(e,n,o)+(t?"":e)}}var i=t("lodash._basetostring"),r=t("lodash._createpadding"),o=n();e.exports=o},{"lodash._basetostring":89,"lodash._createpadding":96}],134:[function(t,e){function n(t){var e=i(t)?E.call(t):"";return e==v||e==g}function i(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function r(t){return!!t&&"object"==typeof t}function o(t){return"symbol"==typeof t||r(t)&&E.call(t)==y}function a(t){if(!t)return 0===t?t:0;if(t=s(t),t===h||t===-h){var e=0>t?-1:1;return e*p}var n=t%1;return t===t?n?t-n:t:0}function s(t){if(i(t)){var e=n(t.valueOf)?t.valueOf():t;t=i(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(m,"");var r=_.test(t);return r||w.test(t)?x(t.slice(2),r?2:8):b.test(t)?d:+t}function u(t){if("string"==typeof t)return t;if(null==t)return"";if(o(t))return R?j.call(t):"";var e=t+"";return"0"==e&&1/t==-h?"-0":e}function c(t,e){t=u(t),e=a(e);var n="";if(!t||1>e||e>f)return n;do e%2&&(n+=t),e=P(e/2),t+=t;while(e);return n}var l=t("lodash._root"),h=1/0,f=9007199254740991,p=1.7976931348623157e308,d=0/0,v="[object Function]",g="[object GeneratorFunction]",y="[object Symbol]",m=/^\s+|\s+$/g,b=/^[-+]0x[0-9a-f]+$/i,_=/^0b[01]+$/i,w=/^0o[0-7]+$/i,x=parseInt,k=Object.prototype,E=k.toString,R=l.Symbol,P=Math.floor,T=R?R.prototype:void 0,j=R?T.toString:void 0;e.exports=c},{"lodash._root":103}],135:[function(t,e){function n(t,e){if("function"!=typeof t)throw new TypeError(i);return e=r(void 0===e?t.length-1:+e||0,0),function(){for(var n=arguments,i=-1,o=r(n.length-e,0),a=Array(o);++i<o;)a[i]=n[e+i];switch(e){case 0:return t.call(this,a);case 1:return t.call(this,n[0],a);case 2:return t.call(this,n[0],n[1],a)}var s=Array(e+1);for(i=-1;++i<e;)s[i]=n[i];return s[e]=a,t.apply(this,s)}}var i="Expected a function",r=Math.max;e.exports=n},{}],136:[function(t,e){function n(t,e){var n=typeof t;if("string"==n&&p.test(t)||"number"==n)return!0;if(l(t))return!1;var r=!f.test(t);return r||null!=e&&t in i(e)}function i(t){return o(t)?t:Object(t)}function r(t){var e=t?t.length:0;return e?t[e-1]:void 0}function o(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function a(t,e,i){var o=null==t?void 0:t[e];return void 0===o&&(null==t||n(e,t)||(e=c(e),t=1==e.length?t:s(t,u(e,0,-1)),o=null==t?void 0:t[r(e)]),o=void 0===o?i:o),h(o)?o.call(t):o}var s=t("lodash._baseget"),u=t("lodash._baseslice"),c=t("lodash._topath"),l=t("lodash.isarray"),h=t("lodash.isfunction"),f=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,p=/^\w*$/;e.exports=a},{"lodash._baseget":85,"lodash._baseslice":88,"lodash._topath":104,"lodash.isarray":116,"lodash.isfunction":120}],137:[function(t,e){function n(t){return i(t,r(t))}var i=t("lodash._basecopy"),r=t("lodash.keysin");e.exports=n},{"lodash._basecopy":80,"lodash.keysin":129}],138:[function(t,e){var n=t("lodash._baseflatten"),i=t("lodash._baseuniq"),r=t("lodash.restparam"),o=r(function(t){return i(n(t,!1,!0))});e.exports=o},{"lodash._baseflatten":83,"lodash._baseuniq":90,"lodash.restparam":135}],139:[function(t,e){function n(t){return!!t&&"object"==typeof t}function i(t){return"symbol"==typeof t||n(t)&&h.call(t)==u}function r(t){if("string"==typeof t)return t;if(null==t)return"";if(i(t))return f?d.call(t):"";var e=t+"";return"0"==e&&1/t==-s?"-0":e}function o(t){var e=++l;return r(t)+e}var a=t("lodash._root"),s=1/0,u="[object Symbol]",c=Object.prototype,l=0,h=c.toString,f=a.Symbol,p=f?f.prototype:void 0,d=f?p.toString:void 0;e.exports=o},{"lodash._root":103}],140:[function(t,e){function n(){this.__data__={}}function i(t){return this.has(t)&&delete this.__data__[t]}function r(t){return"__proto__"==t?void 0:this.__data__[t]}function o(t){return"__proto__"!=t&&h.call(this.__data__,t)}function a(t,e){return"__proto__"!=t&&(this.__data__[t]=e),this}function s(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError(c);var n,i,r,o=function(){n=new Array(arguments.length);for(var a=0,s=arguments.length;s>a;a++)n[a]=arguments[a];if(i=e?e.apply(this,n):n[0],r=o.cache,r.has(i))return r.get(i);var u=t.apply(this,n);return o.cache=r.set(i,u),u};return o.cache=new s.Cache,o}var u=t("./lib/global"),c="Expected a function",l=Object.prototype,h=l.hasOwnProperty;n.prototype.delete=i,n.prototype.get=r,n.prototype.has=o,n.prototype.set=a,s.Cache=u.Map||n,e.exports=s},{"./lib/global":141}],141:[function(t,e){(function(t){"undefined"!=typeof window?e.exports=window:"undefined"!=typeof t?e.exports=t:"undefined"!=typeof self&&(e.exports=self)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],142:[function(t,e){e.exports=t("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":143}],143:[function(t,e){(function(n){function i(t){return this instanceof i?(u.call(this,t),c.call(this,t),t&&t.readable===!1&&(this.readable=!1),t&&t.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,t&&t.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",r)):new i(t)}function r(){this.allowHalfOpen||this._writableState.ended||n.nextTick(this.end.bind(this))}function o(t,e){for(var n=0,i=t.length;i>n;n++)e(t[n],n)}e.exports=i;var a=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e},s=t("core-util-is");s.inherits=t("inherits");var u=t("./_stream_readable"),c=t("./_stream_writable");s.inherits(i,u),o(a(c.prototype),function(t){i.prototype[t]||(i.prototype[t]=c.prototype[t])})}).call(this,t("_process"))},{"./_stream_readable":145,"./_stream_writable":147,_process:55,"core-util-is":58,inherits:71}],144:[function(t,e){function n(t){return this instanceof n?void i.call(this,t):new n(t)}e.exports=n;var i=t("./_stream_transform"),r=t("core-util-is");r.inherits=t("inherits"),r.inherits(n,i),n.prototype._transform=function(t,e,n){n(null,t)}},{"./_stream_transform":146,"core-util-is":58,inherits:71}],145:[function(t,e){(function(n){function i(e){e=e||{};var n=e.highWaterMark;this.highWaterMark=n||0===n?n:16384,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=!1,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.calledRead=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!e.objectMode,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(j||(j=t("string_decoder/").StringDecoder),this.decoder=new j(e.encoding),this.encoding=e.encoding)}function r(t){return this instanceof r?(this._readableState=new i(t,this),this.readable=!0,void P.call(this)):new r(t)}function o(t,e,n,i,r){var o=c(e,n);if(o)t.emit("error",o);else if(null===n||void 0===n)e.reading=!1,e.ended||l(t,e);else if(e.objectMode||n&&n.length>0)if(e.ended&&!r){var s=new Error("stream.push() after EOF");t.emit("error",s)}else if(e.endEmitted&&r){var s=new Error("stream.unshift() after end event");t.emit("error",s)}else!e.decoder||r||i||(n=e.decoder.write(n)),e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):(e.reading=!1,e.buffer.push(n)),e.needReadable&&h(t),p(t,e);else r||(e.reading=!1);return a(e)}function a(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}function s(t){if(t>=S)t=S;else{t--;for(var e=1;32>e;e<<=1)t|=t>>e;t++}return t}function u(t,e){return 0===e.length&&e.ended?0:e.objectMode?0===t?0:1:null===t||isNaN(t)?e.flowing&&e.buffer.length?e.buffer[0].length:e.length:0>=t?0:(t>e.highWaterMark&&(e.highWaterMark=s(t)),t>e.length?e.ended?e.length:(e.needReadable=!0,0):t)}function c(t,e){var n=null;return E.isBuffer(e)||"string"==typeof e||null===e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function l(t,e){if(e.decoder&&!e.ended){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,e.length>0?h(t):_(t)}function h(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,e.sync?n.nextTick(function(){f(t)}):f(t))}function f(t){t.emit("readable")}function p(t,e){e.readingMore||(e.readingMore=!0,n.nextTick(function(){d(t,e)}))}function d(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function v(t){return function(){var e=t._readableState;e.awaitDrain--,0===e.awaitDrain&&g(t)}}function g(t){function e(t){var e=t.write(n);!1===e&&i.awaitDrain++}var n,i=t._readableState;for(i.awaitDrain=0;i.pipesCount&&null!==(n=t.read());)if(1===i.pipesCount?e(i.pipes,0,null):w(i.pipes,e),t.emit("data",n),i.awaitDrain>0)return;return 0===i.pipesCount?(i.flowing=!1,void(R.listenerCount(t,"data")>0&&m(t))):void(i.ranOut=!0)}function y(){this._readableState.ranOut&&(this._readableState.ranOut=!1,g(this))}function m(t,e){var i=t._readableState;if(i.flowing)throw new Error("Cannot switch to old mode now.");var r=e||!1,o=!1;t.readable=!0,t.pipe=P.prototype.pipe,t.on=t.addListener=P.prototype.on,t.on("readable",function(){o=!0;for(var e;!r&&null!==(e=t.read());)t.emit("data",e);null===e&&(o=!1,t._readableState.needReadable=!0)}),t.pause=function(){r=!0,this.emit("pause")},t.resume=function(){r=!1,o?n.nextTick(function(){t.emit("readable")}):this.read(0),this.emit("resume")},t.emit("readable")}function b(t,e){var n,i=e.buffer,r=e.length,o=!!e.decoder,a=!!e.objectMode;if(0===i.length)return null;if(0===r)n=null;else if(a)n=i.shift();else if(!t||t>=r)n=o?i.join(""):E.concat(i,r),i.length=0;else if(t<i[0].length){var s=i[0];n=s.slice(0,t),i[0]=s.slice(t)}else if(t===i[0].length)n=i.shift();else{n=o?"":new E(t);for(var u=0,c=0,l=i.length;l>c&&t>u;c++){var s=i[0],h=Math.min(t-u,s.length);o?n+=s.slice(0,h):s.copy(n,u,0,h),h<s.length?i[0]=s.slice(h):i.shift(),u+=h}}return n}function _(t){var e=t._readableState;if(e.length>0)throw new Error("endReadable called on non-empty stream");!e.endEmitted&&e.calledRead&&(e.ended=!0,n.nextTick(function(){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}))}function w(t,e){for(var n=0,i=t.length;i>n;n++)e(t[n],n)}function x(t,e){for(var n=0,i=t.length;i>n;n++)if(t[n]===e)return n;return-1}e.exports=r;var k=t("isarray"),E=t("buffer").Buffer;r.ReadableState=i;var R=t("events").EventEmitter;R.listenerCount||(R.listenerCount=function(t,e){return t.listeners(e).length});var P=t("stream"),T=t("core-util-is");T.inherits=t("inherits");var j;T.inherits(r,P),r.prototype.push=function(t,e){var n=this._readableState;return"string"!=typeof t||n.objectMode||(e=e||n.defaultEncoding,e!==n.encoding&&(t=new E(t,e),e="")),o(this,n,t,e,!1)},r.prototype.unshift=function(t){var e=this._readableState;return o(this,e,t,"",!0)},r.prototype.setEncoding=function(e){j||(j=t("string_decoder/").StringDecoder),this._readableState.decoder=new j(e),this._readableState.encoding=e};var S=8388608;r.prototype.read=function(t){var e=this._readableState;e.calledRead=!0;var n,i=t;if(("number"!=typeof t||t>0)&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return h(this),null;if(t=u(t,e),0===t&&e.ended)return n=null,e.length>0&&e.decoder&&(n=b(t,e),e.length-=n.length),0===e.length&&_(this),n;var r=e.needReadable;return e.length-t<=e.highWaterMark&&(r=!0),(e.ended||e.reading)&&(r=!1),r&&(e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1),r&&!e.reading&&(t=u(i,e)),n=t>0?b(t,e):null,null===n&&(e.needReadable=!0,t=0),e.length-=t,0!==e.length||e.ended||(e.needReadable=!0),e.ended&&!e.endEmitted&&0===e.length&&_(this),n},r.prototype._read=function(){this.emit("error",new Error("not implemented"))},r.prototype.pipe=function(t,e){function i(t){t===l&&o()}function r(){t.end()}function o(){t.removeListener("close",s),t.removeListener("finish",u),t.removeListener("drain",d),t.removeListener("error",a),t.removeListener("unpipe",i),l.removeListener("end",r),l.removeListener("end",o),(!t._writableState||t._writableState.needDrain)&&d()}function a(e){c(),t.removeListener("error",a),0===R.listenerCount(t,"error")&&t.emit("error",e)}function s(){t.removeListener("finish",u),c()}function u(){t.removeListener("close",s),c()}function c(){l.unpipe(t)}var l=this,h=this._readableState;switch(h.pipesCount){case 0:h.pipes=t;break;case 1:h.pipes=[h.pipes,t];break;default:h.pipes.push(t)}h.pipesCount+=1;var f=(!e||e.end!==!1)&&t!==n.stdout&&t!==n.stderr,p=f?r:o;h.endEmitted?n.nextTick(p):l.once("end",p),t.on("unpipe",i);var d=v(l);return t.on("drain",d),t._events&&t._events.error?k(t._events.error)?t._events.error.unshift(a):t._events.error=[a,t._events.error]:t.on("error",a),t.once("close",s),t.once("finish",u),t.emit("pipe",l),h.flowing||(this.on("readable",y),h.flowing=!0,n.nextTick(function(){g(l)})),t},r.prototype.unpipe=function(t){var e=this._readableState;if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,this.removeListener("readable",y),e.flowing=!1,t&&t.emit("unpipe",this),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,this.removeListener("readable",y),e.flowing=!1;for(var r=0;i>r;r++)n[r].emit("unpipe",this);return this}var r=x(e.pipes,t);return-1===r?this:(e.pipes.splice(r,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this),this)},r.prototype.on=function(t,e){var n=P.prototype.on.call(this,t,e);if("data"!==t||this._readableState.flowing||m(this),"readable"===t&&this.readable){var i=this._readableState;i.readableListening||(i.readableListening=!0,i.emittedReadable=!1,i.needReadable=!0,i.reading?i.length&&h(this,i):this.read(0))}return n},r.prototype.addListener=r.prototype.on,r.prototype.resume=function(){m(this),this.read(0),this.emit("resume")},r.prototype.pause=function(){m(this,!0),this.emit("pause")},r.prototype.wrap=function(t){var e=this._readableState,n=!1,i=this;t.on("end",function(){if(e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&i.push(t)}i.push(null)}),t.on("data",function(r){if(e.decoder&&(r=e.decoder.write(r)),(!e.objectMode||null!==r&&void 0!==r)&&(e.objectMode||r&&r.length)){var o=i.push(r);o||(n=!0,t.pause())}});for(var r in t)"function"==typeof t[r]&&"undefined"==typeof this[r]&&(this[r]=function(e){return function(){return t[e].apply(t,arguments)}}(r));var o=["error","close","destroy","pause","resume"];return w(o,function(e){t.on(e,i.emit.bind(i,e))}),i._read=function(){n&&(n=!1,t.resume())},i},r._fromList=b}).call(this,t("_process"))},{_process:55,buffer:56,"core-util-is":58,events:66,inherits:71,isarray:73,stream:156,"string_decoder/":157}],146:[function(t,e){function n(t,e){this.afterTransform=function(t,n){return i(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function i(t,e,n){var i=t._transformState;i.transforming=!1;var r=i.writecb;if(!r)return t.emit("error",new Error("no writecb in Transform class"));i.writechunk=null,i.writecb=null,null!==n&&void 0!==n&&t.push(n),r&&r(e);var o=t._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&t._read(o.highWaterMark)}function r(t){if(!(this instanceof r))return new r(t);a.call(this,t);var e=(this._transformState=new n(t,this),this);this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("finish",function(){"function"==typeof this._flush?this._flush(function(t){o(e,t)}):o(e)})}function o(t,e){if(e)return t.emit("error",e);var n=t._writableState,i=(t._readableState,t._transformState);if(n.length)throw new Error("calling transform done when ws.length != 0");if(i.transforming)throw new Error("calling transform done when still transforming");return t.push(null)}e.exports=r;var a=t("./_stream_duplex"),s=t("core-util-is");s.inherits=t("inherits"),s.inherits(r,a),r.prototype.push=function(t,e){return this._transformState.needTransform=!1,
a.prototype.push.call(this,t,e)},r.prototype._transform=function(){throw new Error("not implemented")},r.prototype._write=function(t,e,n){var i=this._transformState;if(i.writecb=n,i.writechunk=t,i.writeencoding=e,!i.transforming){var r=this._readableState;(i.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},r.prototype._read=function(){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0}},{"./_stream_duplex":143,"core-util-is":58,inherits:71}],147:[function(t,e){(function(n){function i(t,e,n){this.chunk=t,this.encoding=e,this.callback=n}function r(t,e){t=t||{};var n=t.highWaterMark;this.highWaterMark=n||0===n?n:16384,this.objectMode=!!t.objectMode,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var i=t.decodeStrings===!1;this.decodeStrings=!i,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){p(e,t)},this.writecb=null,this.writelen=0,this.buffer=[],this.errorEmitted=!1}function o(e){var n=t("./_stream_duplex");return this instanceof o||this instanceof n?(this._writableState=new r(e,this),this.writable=!0,void x.call(this)):new o(e)}function a(t,e,i){var r=new Error("write after end");t.emit("error",r),n.nextTick(function(){i(r)})}function s(t,e,i,r){var o=!0;if(!_.isBuffer(i)&&"string"!=typeof i&&null!==i&&void 0!==i&&!e.objectMode){var a=new TypeError("Invalid non-string/buffer chunk");t.emit("error",a),n.nextTick(function(){r(a)}),o=!1}return o}function u(t,e,n){return t.objectMode||t.decodeStrings===!1||"string"!=typeof e||(e=new _(e,n)),e}function c(t,e,n,r,o){n=u(e,n,r),_.isBuffer(n)&&(r="buffer");var a=e.objectMode?1:n.length;e.length+=a;var s=e.length<e.highWaterMark;return s||(e.needDrain=!0),e.writing?e.buffer.push(new i(n,r,o)):l(t,e,a,n,r,o),s}function l(t,e,n,i,r,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,t._write(i,r,e.onwrite),e.sync=!1}function h(t,e,i,r,o){i?n.nextTick(function(){o(r)}):o(r),t._writableState.errorEmitted=!0,t.emit("error",r)}function f(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function p(t,e){var i=t._writableState,r=i.sync,o=i.writecb;if(f(i),e)h(t,i,r,e,o);else{var a=y(t,i);a||i.bufferProcessing||!i.buffer.length||g(t,i),r?n.nextTick(function(){d(t,i,a,o)}):d(t,i,a,o)}}function d(t,e,n,i){n||v(t,e),i(),n&&m(t,e)}function v(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function g(t,e){e.bufferProcessing=!0;for(var n=0;n<e.buffer.length;n++){var i=e.buffer[n],r=i.chunk,o=i.encoding,a=i.callback,s=e.objectMode?1:r.length;if(l(t,e,s,r,o,a),e.writing){n++;break}}e.bufferProcessing=!1,n<e.buffer.length?e.buffer=e.buffer.slice(n):e.buffer.length=0}function y(t,e){return e.ending&&0===e.length&&!e.finished&&!e.writing}function m(t,e){var n=y(t,e);return n&&(e.finished=!0,t.emit("finish")),n}function b(t,e,i){e.ending=!0,m(t,e),i&&(e.finished?n.nextTick(i):t.once("finish",i)),e.ended=!0}e.exports=o;var _=t("buffer").Buffer;o.WritableState=r;var w=t("core-util-is");w.inherits=t("inherits");var x=t("stream");w.inherits(o,x),o.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},o.prototype.write=function(t,e,n){var i=this._writableState,r=!1;return"function"==typeof e&&(n=e,e=null),_.isBuffer(t)?e="buffer":e||(e=i.defaultEncoding),"function"!=typeof n&&(n=function(){}),i.ended?a(this,i,n):s(this,i,t,n)&&(r=c(this,i,t,e,n)),r},o.prototype._write=function(t,e,n){n(new Error("not implemented"))},o.prototype.end=function(t,e,n){var i=this._writableState;"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),"undefined"!=typeof t&&null!==t&&this.write(t,e),i.ending||i.finished||b(this,i,n)}}).call(this,t("_process"))},{"./_stream_duplex":143,_process:55,buffer:56,"core-util-is":58,inherits:71,stream:156}],148:[function(t,e){e.exports=t("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":144}],149:[function(t,e,n){(function(i){var r=t("stream");n=e.exports=t("./lib/_stream_readable.js"),n.Stream=r,n.Readable=n,n.Writable=t("./lib/_stream_writable.js"),n.Duplex=t("./lib/_stream_duplex.js"),n.Transform=t("./lib/_stream_transform.js"),n.PassThrough=t("./lib/_stream_passthrough.js"),i.browser||"disable"!==i.env.READABLE_STREAM||(e.exports=t("stream"))}).call(this,t("_process"))},{"./lib/_stream_duplex.js":143,"./lib/_stream_passthrough.js":144,"./lib/_stream_readable.js":145,"./lib/_stream_transform.js":146,"./lib/_stream_writable.js":147,_process:55,stream:156}],150:[function(t,e){e.exports=t("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":146}],151:[function(t,e){e.exports=t("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":147}],152:[function(t,e){function n(t){var e=t.createGain();e.output=t.createGain();var n=t.createGain();e.connect(n);var s=r(n),u=t.createDelay(4),c=e._filter=t.createBiquadFilter(),l=t.createGain(),h=t.createGain(),f=t.createGain();u.connect(n);var p=o(s),d=t.createGain();return d.gain.value=1,p.connect(d),u.delayTime.value=0,d.connect(u.delayTime),e.connect(f),e.connect(u),u.connect(c),c.connect(h),c.connect(l),l.connect(u),f.connect(e.output),h.connect(e.output),e.wet=h.gain,e.wet.value=1,e.dry=f.gain,e.dry.value=1,e.cutoff=c.frequency,e.cutoff.value=2e4,e.feedback=l.gain,e.feedback.value=.6,e.time=p.gain,e.time.value=.25,this._syncing=!1,e._refreshTimeMultiplier=i.bind(e),e._timeMultiplier=d.gain,Object.defineProperties(e,a),e}function i(){this._timeMultiplier.value=this.sync&&this.tempo?60/this.tempo:1}function r(t){var e=t.context.createWaveShaper();return e.curve=s,t.connect(e),e}function o(t){var e=t.context.createGain();return t.connect(e),e}e.exports=n;var a={sync:{get:function(){return this._sync},set:function(t){this._sync=t,this._refreshTimeMultiplier()}},tempo:{get:function(){return this._tempo},set:function(t){this._tempo=t,this._refreshTimeMultiplier()}},filterType:{get:function(){return this._filter.type},set:function(t){this._filter.type=t}},connect:{value:function(){this.output.connect.apply(this.output,arguments)}},disconnect:{value:function(){this.output.disconnect.apply(this.output,arguments)}}},s=new Float32Array([1,1])},{}],153:[function(t,e){function n(t){var e=t.createGain(),n=i(e);e.output=t.createGain();var s=t.createGain();s.gain.value=0;var u=t.createGain();u.gain.value=1;var c=t.createBiquadFilter();c.frequency.value=800;var l=t.createWaveShaper(),h=t.createBiquadFilter();h.frequency.value=3e3;var f=r(n);f.gain.value=.5,f.connect(s.gain);var p=t.createGain();p.gain.value=-1,f.connect(p),p.connect(u.gain),e.connect(s),e.connect(u),s.connect(c),u.connect(l),c.connect(l),l.connect(h),h.connect(e.output),e.preBand=f.gain,e.color=c.frequency,e.postCut=h.frequency,e.connect=o,e.disconnect=a;for(var d=22050,v=new Float32Array(d),g=Math.PI/180,y=0;d>y;y++){var m=2*y/d-1;v[y]=13*m*20*g/(Math.PI+10*Math.abs(m))}return l.curve=v,e}function i(t){var e=t.context.createWaveShaper();return e.curve=s,t.connect(e),e}function r(t){var e=t.context.createGain();return t.connect(e),e}function o(){this.output.connect.apply(this.output,arguments)}function a(){this.output.disconnect.apply(this.output,arguments)}e.exports=n;var s=new Float32Array([1,1])},{}],154:[function(t,e){function n(t,e,n,u){s+=1;var c=a[s]={id:s,cb:u,length:t,decay:e,reverse:n,impulseL:new Float32Array(t),impulseR:new Float32Array(t)};return o.push([c.id,0,Math.min(r,t)]),setTimeout(i,1),s}function i(){var t=o.shift();if(t){var e=a[t[0]];if(e){for(var n=e.length,s=e.decay,u=e.reverse,c=t[1],l=t[2],h=e.impulseL,f=e.impulseR,p=c;l>p;p++){var d=u?n-p:p;h[p]=(2*Math.random()-1)*Math.pow(1-d/n,s),f[p]=(2*Math.random()-1)*Math.pow(1-d/n,s)}l>=n-1?(delete a[t[0]],e.cb([e.impulseL,e.impulseR])):o.push([e.id,l,Math.min(l+r,n)])}}o.length&&setTimeout(i,5)}e.exports=n;var r=2048,o=[],a={},s=0;n.cancel=function(t){return a[t]?(delete a[t],!0):!1}},{}],155:[function(t,e){function n(t){var e=t.createGain(),n=e._dry=t.createGain(),i=e._wet=t.createGain(),o=e.output=t.createGain(),a=e._convolver=t.createConvolver(),s=e._filter=t.createBiquadFilter();return e.connect(n),e.connect(i),a.connect(s),n.connect(o),i.connect(a),s.connect(o),Object.defineProperties(e,r),e._time=3,e._decay=2,e._reverse=!1,e.cutoff.value=2e4,e.filterType="lowpass",e._building=!1,e._buildImpulse(),e}var i=t("./build-impulse");e.exports=n;var r={connect:{value:function(){this.output.connect.apply(this.output,arguments)}},disconnect:{value:function(){this.output.disconnect.apply(this.output,arguments)}},wet:{get:function(){return this._wet.gain}},dry:{get:function(){return this._dry.gain}},cutoff:{get:function(){return this._filter.frequency}},filterType:{get:function(){return this._filter.type},set:function(t){this._filter.type=t}},_buildImpulse:{value:function(){var t=this,e=t.context.sampleRate,n=Math.max(e*t.time,1);t._building&&i.cancel(t._building),t._building=i(n,t.decay,t.reverse,function(i){var r=t.context.createBuffer(2,n,e);r.getChannelData(0).set(i[0]),r.getChannelData(1).set(i[1]),t._convolver.buffer=r,t._building=!1})}},time:{enumerable:!0,get:function(){return this._time},set:function(t){this._time=t,this._buildImpulse()}},decay:{enumerable:!0,get:function(){return this._decay},set:function(t){this._decay=t,this._buildImpulse()}},reverse:{enumerable:!0,get:function(){return this._reverse},set:function(t){this._reverse=t,this._buildImpulse()}}}},{"./build-impulse":154}],156:[function(t,e){function n(){i.call(this)}e.exports=n;var i=t("events").EventEmitter,r=t("inherits");r(n,i),n.Readable=t("readable-stream/readable.js"),n.Writable=t("readable-stream/writable.js"),n.Duplex=t("readable-stream/duplex.js"),n.Transform=t("readable-stream/transform.js"),n.PassThrough=t("readable-stream/passthrough.js"),n.Stream=n,n.prototype.pipe=function(t,e){function n(e){t.writable&&!1===t.write(e)&&c.pause&&c.pause()}function r(){c.readable&&c.resume&&c.resume()}function o(){l||(l=!0,t.end())}function a(){l||(l=!0,"function"==typeof t.destroy&&t.destroy())}function s(t){if(u(),0===i.listenerCount(this,"error"))throw t}function u(){c.removeListener("data",n),t.removeListener("drain",r),c.removeListener("end",o),c.removeListener("close",a),c.removeListener("error",s),t.removeListener("error",s),c.removeListener("end",u),c.removeListener("close",u),t.removeListener("close",u)}var c=this;c.on("data",n),t.on("drain",r),t._isStdio||e&&e.end===!1||(c.on("end",o),c.on("close",a));var l=!1;return c.on("error",s),t.on("error",s),c.on("end",u),c.on("close",u),t.on("close",u),t.emit("pipe",c),t}},{events:66,inherits:71,"readable-stream/duplex.js":142,"readable-stream/passthrough.js":148,"readable-stream/readable.js":149,"readable-stream/transform.js":150,"readable-stream/writable.js":151}],157:[function(t,e,n){function i(t){if(t&&!u(t))throw new Error("Unknown encoding: "+t)}function r(t){return t.toString(this.encoding)}function o(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function a(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}var s=t("buffer").Buffer,u=s.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},c=n.StringDecoder=function(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),i(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=a;break;default:return void(this.write=r)}this.charBuffer=new s(6),this.charReceived=0,this.charLength=0};c.prototype.write=function(t){for(var e="";this.charLength;){var n=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";t=t.slice(n,t.length),e=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var i=e.charCodeAt(e.length-1);if(!(i>=55296&&56319>=i)){if(this.charReceived=this.charLength=0,0===t.length)return e;break}this.charLength+=this.surrogateSize,e=""}this.detectIncompleteChar(t);var r=t.length;this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,r),r-=this.charReceived),e+=t.toString(this.encoding,0,r);var r=e.length-1,i=e.charCodeAt(r);if(i>=55296&&56319>=i){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),t.copy(this.charBuffer,0,0,o),e.substring(0,r)}return e},c.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var n=t[t.length-e];if(1==e&&n>>5==6){this.charLength=2;break}if(2>=e&&n>>4==14){this.charLength=3;break}if(3>=e&&n>>3==30){this.charLength=4;break}}this.charReceived=e},c.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var n=this.charReceived,i=this.charBuffer,r=this.encoding;e+=i.slice(0,n).toString(r)}return e}},{buffer:56}],158:[function(t,e){!function(t){function n(){return i}function i(e){if(!(this instanceof i))return new i(e);if(t.AudioContext||(t.AudioContext=t.webkitAudioContext),e||(console.log("tuna.js: Missing audio context! Creating a new context for you."),e=t.AudioContext&&new t.AudioContext),!e)throw new Error("Tuna cannot initialize because this environment does not support web audio.");r(e),l=e,h=this}function r(t){function e(){var t=Array.prototype.shift.apply(arguments);return t=p.isPrototypeOf?p.isPrototypeOf(t)?t.input:t:t.input||t,arguments=Array.prototype.slice.call(arguments),arguments.unshift(t),r.apply(this,arguments),t}if(t.__connectified__!==!0){var n=t.createGain(),i=Object.getPrototypeOf(Object.getPrototypeOf(n)),r=i.connect;i.connect=e,t.__connectified__=!0}}function o(t){return Math.max(0,Math.round(100*Math.pow(2,t/6))/100)}function a(t,e){var n,i,r=0,o=0,a=0,s=0;return n=t.toExponential().match(/^.\.?(.*)e(.+)$/),r=parseInt(n[2],10)-(n[1]+"").length,n=e.toExponential().match(/^.\.?(.*)e(.+)$/),o=parseInt(n[2],10)-(n[1]+"").length,o>r&&(r=o),i=t%e,-100>r||r>20?(a=Math.round(Math.log(i)/Math.log(10)),s=Math.pow(10,a),(i/s).toFixed(a-r)*s):parseFloat(i.toFixed(-r))}function s(t){return 0===t?1:Math.abs(t)/t}function u(t){return(Math.exp(t)-Math.exp(-t))/(Math.exp(t)+Math.exp(-t))}function c(t,e){return void 0===t?e:t}var l,h,f=function(t,e){t.value=e},p=Object.create(null,{activate:{writable:!0,value:function(t){t?(this.input.disconnect(),this.input.connect(this.activateNode),this.activateCallback&&this.activateCallback(t)):(this.input.disconnect(),this.input.connect(this.output))}},bypass:{get:function(){return this._bypass},set:function(t){this._lastBypassValue!==t&&(this._bypass=t,this.activate(!t),this._lastBypassValue=t)}},connect:{value:function(t){this.output.connect(t)}},disconnect:{value:function(t){this.output.disconnect(t)}},connectInOrder:{value:function(t){for(var e=t.length-1;e--;){if(!t[e].connect)return console.error("AudioNode.connectInOrder: TypeError: Not an AudioNode.",t[e]);t[e].connect(t[e+1].input?t[e+1].input:t[e+1])}}},getDefaults:{value:function(){var t={};for(var e in this.defaults)t[e]=this.defaults[e].value;return t}},automate:{value:function(t,e,n,i){var r,o=i?~~(i/1e3):l.currentTime,a=n?~~(n/1e3):0,s=this.defaults[t],u=this[t];u?s.automatable?(n?(r="linearRampToValueAtTime",u.cancelScheduledValues(o),u.setValueAtTime(u.value,o)):r="setValueAtTime",u[r](e,a+o)):u=e:console.error("Invalid Property for "+this.name)}}}),d="float",v="boolean",g="string",y="int";"undefined"!=typeof e&&e.exports?e.exports=i:"function"==typeof define?t.define("Tuna",n):t.Tuna=i,i.prototype.Bitcrusher=function(t){t||(t=this.getDefaults()),this.bufferSize=t.bufferSize||this.defaults.bufferSize.value,this.input=l.createGain(),this.activateNode=l.createGain(),this.processor=l.createScriptProcessor(this.bufferSize,1,1),this.output=l.createGain(),this.activateNode.connect(this.processor),this.processor.connect(this.output);var e,n,i,r,o,a=0,s=0;this.processor.onaudioprocess=function(t){for(e=t.inputBuffer.getChannelData(0),n=t.outputBuffer.getChannelData(0),i=Math.pow(.5,this.bits),o=e.length,r=0;o>r;r++)a+=this.normfreq,a>=1&&(a-=1,s=i*Math.floor(e[r]/i+.5)),n[r]=s},this.bits=t.bits||this.defaults.bits.value,this.normfreq=c(t.normfreq,this.defaults.normfreq.value),this.bypass=t.bypass||!1},i.prototype.Bitcrusher.prototype=Object.create(p,{name:{value:"Bitcrusher"},defaults:{writable:!0,value:{bits:{value:4,min:1,max:16,automatable:!1,type:y},bufferSize:{value:4096,min:256,max:16384,automatable:!1,type:y},bypass:{value:!0,automatable:!1,type:v},normfreq:{value:.1,min:1e-4,max:1,automatable:!1,type:d}}},bits:{enumerable:!0,get:function(){return this.processor.bits},set:function(t){this.processor.bits=t}},normfreq:{enumerable:!0,get:function(){return this.processor.normfreq},set:function(t){this.processor.normfreq=t}}}),i.prototype.Cabinet=function(t){t||(t=this.getDefaults()),this.input=l.createGain(),this.activateNode=l.createGain(),this.convolver=this.newConvolver(t.impulsePath||"../impulses/impulse_guitar.wav"),this.makeupNode=l.createGain(),this.output=l.createGain(),this.activateNode.connect(this.convolver.input),this.convolver.output.connect(this.makeupNode),this.makeupNode.connect(this.output),this.makeupGain=c(t.makeupGain,this.defaults.makeupGain),this.bypass=t.bypass||!1},i.prototype.Cabinet.prototype=Object.create(p,{name:{value:"Cabinet"},defaults:{writable:!0,value:{makeupGain:{value:1,min:0,max:20,automatable:!0,type:d},bypass:{value:!1,automatable:!1,type:v}}},makeupGain:{enumerable:!0,get:function(){return this.makeupNode.gain},set:function(t){this.makeupNode.gain.value=t}},newConvolver:{value:function(t){return new h.Convolver({impulse:t,dryLevel:0,wetLevel:1})}}}),i.prototype.Chorus=function(t){t||(t=this.getDefaults()),this.input=l.createGain(),this.attenuator=this.activateNode=l.createGain(),this.splitter=l.createChannelSplitter(2),this.delayL=l.createDelay(),this.delayR=l.createDelay(),this.feedbackGainNodeLR=l.createGain(),this.feedbackGainNodeRL=l.createGain(),this.merger=l.createChannelMerger(2),this.output=l.createGain(),this.lfoL=new h.LFO({target:this.delayL.delayTime,callback:f}),this.lfoR=new h.LFO({target:this.delayR.delayTime,callback:f}),this.input.connect(this.attenuator),this.attenuator.connect(this.output),this.attenuator.connect(this.splitter),this.splitter.connect(this.delayL,0),this.splitter.connect(this.delayR,1),this.delayL.connect(this.feedbackGainNodeLR),this.delayR.connect(this.feedbackGainNodeRL),this.feedbackGainNodeLR.connect(this.delayR),this.feedbackGainNodeRL.connect(this.delayL),this.delayL.connect(this.merger,0,0),this.delayR.connect(this.merger,0,1),this.merger.connect(this.output),this.feedback=c(t.feedback,this.defaults.feedback.value),this.rate=c(t.rate,this.defaults.rate.value),this.delay=c(t.delay,this.defaults.delay.value),this.depth=c(t.depth,this.defaults.depth.value),this.lfoR.phase=Math.PI/2,this.attenuator.gain.value=.6934,this.lfoL.activate(!0),this.lfoR.activate(!0),this.bypass=t.bypass||!1},i.prototype.Chorus.prototype=Object.create(p,{name:{value:"Chorus"},defaults:{writable:!0,value:{feedback:{value:.4,min:0,max:.95,automatable:!1,type:d},delay:{value:.0045,min:0,max:1,automatable:!1,type:d},depth:{value:.7,min:0,max:1,automatable:!1,type:d},rate:{value:1.5,min:0,max:8,automatable:!1,type:d},bypass:{value:!0,automatable:!1,type:v}}},delay:{enumerable:!0,get:function(){return this._delay},set:function(t){this._delay=4e-4*Math.pow(10,t),this.lfoL.offset=this._delay,this.lfoR.offset=this._delay,this._depth=this._depth}},depth:{enumerable:!0,get:function(){return this._depth},set:function(t){this._depth=t,this.lfoL.oscillation=this._depth*this._delay,this.lfoR.oscillation=this._depth*this._delay}},feedback:{enumerable:!0,get:function(){return this._feedback},set:function(t){this._feedback=t,this.feedbackGainNodeLR.gain.value=this._feedback,this.feedbackGainNodeRL.gain.value=this._feedback}},rate:{enumerable:!0,get:function(){return this._rate},set:function(t){this._rate=t,this.lfoL.frequency=this._rate,this.lfoR.frequency=this._rate}}}),i.prototype.Compressor=function(t){t||(t=this.getDefaults()),this.input=l.createGain(),this.compNode=this.activateNode=l.createDynamicsCompressor(),this.makeupNode=l.createGain(),this.output=l.createGain(),this.compNode.connect(this.makeupNode),this.makeupNode.connect(this.output),this.automakeup=c(t.automakeup,this.defaults.automakeup.value),this.makeupGain=t.makeupGain||this.defaults.makeupGain.value,this.threshold=c(t.threshold,this.defaults.threshold.value),this.release=t.release||this.defaults.release.value,this.attack=c(t.attack,this.defaults.attack.value),this.ratio=t.ratio||this.defaults.ratio.value,this.knee=c(t.knee,this.defaults.knee.value),this.bypass=t.bypass||!1},i.prototype.Compressor.prototype=Object.create(p,{name:{value:"Compressor"},defaults:{writable:!0,value:{threshold:{value:-20,min:-60,max:0,automatable:!0,type:d},release:{value:250,min:10,max:2e3,automatable:!0,type:d},makeupGain:{value:1,min:1,max:100,automatable:!0,type:d},attack:{value:1,min:0,max:1e3,automatable:!0,type:d},ratio:{value:4,min:1,max:50,automatable:!0,type:d},knee:{value:5,min:0,max:40,automatable:!0,type:d},automakeup:{value:!1,automatable:!1,type:v},bypass:{value:!0,automatable:!1,type:v}}},computeMakeup:{value:function(){var t=4,e=this.compNode;return-(e.threshold.value-e.threshold.value/e.ratio.value)/t}},automakeup:{enumerable:!0,get:function(){return this._automakeup},set:function(t){this._automakeup=t,this._automakeup&&(this.makeupGain=this.computeMakeup())}},threshold:{enumerable:!0,get:function(){return this.compNode.threshold},set:function(t){this.compNode.threshold.value=t,this._automakeup&&(this.makeupGain=this.computeMakeup())}},ratio:{enumerable:!0,get:function(){return this.compNode.ratio},set:function(t){this.compNode.ratio.value=t,this._automakeup&&(this.makeupGain=this.computeMakeup())}},knee:{enumerable:!0,get:function(){return this.compNode.knee},set:function(t){this.compNode.knee.value=t,this._automakeup&&(this.makeupGain=this.computeMakeup())}},attack:{enumerable:!0,get:function(){return this.compNode.attack},set:function(t){this.compNode.attack.value=t/1e3}},release:{enumerable:!0,get:function(){return this.compNode.release},set:function(t){this.compNode.release=t/1e3}},makeupGain:{enumerable:!0,get:function(){return this.makeupNode.gain},set:function(t){this.makeupNode.gain.value=o(t)}}}),i.prototype.Convolver=function(t){t||(t=this.getDefaults()),this.input=l.createGain(),this.activateNode=l.createGain(),this.convolver=l.createConvolver(),this.dry=l.createGain(),this.filterLow=l.createBiquadFilter(),this.filterHigh=l.createBiquadFilter(),this.wet=l.createGain(),this.output=l.createGain(),this.activateNode.connect(this.filterLow),this.activateNode.connect(this.dry),this.filterLow.connect(this.filterHigh),this.filterHigh.connect(this.convolver),this.convolver.connect(this.wet),this.wet.connect(this.output),this.dry.connect(this.output),this.dryLevel=c(t.dryLevel,this.defaults.dryLevel.value),this.wetLevel=c(t.wetLevel,this.defaults.wetLevel.value),this.highCut=t.highCut||this.defaults.highCut.value,this.buffer=t.impulse||"../impulses/ir_rev_short.wav",this.lowCut=t.lowCut||this.defaults.lowCut.value,this.level=c(t.level,this.defaults.level.value),this.filterHigh.type="lowpass",this.filterLow.type="highpass",this.bypass=t.bypass||!1},i.prototype.Convolver.prototype=Object.create(p,{name:{value:"Convolver"},defaults:{writable:!0,value:{highCut:{value:22050,min:20,max:22050,automatable:!0,type:d},lowCut:{value:20,min:20,max:22050,automatable:!0,type:d},dryLevel:{value:1,min:0,max:1,automatable:!0,type:d},wetLevel:{value:1,min:0,max:1,automatable:!0,type:d},level:{value:1,min:0,max:1,automatable:!0,type:d}}},lowCut:{get:function(){return this.filterLow.frequency},set:function(t){this.filterLow.frequency.value=t}},highCut:{get:function(){return this.filterHigh.frequency},set:function(t){this.filterHigh.frequency.value=t}},level:{get:function(){return this.output.gain},set:function(t){this.output.gain.value=t}},dryLevel:{get:function(){return this.dry.gain},set:function(t){this.dry.gain.value=t}},wetLevel:{get:function(){return this.wet.gain},set:function(t){this.wet.gain.value=t}},buffer:{enumerable:!1,get:function(){return this.convolver.buffer},set:function(t){var e=this.convolver,n=new XMLHttpRequest;return t?(n.open("GET",t,!0),n.responseType="arraybuffer",n.onreadystatechange=function(){4===n.readyState&&(n.status<300&&n.status>199||302===n.status)&&l.decodeAudioData(n.response,function(t){e.buffer=t},function(t){t&&console.log("Tuna.Convolver.setBuffer: Error decoding data"+t)})},void n.send(null)):void console.log("Tuna.Convolver.setBuffer: Missing impulse path!")}}}),i.prototype.Delay=function(t){t||(t=this.getDefaults()),this.input=l.createGain(),this.activateNode=l.createGain(),this.dry=l.createGain(),this.wet=l.createGain(),this.filter=l.createBiquadFilter(),this.delay=l.createDelay(),this.feedbackNode=l.createGain(),this.output=l.createGain(),this.activateNode.connect(this.delay),this.activateNode.connect(this.dry),this.delay.connect(this.filter),this.filter.connect(this.feedbackNode),this.feedbackNode.connect(this.delay),this.feedbackNode.connect(this.wet),this.wet.connect(this.output),this.dry.connect(this.output),this.delayTime=t.delayTime||this.defaults.delayTime.value,this.feedback=c(t.feedback,this.defaults.feedback.value),this.wetLevel=c(t.wetLevel,this.defaults.wetLevel.value),this.dryLevel=c(t.dryLevel,this.defaults.dryLevel.value),this.cutoff=t.cutoff||this.defaults.cutoff.value,this.filter.type="lowpass",this.bypass=t.bypass||!1},i.prototype.Delay.prototype=Object.create(p,{name:{value:"Delay"},defaults:{writable:!0,value:{delayTime:{value:100,min:20,max:1e3,automatable:!1,type:d},feedback:{value:.45,min:0,max:.9,automatable:!0,type:d},cutoff:{value:2e4,min:20,max:2e4,automatable:!0,type:d},wetLevel:{value:.5,min:0,max:1,automatable:!0,type:d},dryLevel:{value:1,min:0,max:1,automatable:!0,type:d}}},delayTime:{enumerable:!0,get:function(){return this.delay.delayTime},set:function(t){this.delay.delayTime.value=t/1e3}},wetLevel:{enumerable:!0,get:function(){return this.wet.gain},set:function(t){this.wet.gain.value=t}},dryLevel:{enumerable:!0,get:function(){return this.dry.gain},set:function(t){this.dry.gain.value=t}},feedback:{enumerable:!0,get:function(){return this.feedbackNode.gain},set:function(t){this.feedbackNode.gain.value=t}},cutoff:{enumerable:!0,get:function(){return this.filter.frequency},set:function(t){this.filter.frequency.value=t}}}),i.prototype.Filter=function(t){t||(t=this.getDefaults()),this.input=l.createGain(),this.activateNode=l.createGain(),this.filter=l.createBiquadFilter(),this.output=l.createGain(),this.activateNode.connect(this.filter),this.filter.connect(this.output),this.frequency=t.frequency||this.defaults.frequency.value,this.Q=t.resonance||this.defaults.Q.value,this.filterType=c(t.filterType,this.defaults.filterType.value),this.gain=c(t.gain,this.defaults.gain.value),this.bypass=t.bypass||!1},i.prototype.Filter.prototype=Object.create(p,{name:{value:"Filter"},defaults:{writable:!0,value:{frequency:{value:800,min:20,max:22050,automatable:!0,type:d},Q:{value:1,min:.001,max:100,automatable:!0,type:d},gain:{value:0,min:-40,max:40,automatable:!0,type:d},bypass:{value:!0,automatable:!1,type:v},filterType:{value:"lowpass",automatable:!1,type:g}}},filterType:{enumerable:!0,get:function(){return this.filter.type},set:function(t){this.filter.type=t}},Q:{enumerable:!0,get:function(){return this.filter.Q},set:function(t){this.filter.Q.value=t}},gain:{enumerable:!0,get:function(){return this.filter.gain},set:function(t){this.filter.gain.value=t}},frequency:{enumerable:!0,get:function(){return this.filter.frequency},set:function(t){this.filter.frequency.value=t}}}),i.prototype.MoogFilter=function(t){t||(t=this.getDefaults()),this.bufferSize=t.bufferSize||this.defaults.bufferSize.value,this.input=l.createGain(),this.activateNode=l.createGain(),this.processor=l.createScriptProcessor(this.bufferSize,1,1),this.output=l.createGain(),this.activateNode.connect(this.processor),this.processor.connect(this.output);var e,n,i,r,o,a,s,u;e=n=i=r=o=a=s=u=0;var h,f,p,d,v,g;this.processor.onaudioprocess=function(t){for(h=t.inputBuffer.getChannelData(0),f=t.outputBuffer.getChannelData(0),p=1.16*this.cutoff,inputFactor=.35013*p*p*p*p,d=this.resonance*(1-.15*p*p),g=h.length,v=0;g>v;v++)h[v]-=u*d,h[v]*=inputFactor,o=h[v]+.3*e+(1-p)*o,e=h[v],a=o+.3*n+(1-p)*a,n=o,s=a+.3*i+(1-p)*s,i=a,u=s+.3*r+(1-p)*u,r=s,f[v]=u},this.cutoff=c(t.cutoff,this.defaults.cutoff.value),this.resonance=c(t.resonance,this.defaults.resonance.value),this.bypass=t.bypass||!1},i.prototype.MoogFilter.prototype=Object.create(p,{name:{value:"MoogFilter"},defaults:{writable:!0,value:{bufferSize:{value:4096,min:256,max:16384,automatable:!1,type:y},bypass:{value:!1,automatable:!1,type:v},cutoff:{value:.065,min:1e-4,max:1,automatable:!1,type:d},resonance:{value:3.5,min:0,max:4,automatable:!1,type:d}}},cutoff:{enumerable:!0,get:function(){return this.processor.cutoff},set:function(t){this.processor.cutoff=t}},resonance:{enumerable:!0,get:function(){return this.processor.resonance},set:function(t){this.processor.resonance=t}}}),i.prototype.Overdrive=function(t){t||(t=this.getDefaults()),this.input=l.createGain(),this.activateNode=l.createGain(),this.inputDrive=l.createGain(),this.waveshaper=l.createWaveShaper(),this.outputDrive=l.createGain(),this.output=l.createGain(),this.activateNode.connect(this.inputDrive),this.inputDrive.connect(this.waveshaper),this.waveshaper.connect(this.outputDrive),this.outputDrive.connect(this.output),this.ws_table=new Float32Array(this.k_nSamples),this.drive=c(t.drive,this.defaults.drive.value),this.outputGain=c(t.outputGain,this.defaults.outputGain.value),this.curveAmount=c(t.curveAmount,this.defaults.curveAmount.value),this.algorithmIndex=c(t.algorithmIndex,this.defaults.algorithmIndex.value),this.bypass=t.bypass||!1},i.prototype.Overdrive.prototype=Object.create(p,{name:{value:"Overdrive"},defaults:{writable:!0,value:{drive:{value:1,min:0,max:1,automatable:!0,type:d,scaled:!0},outputGain:{value:1,min:0,max:1,automatable:!0,type:d,scaled:!0},curveAmount:{value:.725,min:0,max:1,automatable:!1,type:d},algorithmIndex:{value:0,min:0,max:5,automatable:!1,type:y}}},k_nSamples:{value:8192},drive:{get:function(){return this.inputDrive.gain},set:function(t){this._drive=t}},curveAmount:{get:function(){return this._curveAmount},set:function(t){this._curveAmount=t,void 0===this._algorithmIndex&&(this._algorithmIndex=0),this.waveshaperAlgorithms[this._algorithmIndex](this._curveAmount,this.k_nSamples,this.ws_table),this.waveshaper.curve=this.ws_table}},outputGain:{get:function(){return this.outputDrive.gain},set:function(t){this._outputGain=o(t)}},algorithmIndex:{get:function(){return this._algorithmIndex},set:function(t){this._algorithmIndex=t,this.curveAmount=this._curveAmount}},waveshaperAlgorithms:{value:[function(t,e,n){t=Math.min(t,.9999);var i,r,o=2*t/(1-t);for(i=0;e>i;i++)r=2*i/e-1,n[i]=(1+o)*r/(1+o*Math.abs(r))},function(t,e,n){var i,r,o;for(i=0;e>i;i++)r=2*i/e-1,o=(.5*Math.pow(r+1.4,2)-1)*o>=0?5.8:1.2,n[i]=u(o)},function(t,e,n){var i,r,o,a=1-t;for(i=0;e>i;i++)r=2*i/e-1,o=0>r?-Math.pow(Math.abs(r),a+.04):Math.pow(r,a),n[i]=u(2*o)},function(t,e,n){var i,r,o,a,u=1-t>.99?.99:1-t;for(i=0;e>i;i++)r=2*i/e-1,a=Math.abs(r),u>a?o=a:a>u?o=u+(a-u)/(1+Math.pow((a-u)/(1-u),2)):a>1&&(o=a),n[i]=s(r)*o*(1/((u+1)/2))},function(t,e,n){var i,r;for(i=0;e>i;i++)r=2*i/e-1,n[i]=-.08905>r?-3/4*(1-Math.pow(1-(Math.abs(r)-.032857),12)+1/3*(Math.abs(r)-.032847))+.01:r>=-.08905&&.320018>r?-6.153*r*r+3.9375*r:.630035},function(t,e,n){var i,r,o=2+Math.round(14*t),a=Math.round(Math.pow(2,o-1));

for(i=0;e>i;i++)r=2*i/e-1,n[i]=Math.round(r*a)/a}]}}),i.prototype.Phaser=function(t){t||(t=this.getDefaults()),this.input=l.createGain(),this.splitter=this.activateNode=l.createChannelSplitter(2),this.filtersL=[],this.filtersR=[],this.feedbackGainNodeL=l.createGain(),this.feedbackGainNodeR=l.createGain(),this.merger=l.createChannelMerger(2),this.filteredSignal=l.createGain(),this.output=l.createGain(),this.lfoL=new h.LFO({target:this.filtersL,callback:this.callback}),this.lfoR=new h.LFO({target:this.filtersR,callback:this.callback});for(var e=this.stage;e--;)this.filtersL[e]=l.createBiquadFilter(),this.filtersR[e]=l.createBiquadFilter(),this.filtersL[e].type="allpass",this.filtersR[e].type="allpass";this.input.connect(this.splitter),this.input.connect(this.output),this.splitter.connect(this.filtersL[0],0,0),this.splitter.connect(this.filtersR[0],1,0),this.connectInOrder(this.filtersL),this.connectInOrder(this.filtersR),this.filtersL[this.stage-1].connect(this.feedbackGainNodeL),this.filtersL[this.stage-1].connect(this.merger,0,0),this.filtersR[this.stage-1].connect(this.feedbackGainNodeR),this.filtersR[this.stage-1].connect(this.merger,0,1),this.feedbackGainNodeL.connect(this.filtersL[0]),this.feedbackGainNodeR.connect(this.filtersR[0]),this.merger.connect(this.output),this.rate=c(t.rate,this.defaults.rate.value),this.baseModulationFrequency=t.baseModulationFrequency||this.defaults.baseModulationFrequency.value,this.depth=c(t.depth,this.defaults.depth.value),this.feedback=c(t.feedback,this.defaults.feedback.value),this.stereoPhase=c(t.stereoPhase,this.defaults.stereoPhase.value),this.lfoL.activate(!0),this.lfoR.activate(!0),this.bypass=t.bypass||!1},i.prototype.Phaser.prototype=Object.create(p,{name:{value:"Phaser"},stage:{value:4},defaults:{writable:!0,value:{rate:{value:.1,min:0,max:8,automatable:!1,type:d},depth:{value:.6,min:0,max:1,automatable:!1,type:d},feedback:{value:.7,min:0,max:1,automatable:!1,type:d},stereoPhase:{value:40,min:0,max:180,automatable:!1,type:d},baseModulationFrequency:{value:700,min:500,max:1500,automatable:!1,type:d}}},callback:{value:function(t,e){for(var n=0;4>n;n++)t[n].frequency.value=e}},depth:{get:function(){return this._depth},set:function(t){this._depth=t,this.lfoL.oscillation=this._baseModulationFrequency*this._depth,this.lfoR.oscillation=this._baseModulationFrequency*this._depth}},rate:{get:function(){return this._rate},set:function(t){this._rate=t,this.lfoL.frequency=this._rate,this.lfoR.frequency=this._rate}},baseModulationFrequency:{enumerable:!0,get:function(){return this._baseModulationFrequency},set:function(t){this._baseModulationFrequency=t,this.lfoL.offset=this._baseModulationFrequency,this.lfoR.offset=this._baseModulationFrequency,this._depth=this._depth}},feedback:{get:function(){return this._feedback},set:function(t){this._feedback=t,this.feedbackGainNodeL.gain.value=this._feedback,this.feedbackGainNodeR.gain.value=this._feedback}},stereoPhase:{get:function(){return this._stereoPhase},set:function(t){this._stereoPhase=t;var e=this.lfoL._phase+this._stereoPhase*Math.PI/180;e=a(e,2*Math.PI),this.lfoR._phase=e}}}),i.prototype.PingPongDelay=function(t){t||(t=this.getDefaults()),this.input=l.createGain(),this.wetLevel=l.createGain(),this.stereoToMonoMix=l.createGain(),this.feedbackLevel=l.createGain(),this.output=l.createGain(),this.delayLeft=l.createDelay(),this.delayRight=l.createDelay(),this.activateNode=l.createGain(),this.splitter=l.createChannelSplitter(2),this.merger=l.createChannelMerger(2),this.activateNode.connect(this.splitter),this.splitter.connect(this.stereoToMonoMix,0,0),this.splitter.connect(this.stereoToMonoMix,1,0),this.stereoToMonoMix.gain.value=.5,this.stereoToMonoMix.connect(this.wetLevel),this.wetLevel.connect(this.delayLeft),this.feedbackLevel.connect(this.delayLeft),this.delayLeft.connect(this.delayRight),this.delayRight.connect(this.feedbackLevel),this.delayLeft.connect(this.merger,0,0),this.delayRight.connect(this.merger,0,1),this.merger.connect(this.output),this.activateNode.connect(this.output),this.delayTimeLeft=void 0!==t.delayTimeLeft?t.delayTimeLeft:this.defaults.delayTimeLeft.value,this.delayTimeRight=void 0!==t.delayTimeRight?t.delayTimeRight:this.defaults.delayTimeRight.value,this.feedbackLevel.gain.value=void 0!==t.feedback?t.feedback:this.defaults.feedback.value,this.wetLevel.gain.value=void 0!==t.wetLevel?t.wetLevel:this.defaults.wetLevel.value,this.bypass=t.bypass||!1},i.prototype.PingPongDelay.prototype=Object.create(p,{name:{value:"PingPongDelay"},delayTimeLeft:{enumerable:!0,get:function(){return this._delayTimeLeft},set:function(t){this._delayTimeLeft=t,this.delayLeft.delayTime.value=t/1e3}},delayTimeRight:{enumerable:!0,get:function(){return this._delayTimeRight},set:function(t){this._delayTimeRight=t,this.delayRight.delayTime.value=t/1e3}},defaults:{writable:!0,value:{delayTimeLeft:{value:200,min:1,max:1e4,automatable:!1,type:y},delayTimeRight:{value:400,min:1,max:1e4,automatable:!1,type:y},feedback:{value:.3,min:0,max:1,automatable:!1,type:d},wetLevel:{value:.5,min:0,max:1,automatable:!1,type:d}}}}),i.prototype.Tremolo=function(t){t||(t=this.getDefaults()),this.input=l.createGain(),this.splitter=this.activateNode=l.createChannelSplitter(2),this.amplitudeL=l.createGain(),this.amplitudeR=l.createGain(),this.merger=l.createChannelMerger(2),this.output=l.createGain(),this.lfoL=new h.LFO({target:this.amplitudeL.gain,callback:f}),this.lfoR=new h.LFO({target:this.amplitudeR.gain,callback:f}),this.input.connect(this.splitter),this.splitter.connect(this.amplitudeL,0),this.splitter.connect(this.amplitudeR,1),this.amplitudeL.connect(this.merger,0,0),this.amplitudeR.connect(this.merger,0,1),this.merger.connect(this.output),this.rate=t.rate||this.defaults.rate.value,this.intensity=c(t.intensity,this.defaults.intensity.value),this.stereoPhase=c(t.stereoPhase,this.defaults.stereoPhase.value),this.lfoL.offset=1-this.intensity/2,this.lfoR.offset=1-this.intensity/2,this.lfoL.phase=this.stereoPhase*Math.PI/180,this.lfoL.activate(!0),this.lfoR.activate(!0),this.bypass=t.bypass||!1},i.prototype.Tremolo.prototype=Object.create(p,{name:{value:"Tremolo"},defaults:{writable:!0,value:{intensity:{value:.3,min:0,max:1,automatable:!1,type:d},stereoPhase:{value:0,min:0,max:180,automatable:!1,type:d},rate:{value:5,min:.1,max:11,automatable:!1,type:d}}},intensity:{enumerable:!0,get:function(){return this._intensity},set:function(t){this._intensity=t,this.lfoL.offset=1-this._intensity/2,this.lfoR.offset=1-this._intensity/2,this.lfoL.oscillation=this._intensity,this.lfoR.oscillation=this._intensity}},rate:{enumerable:!0,get:function(){return this._rate},set:function(t){this._rate=t,this.lfoL.frequency=this._rate,this.lfoR.frequency=this._rate}},stereoPhase:{enumerable:!0,get:function(){return this._rate},set:function(t){this._stereoPhase=t;var e=this.lfoL._phase+this._stereoPhase*Math.PI/180;e=a(e,2*Math.PI),this.lfoR.phase=e}}}),i.prototype.WahWah=function(t){t||(t=this.getDefaults()),this.input=l.createGain(),this.activateNode=l.createGain(),this.envelopeFollower=new h.EnvelopeFollower({target:this,callback:function(t,e){t.sweep=e}}),this.filterBp=l.createBiquadFilter(),this.filterPeaking=l.createBiquadFilter(),this.output=l.createGain(),this.activateNode.connect(this.filterBp),this.filterBp.connect(this.filterPeaking),this.filterPeaking.connect(this.output),this.init(),this.automode=c(t.enableAutoMode,this.defaults.automode.value),this.resonance=t.resonance||this.defaults.resonance.value,this.sensitivity=c(t.sensitivity,this.defaults.sensitivity.value),this.baseFrequency=c(t.baseFrequency,this.defaults.baseFrequency.value),this.excursionOctaves=t.excursionOctaves||this.defaults.excursionOctaves.value,this.sweep=c(t.sweep,this.defaults.sweep.value),this.activateNode.gain.value=2,this.envelopeFollower.activate(!0),this.bypass=t.bypass||!1},i.prototype.WahWah.prototype=Object.create(p,{name:{value:"WahWah"},defaults:{writable:!0,value:{automode:{value:!0,automatable:!1,type:v},baseFrequency:{value:.5,min:0,max:1,automatable:!1,type:d},excursionOctaves:{value:2,min:1,max:6,automatable:!1,type:d},sweep:{value:.2,min:0,max:1,automatable:!1,type:d},resonance:{value:10,min:1,max:100,automatable:!1,type:d},sensitivity:{value:.5,min:-1,max:1,automatable:!1,type:d}}},activateCallback:{value:function(t){this.automode=t}},automode:{get:function(){return this._automode},set:function(t){this._automode=t,t?(this.activateNode.connect(this.envelopeFollower.input),this.envelopeFollower.activate(!0)):(this.envelopeFollower.activate(!1),this.activateNode.disconnect(),this.activateNode.connect(this.filterBp))}},filterFreqTimeout:{value:0},setFilterFreq:{value:function(){try{this.filterBp.frequency.value=this._baseFrequency+this._excursionFrequency*this._sweep,this.filterPeaking.frequency.value=this._baseFrequency+this._excursionFrequency*this._sweep}catch(t){clearTimeout(this.filterFreqTimeout),this.filterFreqTimeout=setTimeout(function(){this.setFilterFreq()}.bind(this),0)}}},sweep:{enumerable:!0,get:function(){return this._sweep.value},set:function(t){this._sweep=Math.pow(t>1?1:0>t?0:t,this._sensitivity),this.setFilterFreq()}},baseFrequency:{enumerable:!0,get:function(){return this._baseFrequency},set:function(t){this._baseFrequency=50*Math.pow(10,2*t),this._excursionFrequency=Math.min(l.sampleRate/2,this.baseFrequency*Math.pow(2,this._excursionOctaves)),this.setFilterFreq()}},excursionOctaves:{enumerable:!0,get:function(){return this._excursionOctaves},set:function(t){this._excursionOctaves=t,this._excursionFrequency=Math.min(l.sampleRate/2,this.baseFrequency*Math.pow(2,this._excursionOctaves)),this.setFilterFreq()}},sensitivity:{enumerable:!0,get:function(){return this._sensitivity},set:function(t){this._sensitivity=Math.pow(10,t)}},resonance:{enumerable:!0,get:function(){return this._resonance},set:function(t){this._resonance=t,this.filterPeaking.Q=this._resonance}},init:{value:function(){this.output.gain.value=1,this.filterPeaking.type="peaking",this.filterBp.type="bandpass",this.filterPeaking.frequency.value=100,this.filterPeaking.gain.value=20,this.filterPeaking.Q.value=5,this.filterBp.frequency.value=100,this.filterBp.Q.value=1}}}),i.prototype.EnvelopeFollower=function(t){t||(t=this.getDefaults()),this.input=l.createGain(),this.jsNode=this.output=l.createScriptProcessor(this.buffersize,1,1),this.input.connect(this.output),this.attackTime=c(t.attackTime,this.defaults.attackTime.value),this.releaseTime=c(t.releaseTime,this.defaults.releaseTime.value),this._envelope=0,this.target=t.target||{},this.callback=t.callback||function(){}},i.prototype.EnvelopeFollower.prototype=Object.create(p,{name:{value:"EnvelopeFollower"},defaults:{value:{attackTime:{value:.003,min:0,max:.5,automatable:!1,type:d},releaseTime:{value:.5,min:0,max:.5,automatable:!1,type:d}}},buffersize:{value:256},envelope:{value:0},sampleRate:{value:44100},attackTime:{enumerable:!0,get:function(){return this._attackTime},set:function(t){this._attackTime=t,this._attackC=Math.exp(-1/this._attackTime*this.sampleRate/this.buffersize)}},releaseTime:{enumerable:!0,get:function(){return this._releaseTime},set:function(t){this._releaseTime=t,this._releaseC=Math.exp(-1/this._releaseTime*this.sampleRate/this.buffersize)}},callback:{get:function(){return this._callback},set:function(t){"function"==typeof t?this._callback=t:console.error("tuna.js: "+this.name+": Callback must be a function!")}},target:{get:function(){return this._target},set:function(t){this._target=t}},activate:{value:function(t){this.activated=t,t?(this.jsNode.connect(l.destination),this.jsNode.onaudioprocess=this.returnCompute(this)):(this.jsNode.disconnect(),this.jsNode.onaudioprocess=null)}},returnCompute:{value:function(t){return function(e){t.compute(e)}}},compute:{value:function(t){var e,n,i,r,o=t.inputBuffer.getChannelData(0).length,a=t.inputBuffer.numberOfChannels;if(n=i=r=0,a>1)for(r=0;o>r;++r)for(;a>n;++n)e=t.inputBuffer.getChannelData(n)[r],i+=e*e/a;else for(r=0;o>r;++r)e=t.inputBuffer.getChannelData(0)[r],i+=e*e;i=Math.sqrt(i),this._envelope<i?(this._envelope*=this._attackC,this._envelope+=(1-this._attackC)*i):(this._envelope*=this._releaseC,this._envelope+=(1-this._releaseC)*i),this._callback(this._target,this._envelope)}}}),i.prototype.LFO=function(t){this.output=l.createScriptProcessor(256,1,1),this.activateNode=l.destination,this.frequency=c(t.frequency,this.defaults.frequency.value),this.offset=c(t.offset,this.defaults.offset.value),this.oscillation=c(t.oscillation,this.defaults.oscillation.value),this.phase=c(t.phase,this.defaults.phase.value),this.target=t.target||{},this.output.onaudioprocess=this.callback(t.callback||function(){}),this.bypass=t.bypass||!1},i.prototype.LFO.prototype=Object.create(p,{name:{value:"LFO"},bufferSize:{value:256},sampleRate:{value:44100},defaults:{value:{frequency:{value:1,min:0,max:20,automatable:!1,type:d},offset:{value:.85,min:0,max:22049,automatable:!1,type:d},oscillation:{value:.3,min:-22050,max:22050,automatable:!1,type:d},phase:{value:0,min:0,max:2*Math.PI,automatable:!1,type:d}}},frequency:{get:function(){return this._frequency},set:function(t){this._frequency=t,this._phaseInc=2*Math.PI*this._frequency*this.bufferSize/this.sampleRate}},offset:{get:function(){return this._offset},set:function(t){this._offset=t}},oscillation:{get:function(){return this._oscillation},set:function(t){this._oscillation=t}},phase:{get:function(){return this._phase},set:function(t){this._phase=t}},target:{get:function(){return this._target},set:function(t){this._target=t}},activate:{value:function(t){t?this.output.connect(l.destination):this.output.disconnect(l.destination)}},callback:{value:function(t){var e=this;return function(){e._phase+=e._phaseInc,e._phase>2*Math.PI&&(e._phase=0),t(e._target,e._offset+e._oscillation*Math.sin(e._phase))}}}}),i.toString=i.prototype.toString=function(){return"Please visit https://github.com/Theodeus/tuna/wiki for instructions on how to use Tuna.js"}}(this)},{}],159:[function(t,e){e.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],160:[function(t,e,n){(function(e,i){function r(t,e){var i={seen:[],stylize:a};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),v(e)?i.showHidden=e:e&&n._extend(i,e),w(i.showHidden)&&(i.showHidden=!1),w(i.depth)&&(i.depth=2),w(i.colors)&&(i.colors=!1),w(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=o),u(i,t,i.depth)}function o(t,e){var n=r.styles[e];return n?"["+r.colors[n][0]+"m"+t+"["+r.colors[n][1]+"m":t}function a(t){return t}function s(t){var e={};return t.forEach(function(t){e[t]=!0}),e}function u(t,e,i){if(t.customInspect&&e&&P(e.inspect)&&e.inspect!==n.inspect&&(!e.constructor||e.constructor.prototype!==e)){var r=e.inspect(i,t);return b(r)||(r=u(t,r,i)),r}var o=c(t,e);if(o)return o;var a=Object.keys(e),v=s(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(e)),R(e)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return l(e);if(0===a.length){if(P(e)){var g=e.name?": "+e.name:"";return t.stylize("[Function"+g+"]","special")}if(x(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(E(e))return t.stylize(Date.prototype.toString.call(e),"date");if(R(e))return l(e)}var y="",m=!1,_=["{","}"];if(d(e)&&(m=!0,_=["[","]"]),P(e)){var w=e.name?": "+e.name:"";y=" [Function"+w+"]"}if(x(e)&&(y=" "+RegExp.prototype.toString.call(e)),E(e)&&(y=" "+Date.prototype.toUTCString.call(e)),R(e)&&(y=" "+l(e)),0===a.length&&(!m||0==e.length))return _[0]+y+_[1];if(0>i)return x(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special");t.seen.push(e);var k;return k=m?h(t,e,i,v,a):a.map(function(n){return f(t,e,i,v,n,m)}),t.seen.pop(),p(k,y,_)}function c(t,e){if(w(e))return t.stylize("undefined","undefined");if(b(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return m(e)?t.stylize(""+e,"number"):v(e)?t.stylize(""+e,"boolean"):g(e)?t.stylize("null","null"):void 0}function l(t){return"["+Error.prototype.toString.call(t)+"]"}function h(t,e,n,i,r){for(var o=[],a=0,s=e.length;s>a;++a)o.push(A(e,String(a))?f(t,e,n,i,String(a),!0):"");return r.forEach(function(r){r.match(/^\d+$/)||o.push(f(t,e,n,i,r,!0))}),o}function f(t,e,n,i,r,o){var a,s,c;if(c=Object.getOwnPropertyDescriptor(e,r)||{value:e[r]},c.get?s=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(s=t.stylize("[Setter]","special")),A(i,r)||(a="["+r+"]"),s||(t.seen.indexOf(c.value)<0?(s=g(n)?u(t,c.value,null):u(t,c.value,n-1),s.indexOf("\n")>-1&&(s=o?s.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+s.split("\n").map(function(t){return"   "+t}).join("\n"))):s=t.stylize("[Circular]","special")),w(a)){if(o&&r.match(/^\d+$/))return s;a=JSON.stringify(""+r),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+s}function p(t,e,n){var i=0,r=t.reduce(function(t,e){return i++,e.indexOf("\n")>=0&&i++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0);return r>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function d(t){return Array.isArray(t)}function v(t){return"boolean"==typeof t}function g(t){return null===t}function y(t){return null==t}function m(t){return"number"==typeof t}function b(t){return"string"==typeof t}function _(t){return"symbol"==typeof t}function w(t){return void 0===t}function x(t){return k(t)&&"[object RegExp]"===j(t)}function k(t){return"object"==typeof t&&null!==t}function E(t){return k(t)&&"[object Date]"===j(t)}function R(t){return k(t)&&("[object Error]"===j(t)||t instanceof Error)}function P(t){return"function"==typeof t}function T(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function j(t){return Object.prototype.toString.call(t)}function S(t){return 10>t?"0"+t.toString(10):t.toString(10)}function L(){var t=new Date,e=[S(t.getHours()),S(t.getMinutes()),S(t.getSeconds())].join(":");return[t.getDate(),N[t.getMonth()],e].join(" ")}function A(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var O=/%[sdj%]/g;n.format=function(t){if(!b(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(r(arguments[n]));return e.join(" ")}for(var n=1,i=arguments,o=i.length,a=String(t).replace(O,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch(t){return"[Circular]"}default:return t}}),s=i[n];o>n;s=i[++n])a+=g(s)||!k(s)?" "+s:" "+r(s);return a},n.deprecate=function(t,r){function o(){if(!a){if(e.throwDeprecation)throw new Error(r);e.traceDeprecation?console.trace(r):console.error(r),a=!0}return t.apply(this,arguments)}if(w(i.process))return function(){return n.deprecate(t,r).apply(this,arguments)};if(e.noDeprecation===!0)return t;var a=!1;return o};var C,I={};n.debuglog=function(t){if(w(C)&&(C=e.env.NODE_DEBUG||""),t=t.toUpperCase(),!I[t])if(new RegExp("\\b"+t+"\\b","i").test(C)){var i=e.pid;I[t]=function(){var e=n.format.apply(n,arguments);console.error("%s %d: %s",t,i,e)}}else I[t]=function(){};return I[t]},n.inspect=r,r.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},r.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=d,n.isBoolean=v,n.isNull=g,n.isNullOrUndefined=y,n.isNumber=m,n.isString=b,n.isSymbol=_,n.isUndefined=w,n.isRegExp=x,n.isObject=k,n.isDate=E,n.isError=R,n.isFunction=P,n.isPrimitive=T,n.isBuffer=t("./support/isBuffer");var N=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",L(),n.format.apply(n,arguments))},n.inherits=t("inherits"),n._extend=function(t,e){if(!e||!k(e))return t;for(var n=Object.keys(e),i=n.length;i--;)t[n[i]]=e[n[i]];return t}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":159,_process:55,inherits:71}]},{},[1]);