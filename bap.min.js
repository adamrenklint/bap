// Bap v0.4.0 (http://bapjs.org)
// License: MIT Â© 2015 Adam Renklint (http://adamrenklint.com)

!function e(t,n,i){function r(a,s){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[a]={exports:{}};t[a][0].call(l.exports,function(e){var n=t[a][1][e];return r(n?n:e)},l,l.exports,e,t,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(e,t){(function(n){var i=e("./lib/Bap");t.exports=n.bap=new i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./lib/Bap":2}],2:[function(e,t){function n(e,t){var n=[null].concat(t),i=e.bind.apply(e,n);return new i}var i=e("./Model"),r=e("./Clock"),o=e("./LoadingState"),a=e("./types/numberInRange");e("./utils/performanceTimePolyfill")();var s=i.extend({type:"bap",children:{clock:r,loadingState:o},props:{volume:["volumeRange",!0,100]},dataTypes:{volumeRange:a("volumeRange",0,999)},initialize:function(){i.prototype.initialize.apply(this,arguments),this.vent.bap=this,this.on("change:loadingState.loading",this._onChangeLoadingState)},_onChangeLoadingState:function(){this.vent.loading=this.loadingState.loading}}),u={Kit:e("./Kit"),Slot:e("./Slot"),Layer:e("./Layer"),Pattern:e("./Pattern"),Sequence:e("./Sequence"),Channel:e("./Channel"),Note:e("./Note"),Oscillator:e("./Oscillator"),Sample:e("./Sample"),Reverb:e("./effects/Reverb"),Delay:e("./effects/Delay"),Compressor:e("./effects/Compressor"),Overdrive:e("./effects/Overdrive"),Filter:e("./effects/Filter"),Chorus:e("./effects/Chorus"),Phaser:e("./effects/Phaser"),PingPong:e("./effects/PingPongDelay")};Object.keys(u).forEach(function(e){var t=u[e];s.prototype[e]=t,s.prototype[e.toLowerCase()]=function(){return n(t,[].slice.call(arguments))}}),t.exports=s},{"./Channel":4,"./Clock":5,"./Kit":8,"./Layer":9,"./LoadingState":10,"./Model":11,"./Note":12,"./Oscillator":13,"./Pattern":15,"./Sample":18,"./Sequence":19,"./Slot":20,"./effects/Chorus":21,"./effects/Compressor":22,"./effects/Delay":23,"./effects/Filter":24,"./effects/Overdrive":25,"./effects/Phaser":26,"./effects/PingPongDelay":27,"./effects/Reverb":28,"./types/numberInRange":39,"./utils/performanceTimePolyfill":42}],3:[function(e,t){var n=e("./Model"),i=e("meemo"),r=e("audio-buffer-utils"),o=n.extend({type:"bufferHelper"});o.silentTailSize=250,o.trimStart=function(e,t){for(var n=e.getChannelData(t),i=!1,r=0;!i&&r<e.length;)n[r]>0?i=!0:(n[r]=0,r++)},o.trimEnd=function(e,t){for(var n=e.getChannelData(t),i=!1,r=e.length-1;!i&&r>=0;)n[r]<0?i=!0:(n[r]=0,r--)},o.bitcrush=function(e,t,n){for(var i,r=e.getChannelData(t),o=n.bitcrush,a=(n.bitcrushFrequency-20)/22030,s=(n.bitcrushMix||50)/100,u=Math.pow(.5,o),c=0,l=0,h=0;h<e.length;h++){if(c+=a,c>=1&&(c-=1,l=u*Math.floor(r[h]/u+.5)),i=l,1!==s){var f=i*s,p=r[h]*(1-s);i=f+p}r[h]=i}},o.getCopyLength=function(e,t){var n=Math.floor(t.sampleRate*e.length),i=Math.floor(t.sampleRate*e.offset);return e.loop&&(n=Math.floor(t.sampleRate*e.loop)),n>t.length?t.length:i+n>t.length?t.length-i:n},o.getChannelCount=function(e,t){var n=["left","right","diff","merge"];return~n.indexOf(e.channel)?1:t.numberOfChannels},o.getSourceChannel=function(e,t){return 1===t.numberOfChannels?0:"left"===e.channel?0:"right"===e.channel?1:null},o.getSourceStartIndex=function(e,t){var n=Math.floor(t.sampleRate*e.offset);if(n>=t.length)throw new Error("Invalid buffer source start index: params.offset is greater or equal to original buffer length");return n},o.getTargetStartIndex=function(e){return e.trimToZeroCrossingPoint&&e.reverse&&!e.loop?o.silentTailSize:0},o.getRealLength=function(e,t){return e.trimToZeroCrossingPoint&&!e.loop?t+o.silentTailSize:t},o.copyChannelData=function(e,t,n,i,r,o,a){for(var s=e.getChannelData(n),u=t.getChannelData(i),c=o-r,l=r,h=r+a;h>l;l++)u[l+c]=s[l]},o.diffChannelsData=function(e,t,n,i,r){for(var o=e.getChannelData(0),a=e.getChannelData(1),s=t.getChannelData(0),u=i-n,c=n,l=n+r;l>c;c++)s[c+u]=o[c]-a[c]},o.mergeChannelsData=function(e,t,n,i,r){for(var o=e.getChannelData(0),a=e.getChannelData(1),s=t.getChannelData(0),u=i-n,c=n,l=n+r;l>c;c++)s[c+u]=o[c]+a[c]},o.makeBuffer=i(function(e,t,n){var i=(new Date,t.sampleRate),a=o.getChannelCount(e,t),s=o.getSourceChannel(e,t),u=o.getSourceStartIndex(e,t),c=o.getTargetStartIndex(e),l=o.getCopyLength(e,t),h=o.getRealLength(e,l),f=n.createBuffer(a,h,i);if(s)o.copyChannelData(t,f,s,0,u,c,l);else if("diff"===e.channel)o.diffChannelsData(t,f,u,c,l);else if("merge"===e.channel)o.mergeChannelsData(t,f,u,c,l);else for(var p=0;p<t.numberOfChannels;p++)o.copyChannelData(t,f,p,p,u,c,l);e.reverse&&r.reverse(f);for(var d=0;a>d;d++)e.trimToZeroCrossingPoint&&!e.loop&&(o.trimStart(f,d),o.trimEnd(f,d)),e.bitcrush&&o.bitcrush(f,d,e);return f},function(e,t){var n=t.uid;return["length","offset","loop","reverse","trimEndToZeroCrossingPoint","channel","bitcrush","bitcrushFrequency","bitcrushMix"].forEach(function(t){n+="//"+t+":"+e[t]}),n}),t.exports=o},{"./Model":11,"audio-buffer-utils":173,meemo:236}],4:[function(e,t){var n=e("./Model"),i=e("./Note"),r=e("./Collection"),o=e("./mixins/volumeParams"),a=e("./mixins/connectable"),s=e("./mixins/bypassable"),u=e("dilla-expressions"),c=r.extend({model:i}),l=n.extend(o,s,{type:"channel",props:{transform:"function"},collections:{rawNotes:c,expandedNotes:c},initialize:function(){n.prototype.initialize.apply(this,arguments),this._cache={},this.listenTo(this.rawNotes,"add",this._onAddRawNote),this.listenTo(this.rawNotes,"remove",this._onRemoveRawNote),this.listenTo(this.rawNotes,"change:position",this._onChangeRawNote),this.listenTo(this.expandedNotes,"start",this._start),this.listenTo(this.expandedNotes,"stop",this._stop),this.listenTo(this.expandedNotes,"add",this._onAddExpandedNote),this.listenTo(this.expandedNotes,"remove",this._onRemoveExpandedNote),this.cacheMethodUntilEvent("notes","change:expandedNotes")},add:function(){var e=[].slice.call(arguments).map(function(e){return e instanceof i?e:i.fromRaw(e)});return this.rawNotes.add(e),this},notes:function(e,t,n){if(!e)return this.expandedNotes.models.slice();var i=this._cache,r=i[e];if(!t)return(r&&r["*"]||[]).slice();var o=r&&r[t];return n?(o&&o[n]||[]).slice():(o&&o["*"]||[]).slice()},transforms:function(e){if(!(e&&e instanceof i))throw new Error("Invalid argument: note is not an instance of bap.note");var t=this.collection&&this.collection.parent,n=[];return[e,this,t].forEach(function(e){e&&e.transform&&"function"==typeof e.transform&&n.push(e.transform)}),n.length?function(e){n.forEach(function(t){t(e)})}:!1},_onAddExpandedNote:function(e){var t=this._cache,n=e.bar,i=e.beat,r=e.tick;t[n]=t[n]||{},t[n]["*"]=t[n]["*"]||[],t[n]["*"].push(e),t[n][i]=t[n][i]||{},t[n][i]["*"]=t[n][i]["*"]||[],t[n][i]["*"].push(e),t[n][i][r]=t[n][i][r]||[],t[n][i][r].push(e)},_onRemoveExpandedNote:function(e){var t=this._cache,n=e.bar,i=e.beat,r=e.tick,o=t[n]["*"].indexOf(e);t[n]["*"].splice(o,1);var a=t[n][i]["*"].indexOf(e);t[n][i]["*"].splice(a,1);var s=t[n][i][r].indexOf(e);t[n][i][r].splice(s,1)},_onAddRawNote:function(e){var t=this.transforms(e);if(e.hasPlainPosition()&&!t)return e.original=e,this.expandedNotes.add(e);var n=this.collection&&this.collection.parent,i={barsPerLoop:n&&n.bars||1,beatsPerBar:n&&n.beatsPerBar||4};u([[e.position]],i).forEach(function(n){var i=e.with({position:n[0]});i.original=e,t&&t(i),this.expandedNotes.add(i)}.bind(this))},_onRemoveRawNote:function(e){this.expandedNotes.models.slice().forEach(function(t){e===t.original&&(this.expandedNotes.remove(t),t.original=null)}.bind(this))},_onChangeRawNote:function(e){this._onRemoveRawNote(e),this._onAddRawNote(e)},_start:function(e,t){this.mute||this.trigger("start",e,t,this)},_stop:function(e,t){this.trigger("stop",e,t,this)}},a);t.exports=l},{"./Collection":6,"./Model":11,"./Note":12,"./mixins/bypassable":29,"./mixins/connectable":30,"./mixins/volumeParams":36,"dilla-expressions":201}],5:[function(e,t){(function(n){function i(e){u=!0;var t=e.createBufferSource();t.buffer=e.createBuffer(1,22050,44100),t.start(0)}var r=e("./PositionModel"),o=e("dilla"),a=e("./types/instanceOfType"),s=(e("lodash.debounce"),e("meemo")),u=!1,c=r.extend({type:"clock",props:{playing:["boolean",!0,!1],sequence:"sequenceInstance",tempo:["number",!0,0],step:"function",looped:["number",!0,0],_lastQueuedPosition:["string",!0,"0.0.00"],_stopByFold:"boolean"},dataTypes:{sequenceInstance:a("sequenceInstance",["sequence","pattern"])},initialize:function(){r.prototype.initialize.call(this),this.on("change:playing",this._onChangePlaying),this.on("change:sequence",this._onChangeSequence),this.on("change:position",this._onChangePosition),this.on("change:tempo",this._onChangeTempo),this.on("change:bar",this._scheduleSteps),this.on("change:beat",this._scheduleSteps),this.engine=new o(this.context),this.listenTo(this.engine,"tick",this._onEngineTick.bind(this)),this.listenTo(this.engine,"step",this._onEngineStep.bind(this)),this.engine.off=this.engine.removeAllListeners.bind(this.engine),this.listenTo(this.vent,"clock:start",this.start),this.listenTo(this.vent,"clock:pause",this.pause),this.listenTo(this.vent,"clock:stop",this.stop),this.listenTo(this.vent,"clock:tempo",this._applySequenceTempo)},_canStartPlaying:function(){return"loading"!==n.document.readyState&&!this.vent.loading},start:function(e){return u||i(this.context),this._canStartPlaying()?(e&&(this.sequence=e),this.sequence?(this._stopByFold&&(this.position="1.1.01",this._stopByFold=!1),setTimeout(this.engine.start.bind(this.engine),1),this.playing=!0,void(!e&&this.sequence&&"0.0.00"!==this.position&&(this._lastQueuedPosition=this.position,this.engine.setPosition(this.position),this._updateTempo(this.position)))):console.warn("Could not start bap.clock, no sequence has been defined")):setTimeout(function(){this.start(e)}.bind(this),10)},pause:function(e){e&&e!==this.sequence||(this.engine.pause(),this.playing=!1,this._lastQueuedPosition="0.0.00")},stop:function(e){e&&e!==this.sequence||(this.engine.stop(),this.playing=!1,this.position="1.1.01",this.looped=0,this._lastQueuedPosition="0.0.00")},_scheduleSteps:function(){this.engine.set("lookahead",this._lookaheadSteps())},_lookaheadSteps:function(){var e=this.bar||1,t=this.beat||1,n=this.sequence&&this.sequence.beatsPerBar||4,i=this.sequence&&this.sequence.bars||1,r=this.sequence&&this.sequence.loop,o=r&&17>=i?c.possibleSteps:c.uncachedPossibleSteps;return o(e,t,i,n)},_onChangePlaying:function(){var e=this.playing?"start":"pause";this[e](),this.sequence&&(this.sequence.playing=this.playing)},_onChangeSequence:function(){var e=this._previousAttributes.sequence;e&&this.stopListening(e),this.listenTo(this.sequence,"change:bars",this._onChangeSequence),this.listenTo(this.sequence,"change:beatsPerBar",this._onChangeSequence),this.engine.setBeatsPerBar(this.sequence.beatsPerBar),this.engine.setLoopLength(this.sequence.bars),this.tempo=this.sequence.tempo,this.looped=0,this._scheduleSteps()},_onChangePosition:function(){"0.0.00"!==this.position&&this.position!==this.engine._position&&this.engine.setPosition(this.position)},_onChangeTempo:function(){this.engine.setTempo(this.tempo)},_onEngineTick:function(e){this.playing&&"0.0.00"!==e.position&&(this._stopByFold?(this.pause(),this.tick=96):(this.position=e.position,this.tempo=this.engine.tempo()))},_onEngineStep:function(e){this.playing&&this.sequence&&("lookahead"!==e.id||this._foldingOverLoop(e.position)||(this._updateTempo(e.position),this._queueNotesForStep(e.position,e.time),this._lastQueuedPosition=e.position))},_updateTempo:function(e){if(this.sequence)if(e&&this.sequence.tempoAt){var t=c.fragments(e),n=c.ticksForTempoChange(this.tempo),i=t[2]>=96-n&&t[1]===this.sequence.beatsPerBar,r=i?t[0]+1:t[0];r>this.sequence.bars&&this.sequence.loop&&(r=1),this.tempo=this.sequence.tempoAt(r)}else this.tempo=this.sequence.tempo;else this.tempo=120},_foldingOverLoop:function(e){var t=c.paddedPosition(this._lastQueuedPosition),n=c.paddedPosition(e);return t>n&&this.looped++,this._stopByFold=!this.sequence.loop&&t>n,this._stopByFold},_queueNotesForStep:function(e,t){if(this.sequence){var n=c.fragments(e),i=this.sequence.notes(n[0],n[1],n[2]);i=Array.isArray(i)?i:i[n[0]];var r="function"==typeof this.step?this.step:null;i.forEach(function(e){(!r||r&&r(e,t)!==!1)&&e.start(t)})}},_applySequenceTempo:function(e){e.tempo=this.engine.tempo()}});c.uncachedPossibleSteps=function(e,t,n,i){function r(){for(var n=0;++n<97;)o[a]=[[e,t,10>n?"0"+n:n].join(".")],a++}var o=new Array(192),a=0;return r(),++t>i&&(t=1,++e>n&&(e=1)),r(),o},c.possibleSteps=s(c.uncachedPossibleSteps,function(){return[].slice.call(arguments).join("//")}),c.ticksForTempoChange=s(function(e){var t=e/100,n=t>2?t-1:1,i=Math.ceil(t*n*4);return 2>i?2:i}),t.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./PositionModel":17,"./types/instanceOfType":38,dilla:202,"lodash.debounce":210,meemo:236}],6:[function(e,t){var n=(e("./utils/context"),e("ampersand-collection"));t.exports=n.extend({nextId:function(){for(var e,t=0;!e;)this.get(++t)||(e=t);return e}})},{"./utils/context":41,"ampersand-collection":46}],7:[function(e,t){(function(n){e("es6-object-assign").polyfill();var i,r,o=e("./Model"),a=e("./types/numberInRange");i=n.window?e("tunajs"):function(){},t.exports=o.extend({type:"effect",props:{bypass:["boolean",!0,!1],nodes:["object",!0,function(){return{}}]},dataTypes:{volumeRange:a("volumeRange",0,999),inclusivePositiveNumber:a("inclusivePositiveNumber",0,1/0),frequencyRange:a("frequencyRange",20,22050)},initialize:function(){o.prototype.initialize.apply(this,arguments),r=r||new i(this.context),this.tuna=r},createNode:function(){throw new Error('Required method "createNode" is not implemented for '+this.cid)},configureNode:function(){throw new Error('Required method "configureNode" is not implemented for '+this.cid)},combineNodes:function(e,t){return e.connect=function(e){t.connect(e)},e.disconnect=function(){t.disconnect()},e},getDestinationId:function(e){var t=this.toJSON();delete t.nodes,delete t.revision,delete t.bypass;var n=JSON.stringify(t);return e+"//"+n},getNode:function(e){var t=this.nodes,n=this.getDestinationId(e),i=t[n];return i||(i=t[n]=this.createNode(),this.configureNode(i)),i}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./Model":11,"./types/numberInRange":39,"es6-object-assign":209,tunajs:242}],8:[function(e,t){var n=e("./Model"),i=e("./Slot"),r=(e("./Collection"),e("./mixins/overloadedAccessor"),e("./mixins/triggerParams")),o=e("./mixins/volumeParams"),a=e("./mixins/connectable"),s=e("./mixins/bypassable"),u=e("./types/instanceOf"),c="QWERTYUIOPASDFGHJKLZXCVBNM".split(""),l={};c.forEach(function(e){l[e]="slot"});var h=n.extend({props:l,dataTypes:{slot:u("slot",i)},extraProperties:"allow"}),f=n.extend(r,o,a,s,{type:"kit",children:{slots:h},slot:function(e,t){if(!e||"string"!=typeof e)throw new Error("Invalid slot identifier: "+e);return t?(this.slots.set(e,t),t.kit=this,this):(t=this.slots[e],t||(t=new i,this.slots.set(e,t),t.kit=this),t)}});t.exports=f},{"./Collection":6,"./Model":11,"./Slot":20,"./mixins/bypassable":29,"./mixins/connectable":30,"./mixins/overloadedAccessor":32,"./mixins/triggerParams":35,"./mixins/volumeParams":36,"./types/instanceOf":37}],9:[function(e,t){function n(e){var t=[];return function(n){return n?void t.push(n):t.length?t.shift():u[e]()}}var i=e("./Model"),r=e("./mixins/triggerParams"),o=e("./mixins/volumeParams"),a=e("./mixins/connectable"),s=(e("./mixins/bypassable"),e("./Params")),u=null,c=n("createGain"),l=n("createPanner"),h=null,f=i.extend(r,o,{type:"layer",props:{sources:["object",!0,function(){return{}}]},start:function(e,t,n,i){if(!this.mute){"number"!=typeof e&&(i=n,n=t,t=e,e=this.context.currentTime),t=t||{},u=u||this.context;var r=this._params(t,n,i),o=this._source(r);if(o){var a=this._getConnections(t,n,i),s=this._connectDestination(a,r),h=o._gain=c();this._configureAttack(e,r,h,s);var f=this._configurePan(r,h);o.connect(f||h),this._startSource(e,r,o);var p=t.cid||"null";if(this.sources[p]=this.sources[p]||[],this.sources[p].push(o),r.length){var d=this._getStopTime(e,r,o);this.stop(d,t,n,i)}o.onended=function(){var e=this.sources[p].indexOf(o);this.sources[p].splice(e,1),h.disconnect(),o.disconnect(),f&&(f.disconnect(),l(f)),c(h),o=o.onended=o._gain=h=f=null,"function"==typeof t.after&&t.after()}.bind(this)}}},_getStopTime:function(e,t){return e+t.length},stop:function(e,t,n,i){"number"!=typeof e&&(i=n,n=t,t=e,e=this.context.currentTime),t=t||{};var r=this._params(t,n,i),o=t.cid||"null",a=this.sources[o]||[];"null"===o&&(a=[],Object.keys(this.sources).forEach(function(e){a=a.concat(this.sources[e])}.bind(this))),a.forEach(function(t){t._gain&&this._configureRelease(e,r,t._gain),this._stopSource(e,r,t)}.bind(this))},_paramsSources:function(e,t,n){var i=this.collection&&this.collection.parent||{},r=i&&i.kit||{},o={volume:n&&n.volume};return[e,t,o,this,i,r]},_params:function(e,t,n){var i=this._paramsSources(e,t,n);return s.fromSources(i)},_getConnections:function(e,t,n){var i=this._paramsSources(e,t,n),r=[];return i.forEach(function(e){e&&e.connections&&(r=r.concat(e.connections))}),r},_createGain:function(){return this.context.createGain()},_startSource:function(e,t,n){n.start(e)},_stopSource:function(e,t,n){n.stop(e)},_source:function(){throw new Error('Required method "_source" is not implemented for '+this.cid)},_getLocalDestination:function(){return h||(h=c(),h.connect(this.context.destination)),h.gain.value=this.vent.bap.volume/100*.8,h},_connectDestination:function(e,t){var n=this._getLocalDestination();if(t.bypass===!0)return n;var i=this.cid;return e.filter(function(e){return t.bypass===e.type||Array.isArray(t.bypass)&&~t.bypass.indexOf(e.type)?!1:!e.bypass}).reverse().forEach(function(e,t,r){var o=r[t-1],a=e.getNode(o&&o.cid||"destination");a.__connectedTo&&a.__connectedTo!==n?console.error("Attempted to reconnect already connected effect ("+e.cid+") for target "+i):a._connectedTo||(a.connect(n),a._connectedTo=n),n=a}),n},_configurePan:function(e,t){if(0!==e.pan){var n=l(),i=e.pan/100,r=1-Math.abs(i);return n.setPosition(i,0,r),n.connect(t),n}},_configureAttack:function(e,t,n,i){var r=(t.volume||100)/100;n.connect(i),n.gain.value=0,n.gain.setValueAtTime(0,e),n.gain.linearRampToValueAtTime(r,e+t.attack)},_configureRelease:function(e,t,n){var i=(t.volume||100)/100;t.release&&(n.gain.cancelScheduledValues(e-.001),n.gain.linearRampToValueAtTime(i,e-t.release),n.gain.linearRampToValueAtTime(0,e))}},a);t.exports=f},{"./Model":11,"./Params":14,"./mixins/bypassable":29,"./mixins/connectable":30,"./mixins/triggerParams":35,"./mixins/volumeParams":36}],10:[function(e,t){var n=e("./Model"),i=n.extend({type:"loadingState",props:{sources:["array",!0,function(){return[]}]},derived:{loading:{deps:["sources"],fn:function(){return!!this.sources.length}}},initialize:function(){n.prototype.initialize.apply(this,arguments),this.listenTo(this.vent,"loadingState:add",this._addSource),this.listenTo(this.vent,"loadingState:remove",this._removeSource),this.trigger("change:sources")},_addSource:function(e){this.sources.indexOf(e)<0&&(this.sources.push(e),this.trigger("change:sources"))},_removeSource:function(e){var t=this.sources.indexOf(e);t>-1&&(this.sources.splice(t,1),this.trigger("change:sources"))}});t.exports=i},{"./Model":11}],11:[function(e,t){function n(){for(var e=new Array(arguments.length),t=0,n=arguments.length;n>t;t++)e[t]=arguments[t];return e.join("//")}var i=e("./utils/context"),r=e("./utils/vent"),o=e("ampersand-state"),a=e("./utils/uniqueId"),s=e("lodash.merge"),u=e("meemo"),c=o.extend({type:"model",props:{id:["number"]},extraProperties:"reject",initialize:function(e,t){this.context=i.get(),this.vent=r,this.cid=a(this.type),o.prototype.initialize.apply(this,arguments),e&&this.set(e,s({silent:!0,initial:!0},t))},with:function(e){return e=s({},this.toJSON(),e),new this.constructor(e)},cacheMethodUntilEvent:function(e,t){var i=this[e].bind(this),r=function(){return this[e]=u(i,n),r}.bind(this);return this.on(t,r),r()},destroy:function(){this.off(),this.stopListening()},_initCollections:function(){o.prototype._initCollections.call(this);for(var e in this._collections)this.listenTo(this[e],"all",this._getCollectionEventBubblingHandler(e))},_getCollectionEventBubblingHandler:function(e){return function(t,n,i){var r=["change","add","remove"];if(~r.indexOf(t))this.trigger("change:"+e,n,i),this.trigger(t,this);else for(var o;r.length;)if(o=r.shift(),~t.indexOf(o+":")){for(var a=t.split(":"),s=a[0],u=[e].concat(a[1].split("."));u.length;)this.trigger(s+":"+u.join("."),n,i),u.pop();this.trigger(s,n,i)}}.bind(this)}});t.exports=c},{"./utils/context":41,"./utils/uniqueId":44,"./utils/vent":45,"ampersand-state":81,"lodash.merge":213,meemo:236}],12:[function(e,t){var n=e("./PositionModel"),i=["position","target","duration","volume","pitch","pan"],r=e("./types/numberInRange"),o=e("./types/regexp"),a=e("./mixins/triggerParams"),s=e("./mixins/volumeParams"),u=e("./mixins/oscillatorParams"),c=e("./mixins/sampleParams"),l=e("./mixins/connectable"),h=e("./mixins/bypassable"),f=n.extend(a,s,u,c,l,h,{type:"note",props:{target:["target",!1],ghosts:["array",!0,function(){return[]}],transform:"function",after:"function"},dataTypes:{target:o("target",/^(\d+)(A|B|C|D|E|F|G|H|I|J|K|L|M|N|O|P|Q|R|S|T|U|V|W|X|Y|Z)$/),positiveNumber:r("positiveNumber",1,1/0)},start:function(e){this.mute||this.trigger("start",e,this)},stop:function(e){this.trigger("stop",e,this)},hasPlainPosition:function(){return f.isPlainPosition(this.position)}}),p=/^\d+\.\d+\.\d+$/;f.isPlainPosition=function(e){return p.test(e)},f.fromRaw=function(e){var t={},n=e[e.length-1];return"object"==typeof n&&null!==n&&(t=e.pop()),e.forEach(function(e,n){var r=i[n];r&&e&&(t[r]=e)}),new f(t)},t.exports=f},{"./PositionModel":17,"./mixins/bypassable":29,"./mixins/connectable":30,"./mixins/oscillatorParams":31,"./mixins/sampleParams":33,"./mixins/triggerParams":35,"./mixins/volumeParams":36,"./types/numberInRange":39,"./types/regexp":40}],13:[function(e,t){var n=e("./Layer"),i=e("audio-notes"),r=e("./mixins/oscillatorParams"),o=n.extend(r,{type:"oscillator",_source:function(e){var t=this.context.createOscillator(),n=e.frequency;e.note&&(n=i[e.note]||n),t.frequency.value=n||0;var r=12*e.pitch;return t.detune.value=r,t.type=e.shape,t}});t.exports=o},{"./Layer":9,"./mixins/oscillatorParams":31,"audio-notes":176}],14:[function(e,t){e("es6-object-assign").polyfill();var n=e("./Model"),i=e("./mixins/triggerParams"),r=e("./mixins/volumeParams"),o=e("./mixins/oscillatorParams"),a=e("./mixins/sampleParams"),s=e("./types/numberInRange"),u=e("./mixins/bypassable"),c=e("meemo"),l=null,h=n.extend(i,r,o,a,u,{type:"params",props:{tempo:["positiveNumber",!0,120]},dataTypes:{positiveNumber:s("positiveNumber",1,1/0)}});h.mergeSources=c(function(e,t){var n=["volume"],i=["pitch","pan"],r=Object.keys(h.prototype._definition);return r.forEach(function(r){"id"!==r&&(t.forEach(function(t){if(t){var o=t[r];if(~n.indexOf(r)){if(!o||0>o)return;var a=o/100;e[r]=e[r]?e[r]*a:o}else~i.indexOf(r)?(o=o||0,e[r]=(e[r]||0)+o):e[r]=o||e[r]}}),"pan"===r&&e[r]<-100?e[r]=-100:"pan"===r&&e[r]>100&&(e[r]=100))}),e},function(e,t){for(var n,i,r="",o=Object.keys(h.prototype._definition),a=(o.length-1,0),s=t.length;s>a;a++){if(n=t[a])for(var u=0,c=o.length;c>u;u++)i=n[o[u]],i&&"id"!==o[u]&&(r+=o[u]+":"+i+"/");else r+="*";r+="//"}return r}),h.calculateLength=function(e){var t=e.length||0,n=e.duration&&h.lengthFromDuration(e,e.duration)||0;return n&&t>n||!t?(e.hasLengthFromDuration=!0,n):t},h.lengthFromDuration=function(e,t){var n=60/e.tempo,i=n/96;return t*i},h.correctAttackAndRelease=function(e){var t=e.attack+e.release;e.length&&t>e.length&&(e.attack=e.length/t*e.attack,e.release=e.length/t*e.release)},h.fromSources=function(e){l=l||new h;var t=l.toJSON();return t=Object.assign({},h.mergeSources(t,e.reverse())),l.vent.trigger("clock:tempo",t),t.length=h.calculateLength(t),h.correctAttackAndRelease(t),t},t.exports=h},{"./Model":11,"./mixins/bypassable":29,"./mixins/oscillatorParams":31,"./mixins/sampleParams":33,"./mixins/triggerParams":35,"./mixins/volumeParams":36,"./types/numberInRange":39,"es6-object-assign":209,meemo:236}],15:[function(e,t){var n=e("./PlayableModel"),i=e("./Channel"),r=e("./Collection"),o=e("./mixins/overloadedAccessor"),a=e("./Kit"),s=e("./types/numberInRange"),u=e("./Sequence"),c=e("./utils/sequenceActions"),l=n.extend({type:"pattern",props:{bars:["positiveNumber",!0,1],beatsPerBar:["positiveNumber",!0,4],tempo:["positiveNumber",!0,120],loop:["boolean",!0,!0],volume:["volumeRange",!0,100]},dataTypes:{positiveNumber:s("positiveNumber",1,1/0),volumeRange:s("volumeRange",0,999)},collections:{channels:r.extend({model:i}),kits:r.extend({model:a})},initialize:function(){n.prototype.initialize.apply(this,arguments),this.listenTo(this.channels,"start",this._start),this.listenTo(this.channels,"stop",this._stop),this.cacheMethodUntilEvent("notes","change:channels")},notes:function(e,t,n){var i=[];return this.channels.forEach(function(r){i.push.apply(i,r.notes(e,t,n))}),i},then:function(){var e=c.then(this,arguments);return new u({sequences:e})},after:function(){var e=c.after(this,arguments);return new u({sequences:e})},and:function(){var e=c.and(this,arguments);return new u({sequences:e})},_start:function(e,t,n){this._runEvent("start",e,t,n)},_stop:function(e,t,n){this._runEvent("stop",e,t,n)},_runEvent:function(e,t,n,i){var r=parseInt(n.target.slice(0,1),10),o=n.target.slice(1),a=this.kit(r);if(a){if(a.mute)return;a.slot(o)[e](t,n,i,this)}else console.warn("No kit found for "+n.target,n)}},o("channel",i),o("kit",a));t.exports=l},{"./Channel":4,"./Collection":6,"./Kit":8,"./PlayableModel":16,"./Sequence":19,"./mixins/overloadedAccessor":32,"./types/numberInRange":39,"./utils/sequenceActions":43}],16:[function(e,t){var n=e("./Model"),i=n.extend({type:"playable-model",props:{playing:["boolean",!0,!1]},initialize:function(){n.prototype.initialize.apply(this,arguments),this.on("change:playing",this._onChangePlaying.bind(this))},start:function(){return this.playing=!0,this.vent.trigger("clock:start",this),this},pause:function(){return this.playing=!1,this.vent.trigger("clock:pause",this),this},stop:function(){return this.playing=!1,this.vent.trigger("clock:stop",this),this},detachGhosts:function(){this.notes(!0).forEach(function(e){e.detachGhosts()})},notes:function(){return[]},_onChangePlaying:function(){var e=this.playing?"start":"pause";this[e]()}});t.exports=i},{"./Model":11}],17:[function(e,t){var n=e("./Model"),i=e("./types/numberInRange"),r=e("./types/regexp"),o=e("lodash.padleft"),a=e("meemo"),s=n.extend({type:"position-model",props:{position:["position",!0,"0.0.00"],bar:["positiveNumber",!1],beat:["positiveNumber",!1],tick:["tick",!1]},dataTypes:{position:r("position",/^(.+)\.(.+)\.(.+)$/),positiveNumber:i("positiveNumber",1,1/0),tick:i("tick",1,96)},initialize:function(){n.prototype.initialize.apply(this,arguments),this.on("change:position",this._updatePositionToFragments),this.on("change:bar",this._updatePositionFromFragments),this.on("change:beat",this._updatePositionFromFragments),this.on("change:tick",this._updatePositionFromFragments),this._updatePositionToFragments(),this._updatePositionFromFragments()},paddedPosition:function(){return s.paddedPosition(this.position)},fragments:function(){return s.fragments(this.position)},_updatePositionToFragments:function(){this.set(s.getFragmentsObject(this.position))},_updatePositionFromFragments:function(){var e=this.fragments(),t=this.bar||e[0],n=this.beat||e[1],i=this.tick||e[2];i=10>i&&"00"!==i?"0"+i:i,this.position=[t,n,i].join(".")}});s.paddedPosition=a(function(e){var t=3,n=s.fragments(e);return[o(n[0],t,"0"),o(n[1],t,"0"),o(n[2],t,"0")].join(".")}),s.fragments=a(function(e){return e.split(".").map(function(e){var t=parseInt(e,10);return/^\d+$/.test(e)&&!isNaN(t)?t:e})});var u=["bar","beat","tick"];s.getFragmentsObject=a(function(e){var t=s.fragments(e),n={};return t.forEach(function(e,t){e&&"number"==typeof e&&!isNaN(e)&&e>0&&(n[u[t]]=e)}),n}),t.exports=s},{"./Model":11,"./types/numberInRange":39,"./types/regexp":40,"lodash.padleft":232,meemo:236}],18:[function(e,t){var n=e("./Layer"),i=(e("./Kit"),e("./Params")),r=e("./BufferHelper"),o=e("./mixins/sampleParams"),a=e("./utils/uniqueId"),s="QWERTYUIOPASDFGHJKLZXCVBNM",u={},c={},l=n.extend({type:"sample",props:{loaded:["boolean",!0,!1],sliceExpression:"string",buffer:"any"},constructor:function(e,t,i){"string"==typeof e?(t=t||{},t.src=e):(i=t,t=e),n.call(this,t,i)},initialize:function(e,t){n.prototype.initialize.call(this,e,t),this.on("change:src",this._loadSample),this.on("change:loaded",this._configureSlice),this.on("change:sliceExpression",this._configureSlice),this.src&&this._loadSample(),this._configureSlice()},_getSlotId:function(e){if(e<s.length)return s[e];var t=Math.floor(e/s.length);return e-=t*s.length,s[t-1]+s[e]},slice:function(e){for(var t=new this.vent.bap.kit,n=0;e>n;n++)t.slot(this._getSlotId(n)).layer(this.with({sliceExpression:""+(n+1)+"/"+e}));return t},_params:function(){var e=n.prototype._params.apply(this,arguments);e.length=e.length||this.buffer&&this.buffer.duration-e.offset||0;var t=e.playbackRate=this._getPlaybackRate(e);if(!e.hasLengthFromDuration){var r=e.length/t,o=e.duration&&i.lengthFromDuration(e,e.duration);o&&r>o&&(e.hasLengthFromDuration=!0,e.length=o)}return e},_source:function(e){if(!this.src)throw new Error("Cannot start sample without source url");if(!this.buffer)throw new Error("Cannot start sample without loaded buffer");var t=this.context.createBufferSource();return t.buffer=r.makeBuffer(e,this.buffer,this.context),t.playbackRate.value=e.playbackRate,e.loop>0&&(t.loop=!0,t.loopStart=e.offset,t.loopEnd=e.offset+e.loop),t},_getStopTime:function(e,t,n){var i=t.hasLengthFromDuration?n.buffer.duration:n.buffer.duration/t.playbackRate;return e+i},_getPlaybackRate:function(e){if(e.pitch<0){var t=-e.pitch/100,n=Math.floor(t),i=t-n,r=Math.pow(.5,n);return r*(1-.5*i)}return e.pitch/100+1},_loadSample:function(e){var t=u[this.src];if(t)this.buffer=t,c[this.src]--,this.loaded=!0,c[this.src]||this.vent.trigger("loadingState:remove",this.src);else{if(this.loaded=!1,c[this.src])return e!==!1&&c[this.src]++,setTimeout(this._loadSample.bind(this,!1),10);this.vent.trigger("loadingState:add",this.src),c[this.src]=1;var n=new XMLHttpRequest;n.open("GET",this.src,!0),n.responseType="arraybuffer",n.onload=function(){this.context.decodeAudioData(n.response,function(e){e.uid=a("buffer"),this.buffer=u[this.src]=e,c[this.src]--,this.loaded=!0,c[this.src]||this.vent.trigger("loadingState:remove",this.src),n.onload=null}.bind(this))}.bind(this),n.send()}},_configureRelease:function(e,t,i){t.trimToZeroCrossingPoint&&(e-=r.silentTailSize/44100),n.prototype._configureRelease.call(this,e,t,i)},_configureSlice:function(){if(this.buffer&&this.loaded&&this.sliceExpression){var e=this.buffer.duration,t=this.sliceExpression.split("/"),n=parseInt(t[0],10)-1,i=parseInt(t[1],10),r=e/i,o=n*r;this.length=r,this.offset=o}}},o);t.exports=l},{"./BufferHelper":3,"./Kit":8,"./Layer":9,"./Params":14,"./mixins/sampleParams":33,"./utils/uniqueId":44}],19:[function(e,t){function n(e){return e.map(function(e){return e.map(function(e){return e.cid}).join("+")}).join(">")}function i(e){return e[0]&&e[0][0]}function r(e){var t=0;return e.forEach(function(e){e.bars>t&&(t=e.bars)}),t}function o(e,t){e.forEach(function(e){Array.isArray(e)?o(e,t):t(e)})}var a=e("./PlayableModel"),s=(e("./PositionModel"),e("./utils/sequenceActions")),u=a.extend({type:"sequence",props:{loop:["boolean",!0,!1],sequences:["sequence-grid",!0,function(){return[]}]},dataTypes:{"sequence-grid":{set:function(e){return{val:e,type:Array.isArray(e)&&Array.isArray(e[0])||!e[0]?"sequence-grid":typeof e}},compare:function(e,t){var i=n(e)===n(t);

return i||(o(e,function(e){this.stopListening(e)}.bind(this)),o(t,function(e){this.listenTo(e,"change:channels change:sequences",this._forwardChannelChange)}.bind(this))),i}}},derived:{tempo:{deps:["sequences"],fn:function(){var e=i(this.sequences);return e&&e.tempo||120}},bars:{deps:["sequences"],fn:function(){var e=0;return this.sequences.length&&this.sequences.forEach(function(t){e+=r(t)}),e}},beatsPerBar:{deps:["sequences"],fn:function(){var e=i(this.sequences);return e&&e.beatsPerBar||4}}},constructor:function(){for(var e=Array.prototype.slice.call(arguments),t=["sequence","pattern"],n=[],i=!0;i&&e.length;)e[0]&&~t.indexOf(e[0].type)?n.push([e.shift()]):e[0]&&Array.isArray(e[0])?n.push(e.shift()):i=!1;e[0]=e[0]||{},n.length&&(e[0].sequences=n),a.apply(this,e)},initialize:function(){a.prototype.initialize.apply(this,arguments),this.cacheMethodUntilEvent("notes","change:sequences"),this.cacheMethodUntilEvent("patterns","change:sequences"),this.cacheMethodUntilEvent("tempoAt","change:sequences")},notes:function(e,t,n){var i={};if(1>e||e>this.bars)throw new Error("Invalid argument: bar is not within sequence length");i[e]=[];{var r=this.patterns(e);this.cid}return Object.keys(r).forEach(function(o){var a=r[o],s=e-parseInt(o,10);a.forEach(function(r){i[e]=i[e].concat(r.notes(s,t,n))})}),i},patterns:function(e,t){if("number"!=typeof e)throw new Error("Invalid argument: bar is not a number");if(1>e||e>this.bars)throw new Error("Invalid argument: bar is not within sequence length");var n={},i=this.sequences.slice(),o=0;t=t||0;for(var a,s,u,c;i.length;)a=i.shift(),s=r(a),u=o+1,c=o+s,e>=u&&c>=e?i=[]:o+=s;this.cid;return a.forEach(function(i){var r=o+t;if("sequence"===i.type){var a=i.patterns(e-o,r);Object.keys(a).forEach(function(e){var t=a[e];n[e]=(n[e]||[]).concat(t)})}else n[r]=n[r]||[],n[r].push(i)}),n},tempoAt:function(e){var t=this.tempoChanges(),n=t.filter(function(t){return t[0]<=e});return n.length?n[n.length-1][1]:120},tempoChanges:function(){var e=[],t=1,n=null;return this.sequences.forEach(function(i){i=i[0],i.tempo!==n&&(e.push([t,i.tempo,i.beatsPerBar]),n=i.tempo),t+=i.bars}),e},then:function(){var e=s.then(this,arguments);return new this.constructor({sequences:e})},after:function(){var e=s.after(this,arguments);return new this.constructor({sequences:e})},and:function(){var e=s.and(this,arguments);return new this.constructor({sequences:e})},_forwardChannelChange:function(){this.trigger("change:sequences")}});t.exports=u},{"./PlayableModel":16,"./PositionModel":17,"./utils/sequenceActions":43}],20:[function(e,t){var n=e("./Model"),i=e("./Layer"),r=e("./Collection"),o=e("./mixins/overloadedAccessor"),a=e("./mixins/triggerParams"),s=e("./mixins/volumeParams"),u=e("./mixins/connectable"),c=e("./mixins/bypassable"),l=e("./mixins/sampleShortcut"),h=n.extend(a,s,c,{type:"slot",collections:{layers:r.extend({model:i})},initialize:function(){n.prototype.initialize.apply(this,arguments),this._initSampleShortcut()},start:function(e,t,n,i){this.mute||this.layers.each(function(r){r.start(e,t,n,i)}.bind(this))},stop:function(e,t,n,i){this.layers.each(function(r){r.stop(e,t,n,i)}.bind(this))}},o("layer",i),l,u);t.exports=h},{"./Collection":6,"./Layer":9,"./Model":11,"./mixins/bypassable":29,"./mixins/connectable":30,"./mixins/overloadedAccessor":32,"./mixins/sampleShortcut":34,"./mixins/triggerParams":35,"./mixins/volumeParams":36}],21:[function(e,t){var n=e("../Effect"),i=e("../types/numberInRange");t.exports=n.extend({type:"chorus",props:{wet:["volumeRange",!0,100],dry:["volumeRange",!0,0],rate:["rateRange",!0,1.5],feedback:["inclusivePositiveNumber",!0,.2],delay:["delayRange",!0,.005],gain:["volumeRange",!0,100]},dataTypes:{rateRange:i("rateRange",.01,99),delayRange:i("delayRange",0,1)},createNode:function(){var e=this.context.createGain(),t=e._dry=this.context.createGain(),n=e._wet=this.context.createGain(),i=e._chorus=new this.tuna.Chorus;i.activate(!0);var r=e._output=this.context.createGain();return e.connect(t),t.connect(r),e.connect(n),n.connect(i),i.connect(r),this.combineNodes(e,r)},configureNode:function(e){e._dry.gain.value=this.dry/100,e._wet.gain.value=this.wet/100,e._chorus.rate=this.rate,e._chorus.feedback=this.feedback,e._chorus.delay=this.delay,e._output.gain.value=this.gain/100}})},{"../Effect":7,"../types/numberInRange":39}],22:[function(e,t){var n=e("../Effect"),i=e("../types/numberInRange");t.exports=n.extend({type:"compressor",props:{threshold:["thresholdRange",!0,-12],knee:["kneeRange",!0,30],ratio:["ratioRange",!0,12],attack:["simpleFloatRange",!0,0],release:["simpleFloatRange",!0,.25],gain:["volumeRange",!0,100]},dataTypes:{thresholdRange:i("thresholdRange",-100,0),kneeRange:i("kneeRange",0,40),ratioRange:i("ratioRange",0,20),simpleFloatRange:i("simpleFloatRange",0,1)},createNode:function(){var e=this.context.createDynamicsCompressor(),t=e._output=this.context.createGain();return e.connect(t),this.combineNodes(e,t)},configureNode:function(e){e.threshold.value=this.threshold,e.knee.value=this.knee,e.ratio.value=this.ratio,e.attack.value=this.attack,e.release.value=this.release,e._output.gain.value=this.gain/100}})},{"../Effect":7,"../types/numberInRange":39}],23:[function(e,t){var n=e("../Effect"),i=e("soundbank-delay"),r=e("../types/numberInRange");t.exports=n.extend({type:"delay",props:{wet:["volumeRange",!0,50],dry:["volumeRange",!0,100],time:["delayTimeRange",!0,.3],feedback:["volumeRange",!0,50],cutoff:["frequencyRange",!0,50],filter:{type:"string",default:"highpass",values:["highpass","lowpass","bandpass","lowshelf","highshelf","peaking","notch","allpass"]},sync:["boolean",!0,!1]},dataTypes:{delayTimeRange:r("delayTimeRange",.001,4)},createNode:function(){return i(this.context)},configureNode:function(e){this.vent.trigger("clock:tempo",e),e.sync=this.sync,e.time.value=this.time,e.wet.value=this.wet/100,e.dry.value=this.dry/100,e.filterType=this.filter,e.cutoff.value=this.cutoff,e.feedback.value=this.feedback/100}})},{"../Effect":7,"../types/numberInRange":39,"soundbank-delay":238}],24:[function(e,t){var n=e("../Effect"),i=e("../types/numberInRange");t.exports=n.extend({type:"filter",props:{wet:["volumeRange",!0,100],dry:["volumeRange",!0,0],frequency:["frequencyRange",!0,440],q:["qRange",!0,1],shape:{type:"string",default:"highpass",values:["highpass","lowpass","bandpass","lowshelf","highshelf","peaking","notch","allpass"]},value:["filterValueRange",!0,0],gain:["volumeRange",!0,100]},dataTypes:{qRange:i("qRange",.001,100),filterValueRange:i("filterValueRange",-999,999)},createNode:function(){var e=this.context.createGain(),t=e._dry=this.context.createGain(),n=e._wet=this.context.createGain(),i=e._filter=this.context.createBiquadFilter(),r=e._output=this.context.createGain();return e.connect(t),t.connect(r),e.connect(n),n.connect(i),i.connect(r),this.combineNodes(e,r)},configureNode:function(e){e._dry.gain.value=this.dry/100,e._wet.gain.value=this.wet/100,e._filter.type=this.shape,e._filter.frequency.value=this.frequency,e._filter.Q.value=this.q,e._filter.gain.value=this.value/12,e._output.gain.value=this.gain/100}})},{"../Effect":7,"../types/numberInRange":39}],25:[function(e,t){var n=e("../Effect"),i=e("soundbank-overdrive"),r=e("../types/numberInRange");t.exports=n.extend({type:"overdrive",props:{wet:["volumeRange",!0,50],dry:["volumeRange",!0,50],preBand:["preBandRange",!0,50],color:["frequencyRange",!0,800],postCut:["frequencyRange",!0,3e3],gain:["volumeRange",!0,100]},dataTypes:{preBandRange:r("preBandRange",0,100)},createNode:function(){var e=this.context.createGain(),t=e._dry=this.context.createGain(),n=e._overdrive=i(this.context),r=e._output=this.context.createGain();return e.connect(t),t.connect(r),e.connect(n),n.connect(r),this.combineNodes(e,r)},configureNode:function(e){e._dry.gain.value=this.dry/100,e._overdrive.gain.value=this.wet/100,e._overdrive.preBand.value=this.preBand/100,e._overdrive.color.value=this.color,e._overdrive.postCut.value=this.postCut,e._output.gain.value=this.gain/100}})},{"../Effect":7,"../types/numberInRange":39,"soundbank-overdrive":239}],26:[function(e,t){var n=e("../Effect"),i=e("../types/numberInRange");t.exports=n.extend({type:"phaser",props:{wet:["volumeRange",!0,100],dry:["volumeRange",!0,0],rate:["rateRange",!0,1.2],depth:["depthRange",!0,.3],feedback:["inclusivePositiveNumber",!0,.2],stereoPhase:["stereoPhaseRange",!0,45],modulationFrequency:["modulationFrequencyRange",!0,750],gain:["volumeRange",!0,100]},dataTypes:{rateRange:i("rateRange",.01,99),depthRange:i("depthRange",0,1),stereoPhaseRange:i("stereoPhaseRange",0,180),modulationFrequencyRange:i("modulationFrequencyRange",500,1500)},createNode:function(){var e=this.context.createGain(),t=e._dry=this.context.createGain(),n=e._wet=this.context.createGain(),i=e._phaser=new this.tuna.Phaser;i.activate(!0);var r=e._output=this.context.createGain();return e.connect(t),t.connect(r),e.connect(n),n.connect(i),i.connect(r),this.combineNodes(e,r)},configureNode:function(e){e._dry.gain.value=this.dry/100,e._wet.gain.value=this.wet/100,e._phaser.rate=this.rate,e._phaser.depth=this.depth,e._phaser.feedback=this.feedback,e._phaser.stereoPhase=this.stereoPhase,e._phaser.baseModulationFrequency=this.modulationFrequency,e._output.gain.value=this.gain/100}})},{"../Effect":7,"../types/numberInRange":39}],27:[function(e,t){var n=e("../Effect"),i=e("../types/numberInRange");t.exports=n.extend({type:"pingpong",props:{wet:["volumeRange",!0,100],dry:["volumeRange",!0,0],feedback:["feedbackRange",!0,.2],left:["delayTimeRange",!0,.15],right:["delayTimeRange",!0,.2],gain:["volumeRange",!0,100]},dataTypes:{feedbackRange:i("feedbackRange",0,1),delayTimeRange:i("delayTimeRange",.001,10)},createNode:function(){var e=this.context.createGain(),t=e._dry=this.context.createGain(),n=e._wet=this.context.createGain(),i=e._pingpong=new this.tuna.PingPongDelay;i.activate(!0);var r=e._output=this.context.createGain();return e.connect(t),t.connect(r),e.connect(n),n.connect(i),i.connect(r),this.combineNodes(e,r)},configureNode:function(e){e._dry.gain.value=this.dry/100,e._wet.gain.value=this.wet/100,e._pingpong.wetLevel=1,e._pingpong.feedback=this.feedback,e._pingpong.delayTimeLeft=1e3*this.left,e._pingpong.delayTimeRight=1e3*this.right,e._output.gain.value=this.gain/100}})},{"../Effect":7,"../types/numberInRange":39}],28:[function(e,t){var n=e("../Effect"),i=e("soundbank-reverb");t.exports=n.extend({type:"reverb",props:{wet:["volumeRange",!0,50],dry:["volumeRange",!0,100],time:["inclusivePositiveNumber",!0,1],decay:["inclusivePositiveNumber",!0,3],cutoff:["frequencyRange",!0,1e3],filter:{type:"string",default:"highpass",values:["highpass","lowpass","bandpass","lowshelf","highshelf","peaking","notch","allpass"]},reverse:["boolean",!0,!1]},createNode:function(){return i(this.context)},configureNode:function(e){e.time=this.time,e.wet.value=this.wet/100,e.dry.value=this.dry/100,e.filterType=this.filter,e.cutoff.value=this.cutoff,e.decay=this.decay,e.reverse=this.reverse}})},{"../Effect":7,"soundbank-reverb":241}],29:[function(e,t){var n=["compressor","delay","filter","overdrive","reverb"];t.exports={props:{bypass:["bypassType",!0,!1]},dataTypes:{bypassType:{set:function(e){if("boolean"==typeof e||~n.indexOf(e))return{val:e,type:"bypassType"};if(Array.isArray(e)){var t=!!e.filter(function(e){return!~n.indexOf(e)}).length;return t?{val:e,type:typeof e}:{val:e,type:"bypassType"}}return{val:e,type:typeof e}}}}}},{}],30:[function(e,t){t.exports={props:{connections:["array",!0,function(){return[]}]},connect:function(e){return this.connections=this.connections.concat(e),this},disconnect:function(e){return this.connections=Array.isArray(e)?this.connections.filter(function(t){return!~e.indexOf(t)}):e?this.connections.filter(function(t){return e!==t}):[],this}}},{}],31:[function(e,t){var n=e("../types/numberInRange");t.exports={props:{frequency:"frequencyRange",note:"string",shape:{type:"string",default:"sine",values:["sine","square","sawtooth","triangle","custom"]}},dataTypes:{frequencyRange:n("frequencyRange",20,22050)}}},{"../types/numberInRange":39}],32:[function(e,t){function n(e,t){var n={};return n[e]=function(n,i){var r=!1,o=this[e+"s"];return!i&&n instanceof t?(i=n,i.id=o.nextId(),r=!0):"number"!=typeof n||i?n&&i instanceof t?(o.remove(o.get(n)),i.id=n,r=!0):i=new t({id:o.nextId()}):i=o.get(n)||new t({id:n}),i=o.add(i),r?this:i},n}t.exports=n},{}],33:[function(e,t){var n=e("../types/numberInRange");t.exports={props:{src:"string",offset:["inclusivePositiveNumber",!0,0],loop:["inclusivePositiveNumber",!0,0],bitcrush:["bitRange",!0,0],bitcrushFrequency:["frequencyRange",!0,6500],bitcrushMix:["simpleCentRange",!0,0],playbackRate:["inclusivePositiveNumber",!0,1],trimToZeroCrossingPoint:["boolean",!0,!0],channel:{type:"any",values:[null,!1,void 0,"left","right","merge","diff"]},reverse:["boolean",!0,!1]},dataTypes:{inclusivePositiveNumber:n("inclusivePositiveNumber",0,1/0),bitRange:n("bitRange",0,16),simpleCentRange:n("simpleCentRange",0,100),frequencyRange:n("frequencyRange",20,22050)}}},{"../types/numberInRange":39}],34:[function(e,t){var n=e("../Sample");t.exports={_sampleConstructor:n,_initSampleShortcut:function(){this._originalLayerFunction=this.layer,this.layer=this._overloadedLayerFn},_overloadedLayerFn:function(e,t){if("string"==typeof e){t=t||{},t.src=e;var n=new this._sampleConstructor(t);return this.layers.add(n),this}return this._originalLayerFunction.apply(this,arguments)}}},{"../Sample":18}],35:[function(e,t){var n=e("../types/numberInRange");t.exports={props:{duration:"positiveNumber",length:"inclusivePositiveNumber",attack:["inclusivePositiveNumber",!0,0],release:["inclusivePositiveNumber",!0,0],pitch:"number"},dataTypes:{positiveNumber:n("positiveNumber",1,1/0),inclusivePositiveNumber:n("inclusivePositiveNumber",0,1/0)}}},{"../types/numberInRange":39}],36:[function(e,t){var n=e("../types/numberInRange");t.exports={props:{volume:["inclusivePositiveNumber",!0,100],mute:["boolean",!0,!1],pan:["panRange",!0,0]},dataTypes:{inclusivePositiveNumber:n("inclusivePositiveNumber",0,1/0),panRange:n("panRange",-100,100)}}},{"../types/numberInRange":39}],37:[function(e,t){function n(e,t){return{set:function(n){return n instanceof t?{val:n,type:e}:{val:n,type:typeof n}},compare:function(e,t,n){var i=e===t;return i||(e&&this.stopListening(e),null!==t&&this.listenTo(t,"all",this._getEventBubblingHandler(n))),i}}}t.exports=n},{}],38:[function(e,t){function n(e,t){return{set:function(n){return~t.indexOf(n.type)?{val:n,type:e}:{val:n,type:typeof n}},compare:function(e,t,n){var i=e===t;return i||(e&&this.stopListening(e),null!==t&&this.listenTo(t,"all",this._getEventBubblingHandler(n))),i}}}t.exports=n},{}],39:[function(e,t){function n(e,t,n){return{set:function(i){return i>=t&&n>=i?{val:i,type:e}:{val:i,type:typeof i}}}}t.exports=n},{}],40:[function(e,t){function n(e,t){return{set:function(n){return t.test(n)?{val:n,type:e}:{val:n,type:typeof n}}}}t.exports=n},{}],41:[function(e,t){var n=e("audio-context");t.exports={set:function(e){n=e},get:function(){return n}}},{"audio-context":174}],42:[function(e,t){(function(e){t.exports=function(){if("performance"in e==!1&&(e.performance={}),Date.now=Date.now||function(){return(new Date).getTime()},"now"in e.performance==!1){var t=Date.now();performance.timing&&performance.timing.navigationStart&&(t=performance.timing.navigationStart),e.performance.now=function(){return Date.now()-t}}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],43:[function(e,t){t.exports={then:function(e,t){return t=[].slice.call(t),[e].concat(t).map(function(e){return Array.isArray(e)||(e=[e]),e})},after:function(e,t){return t=[].slice.call(t),t.concat(e).map(function(e){return Array.isArray(e)||(e=[e]),e})},and:function(e,t){function n(e){~i.indexOf(e)||i.push(e)}t=[].slice.call(t);var i=[e];return t.forEach(function(e){Array.isArray(e)?e.forEach(n):n(e)}),[i]}}},{}],44:[function(e,t){function n(e){return i[e]=i[e]||0,e+"-"+ ++i[e]}var i={};t.exports=n},{}],45:[function(e,t){var n=e("ampersand-state");t.exports=new(n.extend())},{"ampersand-state":81}],46:[function(e,t){function n(e,t){if(t||(t={}),t.model&&(this.model=t.model),t.comparator&&(this.comparator=t.comparator),t.parent&&(this.parent=t.parent),!this.mainIndex){var n=this.model&&this.model.prototype&&this.model.prototype.idAttribute;this.mainIndex=n||"id"}this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,s({silent:!0},t))}var i=e("ampersand-events"),r=e("ampersand-class-extend"),o=e("lodash.isarray"),a=e("lodash.bind"),s=e("lodash.assign"),u=[].slice;s(n.prototype,i,{initialize:function(){},isModel:function(e){return this.model&&e instanceof this.model},add:function(e,t){return this.set(e,s({merge:!1,add:!0,remove:!1},t))},parse:function(e){return e},serialize:function(){return this.map(function(e){if(e.serialize)return e.serialize();var t={};return s(t,e),delete t.collection,t})},toJSON:function(){return this.serialize()},set:function(e,t){t=s({add:!0,remove:!0,merge:!0},t),t.parse&&(e=this.parse(e,t));var n=!o(e);e=n?e?[e]:[]:e.slice();var i,r,a,u,c,l,h,f=t.at,p=this.comparator&&null==f&&t.sort!==!1,d="string"==typeof this.comparator?this.comparator:null,g=[],v=[],m={},y=t.add,b=t.merge,_=t.remove,w=!p&&y&&_?[]:!1,x=this.model&&this.model.prototype||Object.prototype;for(l=0,h=e.length;h>l;l++){if(a=e[l]||{},i=this.isModel(a)?r=a:x.generateId?x.generateId(a):a[this.mainIndex],u=this.get(i))_&&(m[u.cid||u[this.mainIndex]]=!0),b&&(a=a===r?r.attributes:a,t.parse&&(a=u.parse(a,t)),u.set?(u.set(a,t),p&&!c&&u.hasChanged(d)&&(c=!0)):s(u,a)),e[l]=u;else if(y){if(r=e[l]=this._prepareModel(a,t),!r)continue;g.push(r),this._addReference(r,t)}r=u||r,r&&(w&&(r.isNew&&r.isNew()||!r[this.mainIndex]||!m[r.cid||r[this.mainIndex]])&&w.push(r),m[r[this.mainIndex]]=!0)}if(_){for(l=0,h=this.length;h>l;l++)r=this.models[l],m[r.cid||r[this.mainIndex]]||v.push(r);v.length&&this.remove(v,t)}if(g.length||w&&w.length)if(p&&(c=!0),null!=f)for(l=0,h=g.length;h>l;l++)this.models.splice(f+l,0,g[l]);else{var k=w||g;for(l=0,h=k.length;h>l;l++)this.models.push(k[l])}if(c&&this.sort({silent:!0}),!t.silent){for(l=0,h=g.length;h>l;l++)r=g[l],r.trigger?r.trigger("add",r,this,t):this.trigger("add",r,this,t);(c||w&&w.length)&&this.trigger("sort",this,t)}return n?e[0]:e},get:function(e,t){if(null!=e){var n=this._indexes[t||this.mainIndex];return n&&(n[e]||n[e[this.mainIndex]])||this._indexes.cid[e]||this._indexes.cid[e.cid]}},at:function(e){return this.models[e]},remove:function(e,t){var n,i,r,a,s=!o(e);for(e=s?[e]:u.call(e),t||(t={}),n=0,i=e.length;i>n;n++)r=e[n]=this.get(e[n]),r&&(this._deIndex(r),a=this.models.indexOf(r),this.models.splice(a,1),t.silent||(t.index=a,r.trigger?r.trigger("remove",r,this,t):this.trigger("remove",r,this,t)),this._removeReference(r,t));return s?e[0]:e},reset:function(e,t){t||(t={});for(var n=0,i=this.models.length;i>n;n++)this._removeReference(this.models[n],t);return t.previousModels=this.models,this._reset(),e=this.add(e,s({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},sort:function(e){var t=this;if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),this.models.sort("string"==typeof this.comparator?function(e,n){return e.get?(e=e.get(t.comparator),n=n.get(t.comparator)):(e=e[t.comparator],n=n[t.comparator]),e>n||void 0===e?1:n>e||void 0===n?-1:0}:1===this.comparator.length?function(e,n){return e=t.comparator(e),n=t.comparator(n),e>n||void 0===e?1:n>e||void 0===n?-1:0}:a(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},_reset:function(){var e=u.call(this.indexes||[]),t=0;e.push(this.mainIndex),e.push("cid");var n=e.length;for(this.models=[],this._indexes={};n>t;t++)this._indexes[e[t]]={}},_prepareModel:function(e,t){if(!this.model)return e;if(this.isModel(e))return e.collection||(e.collection=this),e;t=t?s({},t):{},t.collection=this;var n=new this.model(e,t);return n.validationError?(this.trigger("invalid",this,n.validationError,t),!1):n},_deIndex:function(e,t,n){var i;if(void 0!==t){if(void 0===this._indexes[t])throw new Error("Given attribute is not an index");return void delete this._indexes[t][n]}for(t in this._indexes)i=e.hasOwnProperty(t)?e[t]:e.get&&e.get(t),delete this._indexes[t][i]},_index:function(e,t){var n;if(void 0!==t){if(void 0===this._indexes[t])throw new Error("Given attribute is not an index");return n=e[t]||e.get&&e.get(t),void(n&&(this._indexes[t][n]=e))}for(t in this._indexes)n=e.hasOwnProperty(t)?e[t]:e.get&&e.get(t),null!=n&&(this._indexes[t][n]=e)},_addReference:function(e){this._index(e),e.collection||(e.collection=this),e.on&&e.on("all",this._onModelEvent,this)},_removeReference:function(e){this===e.collection&&delete e.collection,this._deIndex(e),e.off&&e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,i){var r=e.split(":")[0],o=e.split(":")[1];("add"!==r&&"remove"!==r||n===this)&&("destroy"===r&&this.remove(t,i),t&&"change"===r&&o&&this._indexes[o]&&(this._deIndex(t,o,t.previousAttributes()[o]),this._index(t,o)),this.trigger.apply(this,arguments))}}),Object.defineProperties(n.prototype,{length:{get:function(){return this.models.length}},isCollection:{value:!0}});var c=["indexOf","lastIndexOf","every","some","forEach","map","filter","reduce","reduceRight"];c.forEach(function(e){n.prototype[e]=function(){return this.models[e].apply(this.models,arguments)}}),n.prototype.each=n.prototype.forEach,n.extend=r,t.exports=n},{"ampersand-class-extend":47,"ampersand-events":48,"lodash.assign":64,"lodash.bind":74,"lodash.isarray":80}],47:[function(e,t){var n=e("lodash.assign"),i=function(e){var t,i=this,r=[].slice.call(arguments);t=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return i.apply(this,arguments)},n(t,i);var o=function(){this.constructor=t};return o.prototype=i.prototype,t.prototype=new o,e&&(r.unshift(t.prototype),n.apply(null,r)),t.__super__=i.prototype,t};t.exports=i},{"lodash.assign":64}],48:[function(e,t){"undefined"!=typeof window&&(window.ampersand=window.ampersand||{},window.ampersand["ampersand-events"]=window.ampersand["ampersand-events"]||[],window.ampersand["ampersand-events"].push("1.1.1"));var n=e("lodash.once"),i=e("lodash.uniqueid"),r=e("lodash.keys"),o=e("lodash.isempty"),a=e("lodash.foreach"),s=(e("lodash.bind"),e("lodash.assign")),u=Array.prototype.slice,c=/\s+/,l={on:function(e,t,n){if(!h(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var i=this._events[e]||(this._events[e]=[]);return i.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,i){if(!h(this,"once",e,[t,i])||!t)return this;var r=this,o=n(function(){r.off(e,o),t.apply(this,arguments)});return o._callback=t,this.on(e,o,i)},off:function(e,t,n){var i,o,a,s,u,c,l,f;if(!this._events||!h(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events=void 0,this;for(s=e?[e]:r(this._events),u=0,c=s.length;c>u;u++)if(e=s[u],a=this._events[e]){if(this._events[e]=i=[],t||n)for(l=0,f=a.length;f>l;l++)o=a[l],(t&&t!==o.callback&&t!==o.callback._callback||n&&n!==o.context)&&i.push(o);i.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=u.call(arguments,1);if(!h(this,"trigger",e,t))return this;var n=this._events[e],i=this._events.all;return n&&f(n,t),i&&f(i,arguments),this},stopListening:function(e,t,n){var i=this._listeningTo;if(!i)return this;var r=!t&&!n;n||"object"!=typeof t||(n=this),e&&((i={})[e._listenId]=e);for(var a in i)e=i[a],e.off(t,n,this),(r||o(e._events))&&delete this._listeningTo[a];return this},createEmitter:function(e){return s(e||{},l)}};l.bind=l.on,l.unbind=l.off;var h=function(e,t,n,i){if(!n)return!0;if("object"==typeof n){for(var r in n)e[t].apply(e,[r,n[r]].concat(i));return!1}if(c.test(n)){for(var o=n.split(c),a=0,s=o.length;s>a;a++)e[t].apply(e,[o[a]].concat(i));return!1}return!0},f=function(e,t){var n,i=-1,r=e.length,o=t[0],a=t[1],s=t[2];switch(t.length){case 0:for(;++i<r;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o);return;case 2:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o,a);return;case 3:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o,a,s);return;default:for(;++i<r;)(n=e[i]).callback.apply(n.ctx,t);return}},p={listenTo:"on",listenToOnce:"once"};a(p,function(e,t){l[t]=function(t,n,r){var o=this._listeningTo||(this._listeningTo={}),a=t._listenId||(t._listenId=i("l"));return o[a]=t,r||"object"!=typeof n||(r=this),t[e](n,r,this),this}}),l.listenToAndRun=function(e,t,n){return l.listenTo.apply(this,arguments),n||"object"!=typeof t||(n=this),n.apply(this),this},t.exports=l},{"lodash.assign":64,"lodash.bind":74,"lodash.foreach":49,"lodash.isempty":53,"lodash.keys":57,"lodash.once":60,"lodash.uniqueid":62}],49:[function(e,t){function n(e,t){return function(n,i,r){return"function"==typeof i&&void 0===r&&a(n)?e(n,i):t(n,o(i,r,3))}}var i=e("lodash._arrayeach"),r=e("lodash._baseeach"),o=e("lodash._bindcallback"),a=e("lodash.isarray"),s=n(i,r);t.exports=s},{"lodash._arrayeach":50,"lodash._baseeach":51,"lodash._bindcallback":52,"lodash.isarray":80}],50:[function(e,t){function n(e,t){for(var n=-1,i=e.length;++n<i&&t(e[n],n,e)!==!1;);return e}t.exports=n},{}],51:[function(e,t){function n(e,t){return f(e,t,c)}function i(e){return function(t){return null==t?void 0:t[e]}}function r(e,t){return function(n,i){var r=n?p(n):0;if(!a(r))return e(n,i);for(var o=t?r:-1,u=s(n);(t?o--:++o<r)&&i(u[o],o,u)!==!1;);return n}}function o(e){return function(t,n,i){for(var r=s(t),o=i(t),a=o.length,u=e?a:-1;e?u--:++u<a;){var c=o[u];if(n(r[c],c,r)===!1)break}return t}}function a(e){return"number"==typeof e&&e>-1&&e%1==0&&l>=e}function s(e){return u(e)?e:Object(e)}function u(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var c=e("lodash.keys"),l=9007199254740991,h=r(n),f=o(),p=i("length");t.exports=h},{"lodash.keys":57}],52:[function(e,t){function n(e,t,n){if("function"!=typeof e)return i;if(void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,i,r){return e.call(t,n,i,r)};case 4:return function(n,i,r,o){return e.call(t,n,i,r,o)};case 5:return function(n,i,r,o,a){return e.call(t,n,i,r,o,a)}}return function(){return e.apply(t,arguments)}}function i(e){return e}t.exports=n},{}],53:[function(e,t){function n(e){return!!e&&"object"==typeof e}function i(e){return function(t){return null==t?void 0:t[e]}}function r(e){return null!=e&&o(p(e))}function o(e){return"number"==typeof e&&e>-1&&e%1==0&&f>=e}function a(e){return null==e?!0:r(e)&&(u(e)||l(e)||s(e)||n(e)&&c(e.splice))?!e.length:!h(e).length}var s=e("lodash.isarguments"),u=e("lodash.isarray"),c=e("lodash.isfunction"),l=e("lodash.isstring"),h=e("lodash.keys"),f=9007199254740991,p=i("length");t.exports=a},{"lodash.isarguments":54,"lodash.isarray":80,"lodash.isfunction":55,"lodash.isstring":56,"lodash.keys":57}],54:[function(e,t){function n(e){return!!e&&"object"==typeof e}function i(e){return function(t){return null==t?void 0:t[e]}}function r(e){return null!=e&&o(h(e))}function o(e){return"number"==typeof e&&e>-1&&e%1==0&&l>=e}function a(e){return n(e)&&r(e)&&u.call(e,"callee")&&!c.call(e,"callee")}var s=Object.prototype,u=s.hasOwnProperty,c=s.propertyIsEnumerable,l=9007199254740991,h=i("length");t.exports=a},{}],55:[function(e,t){function n(e){return i(e)&&a.call(e)==r}function i(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var r="[object Function]",o=Object.prototype,a=o.toString;t.exports=n},{}],56:[function(e,t){function n(e){return!!e&&"object"==typeof e}function i(e){return"string"==typeof e||n(e)&&a.call(e)==r}var r="[object String]",o=Object.prototype,a=o.toString;t.exports=i},{}],57:[function(e,t){function n(e){return function(t){return null==t?void 0:t[e]}}function i(e){return null!=e&&o(m(e))}function r(e,t){return e="number"==typeof e||f.test(e)?+e:-1,t=null==t?v:t,e>-1&&e%1==0&&t>e}function o(e){return"number"==typeof e&&e>-1&&e%1==0&&v>=e}function a(e){for(var t=u(e),n=t.length,i=n&&e.length,a=!!i&&o(i)&&(h(e)||l(e)),s=-1,c=[];++s<n;){var f=t[s];(a&&r(f,i)||d.call(e,f))&&c.push(f)}return c}function s(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function u(e){if(null==e)return[];s(e)||(e=Object(e));var t=e.length;t=t&&o(t)&&(h(e)||l(e))&&t||0;for(var n=e.constructor,i=-1,a="function"==typeof n&&n.prototype===e,u=Array(t),c=t>0;++i<t;)u[i]=i+"";for(var f in e)c&&r(f,t)||"constructor"==f&&(a||!d.call(e,f))||u.push(f);return u}var c=e("lodash._getnative"),l=e("lodash.isarguments"),h=e("lodash.isarray"),f=/^\d+$/,p=Object.prototype,d=p.hasOwnProperty,g=c(Object,"keys"),v=9007199254740991,m=n("length"),y=g?function(e){var t=null==e?void 0:e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&i(e)?a(e):s(e)?g(e):[]}:a;t.exports=y},{"lodash._getnative":58,"lodash.isarguments":59,"lodash.isarray":80}],58:[function(e,t){function n(e){return!!e&&"object"==typeof e}function i(e,t){var n=null==e?void 0:e[t];return a(n)?n:void 0}function r(e){return o(e)&&f.call(e)==s}function o(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function a(e){return null==e?!1:r(e)?p.test(l.call(e)):n(e)&&u.test(e)}var s="[object Function]",u=/^\[object .+?Constructor\]$/,c=Object.prototype,l=Function.prototype.toString,h=c.hasOwnProperty,f=c.toString,p=RegExp("^"+l.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=i},{}],59:[function(e,t,n){arguments[4][54][0].apply(n,arguments)},{dup:54}],60:[function(e,t){function n(e){return i(2,e)}var i=e("lodash.before");t.exports=n},{"lodash.before":61}],61:[function(e,t){function n(e,t){var n;if("function"!=typeof t){if("function"!=typeof e)throw new TypeError(i);var r=e;e=t,t=r}return function(){return--e>0&&(n=t.apply(this,arguments)),1>=e&&(t=void 0),n}}var i="Expected a function";t.exports=n},{}],62:[function(e,t){function n(e){var t=++r;return i(e)+t}var i=e("lodash._basetostring"),r=0;t.exports=n},{"lodash._basetostring":63}],63:[function(e,t){function n(e){return null==e?"":e+""}t.exports=n},{}],64:[function(e,t){function n(e,t,n){for(var i=-1,r=o(t),a=r.length;++i<a;){var s=r[i],u=e[s],c=n(u,t[s],s,e,t);(c===c?c===u:u!==u)&&(void 0!==u||s in e)||(e[s]=c)}return e}var i=e("lodash._baseassign"),r=e("lodash._createassigner"),o=e("lodash.keys"),a=r(function(e,t,r){return r?n(e,t,r):i(e,t)});t.exports=a},{"lodash._baseassign":65,"lodash._createassigner":67,"lodash.keys":71}],65:[function(e,t){function n(e,t){return null==t?e:i(t,r(t),e)}var i=e("lodash._basecopy"),r=e("lodash.keys");t.exports=n},{"lodash._basecopy":66,"lodash.keys":71}],66:[function(e,t){function n(e,t,n){n||(n={});for(var i=-1,r=t.length;++i<r;){var o=t[i];n[o]=e[o]}return n}t.exports=n},{}],67:[function(e,t){function n(e){return o(function(t,n){var o=-1,a=null==t?0:n.length,s=a>2?n[a-2]:void 0,u=a>2?n[2]:void 0,c=a>1?n[a-1]:void 0;for("function"==typeof s?(s=i(s,c,5),a-=2):(s="function"==typeof c?c:void 0,a-=s?1:0),u&&r(n[0],n[1],u)&&(s=3>a?void 0:s,a=1);++o<a;){var l=n[o];l&&e(t,l,s)}return t})}var i=e("lodash._bindcallback"),r=e("lodash._isiterateecall"),o=e("lodash.restparam");t.exports=n},{"lodash._bindcallback":68,"lodash._isiterateecall":69,"lodash.restparam":70}],68:[function(e,t,n){arguments[4][52][0].apply(n,arguments)},{dup:52}],69:[function(e,t){function n(e){return function(t){return null==t?void 0:t[e]}}function i(e){return null!=e&&a(l(e))}function r(e,t){return e="number"==typeof e||u.test(e)?+e:-1,t=null==t?c:t,e>-1&&e%1==0&&t>e}function o(e,t,n){if(!s(n))return!1;var o=typeof t;if("number"==o?i(n)&&r(t,n.length):"string"==o&&t in n){var a=n[t];return e===e?e===a:a!==a}return!1}function a(e){return"number"==typeof e&&e>-1&&e%1==0&&c>=e}function s(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var u=/^\d+$/,c=9007199254740991,l=n("length");t.exports=o},{}],70:[function(e,t){function n(e,t){if("function"!=typeof e)throw new TypeError(i);return t=r(void 0===t?e.length-1:+t||0,0),function(){for(var n=arguments,i=-1,o=r(n.length-t,0),a=Array(o);++i<o;)a[i]=n[t+i];

switch(t){case 0:return e.call(this,a);case 1:return e.call(this,n[0],a);case 2:return e.call(this,n[0],n[1],a)}var s=Array(t+1);for(i=-1;++i<t;)s[i]=n[i];return s[t]=a,e.apply(this,s)}}var i="Expected a function",r=Math.max;t.exports=n},{}],71:[function(e,t,n){arguments[4][57][0].apply(n,arguments)},{dup:57,"lodash._getnative":72,"lodash.isarguments":73,"lodash.isarray":80}],72:[function(e,t,n){arguments[4][58][0].apply(n,arguments)},{dup:58}],73:[function(e,t,n){arguments[4][54][0].apply(n,arguments)},{dup:54}],74:[function(e,t){var n=e("lodash._createwrapper"),i=e("lodash._replaceholders"),r=e("lodash.restparam"),o=1,a=32,s=r(function(e,t,r){var u=o;if(r.length){var c=i(r,s.placeholder);u|=a}return n(e,u,t,r,c)});s.placeholder={},t.exports=s},{"lodash._createwrapper":75,"lodash._replaceholders":78,"lodash.restparam":79}],75:[function(e,t){(function(n){function i(e,t,n){for(var i=n.length,r=-1,o=P(e.length-i,0),a=-1,s=t.length,u=Array(s+o);++a<s;)u[a]=t[a];for(;++r<i;)u[n[r]]=e[r];for(;o--;)u[a++]=e[r++];return u}function r(e,t,n){for(var i=-1,r=n.length,o=-1,a=P(e.length-r,0),s=-1,u=t.length,c=Array(a+u);++o<a;)c[o]=e[o];for(var l=o;++s<u;)c[l+s]=t[s];for(;++i<r;)c[l+n[i]]=e[o++];return c}function o(e,t){function i(){var o=this&&this!==n&&this instanceof i?r:e;return o.apply(t,arguments)}var r=a(e);return i}function a(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=d(e.prototype),i=e.apply(n,t);return f(i)?i:n}}function s(e,t,o,u,c,l,f,d,E,R){function T(){for(var y=arguments.length,b=y,_=Array(y);b--;)_[b]=arguments[b];if(u&&(_=i(_,u,c)),l&&(_=r(_,l,f)),A||C){var k=T.placeholder,M=g(_,k);if(y-=M.length,R>y){var I=d?p(d):void 0,q=P(R-y,0),B=A?M:void 0,D=A?void 0:M,F=A?_:void 0,G=A?void 0:_;t|=A?w:x,t&=~(A?x:w),N||(t&=~(v|m));var U=s(e,t,o,F,B,G,D,I,E,q);return U.placeholder=k,U}}var z=S?o:this,W=L?z[e]:e;return d&&(_=h(_,d)),j&&E<_.length&&(_.length=E),this&&this!==n&&this instanceof T&&(W=O||a(e)),W.apply(z,_)}var j=t&k,S=t&v,L=t&m,A=t&b,N=t&y,C=t&_,O=L?void 0:a(e);return T}function u(e,t,i,r){function o(){for(var t=-1,a=arguments.length,c=-1,l=r.length,h=Array(l+a);++c<l;)h[c]=r[c];for(;a--;)h[c++]=arguments[++t];var f=this&&this!==n&&this instanceof o?u:e;return f.apply(s?i:this,h)}var s=t&v,u=a(e);return o}function c(e,t,n,i,r,a,c,l){var h=t&m;if(!h&&"function"!=typeof e)throw new TypeError(E);var f=i?i.length:0;if(f||(t&=~(w|x),i=r=void 0),f-=r?r.length:0,t&x){var p=i,d=r;i=r=void 0}var g=[e,t,n,i,r,p,d,a,c,l];if(g[9]=null==l?h?0:e.length:P(l-f,0)||0,t==v)var y=o(g[0],g[2]);else y=t!=w&&t!=(v|w)||g[4].length?s.apply(void 0,g):u.apply(void 0,g);return y}function l(e,t){return e="number"==typeof e||R.test(e)?+e:-1,t=null==t?j:t,e>-1&&e%1==0&&t>e}function h(e,t){for(var n=e.length,i=T(t.length,n),r=p(e);i--;){var o=t[i];e[i]=l(o,n)?r[o]:void 0}return e}function f(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var p=e("lodash._arraycopy"),d=e("lodash._basecreate"),g=e("lodash._replaceholders"),v=1,m=2,y=4,b=8,_=16,w=32,x=64,k=128,E="Expected a function",R=/^\d+$/,P=Math.max,T=Math.min,j=9007199254740991;t.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"lodash._arraycopy":76,"lodash._basecreate":77,"lodash._replaceholders":78}],76:[function(e,t){function n(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}t.exports=n},{}],77:[function(e,t){function n(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var i=function(){function e(){}return function(t){if(n(t)){e.prototype=t;var i=new e;e.prototype=void 0}return i||{}}}();t.exports=i},{}],78:[function(e,t){function n(e,t){for(var n=-1,r=e.length,o=-1,a=[];++n<r;)e[n]===t&&(e[n]=i,a[++o]=n);return a}var i="__lodash_placeholder__";t.exports=n},{}],79:[function(e,t,n){arguments[4][70][0].apply(n,arguments)},{dup:70}],80:[function(e,t){function n(e){return!!e&&"object"==typeof e}function i(e,t){var n=null==e?void 0:e[t];return s(n)?n:void 0}function r(e){return"number"==typeof e&&e>-1&&e%1==0&&m>=e}function o(e){return a(e)&&d.call(e)==c}function a(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function s(e){return null==e?!1:o(e)?g.test(f.call(e)):n(e)&&l.test(e)}var u="[object Array]",c="[object Function]",l=/^\[object .+?Constructor\]$/,h=Object.prototype,f=Function.prototype.toString,p=h.hasOwnProperty,d=h.toString,g=RegExp("^"+f.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),v=i(Array,"isArray"),m=9007199254740991,y=v||function(e){return n(e)&&r(e.length)&&d.call(e)==u};t.exports=y},{}],81:[function(e,t){function n(e,t){t||(t={}),this.cid||(this.cid=a("state")),this._events={},this._values={},this._definition=Object.create(this._definition),t.parse&&(e=this.parse(e,t)),this.parent=t.parent,this.collection=t.collection,this._keyTree=new S,this._initCollections(),this._initChildren(),this._cache={},this._previousAttributes={},e&&this.set(e,s({silent:!0,initial:!0},t)),this._changed={},this._derived&&this._initDerived(),t.init!==!1&&this.initialize.apply(this,arguments)}function i(e,t,n,i){var r,o,a=e._definition[t]={};if(f(n))r=e._ensureValidType(n),r&&(a.type=r);else{if(d(n)&&(o=n,n={type:o[0],required:o[1],default:o[2]}),r=e._ensureValidType(n.type),r&&(a.type=r),n.required&&(a.required=!0),n.default&&"object"==typeof n.default)throw new TypeError("The default value for "+t+" cannot be an object/array, must be a value or a function which returns a value/object/array");a.default=n.default,a.allowNull=n.allowNull?n.allowNull:!1,n.setOnce&&(a.setOnce=!0),a.required&&v(a.default)&&!a.setOnce&&(a.default=e._getDefaultForType(r)),a.test=n.test,a.values=n.values}return i&&(a.session=!0),Object.defineProperty(e,t,{set:function(e){this.set(t,e)},get:function(){var e=this._values[t],n=this._dataTypes[a.type];return"undefined"!=typeof e?(n&&n.get&&(e=n.get(e)),e):(e=k(a,"default"),this._values[t]=e,e)}}),a}function r(e,t,n){var i=e._derived[t]={fn:m(n)?n:n.fn,cache:n.cache!==!1,depList:n.deps||[]};l(i.depList,function(n){e._deps[n]=T(e._deps[n]||[],[t])}),Object.defineProperty(e,t,{get:function(){return this._getDerivedProperty(t)},set:function(){throw new TypeError('"'+t+"\" is a derived property, it can't be set directly.")}})}function o(e){var t,n=this,o=[].slice.call(arguments);t=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return n.apply(this,arguments)},s(t,n);var a=function(){this.constructor=t};if(a.prototype=n.prototype,t.prototype=new a,t.prototype._derived=s({},n.prototype._derived),t.prototype._deps=s({},n.prototype._deps),t.prototype._definition=s({},n.prototype._definition),t.prototype._collections=s({},n.prototype._collections),t.prototype._children=s({},n.prototype._children),t.prototype._dataTypes=s({},n.prototype._dataTypes||N),e){var c=["dataTypes","props","session","derived","collections","children"];o.forEach(function(e){e.dataTypes&&l(e.dataTypes,function(e,n){t.prototype._dataTypes[n]=e}),e.props&&l(e.props,function(e,n){i(t.prototype,n,e)}),e.session&&l(e.session,function(e,n){i(t.prototype,n,e,!0)}),e.derived&&l(e.derived,function(e,n){r(t.prototype,n,e)}),e.collections&&l(e.collections,function(e,n){t.prototype._collections[n]=e}),e.children&&l(e.children,function(e,n){t.prototype._children[n]=e}),s(t.prototype,u(e,c))})}return t.__super__=n.prototype,t}"undefined"!=typeof window&&(window.ampersand=window.ampersand||{},window.ampersand["ampersand-state"]=window.ampersand["ampersand-state"]||[],window.ampersand["ampersand-state"].push("4.5.3"));var a=e("lodash.uniqueid"),s=e("lodash.assign"),u=e("lodash.omit"),c=e("lodash.escape"),l=e("lodash.foreach"),h=e("lodash.includes"),f=e("lodash.isstring"),p=e("lodash.isobject"),d=e("lodash.isarray"),g=e("lodash.isdate"),v=e("lodash.isundefined"),m=e("lodash.isfunction"),y=e("lodash.isnull"),b=e("lodash.isempty"),_=e("lodash.isequal"),w=e("lodash.clone"),x=e("lodash.has"),k=e("lodash.result"),E=e("lodash.keys"),R=e("lodash.bind"),P=e("lodash.defaults"),T=e("lodash.union"),j=e("ampersand-events"),S=e("key-tree-store"),L=e("array-next"),A=/^change:/;s(n.prototype,j,{extraProperties:"ignore",idAttribute:"id",namespaceAttribute:"namespace",typeAttribute:"modelType",initialize:function(){return this},getId:function(){return this[this.idAttribute]},getNamespace:function(){return this[this.namespaceAttribute]},getType:function(){return this[this.typeAttribute]},isNew:function(){return null==this.getId()},escape:function(e){return c(this.get(e))},isValid:function(e){return this._validate({},s(e||{},{validate:!0}))},parse:function(e){return e},serialize:function(){var e=this.getAttributes({props:!0},!0);return l(this._children,function(t,n){e[n]=this[n].serialize()},this),l(this._collections,function(t,n){e[n]=this[n].serialize()},this),e},set:function(e,t,n){var i,r,o,a,s,u,c,f,d,g,m,b,_,w,x,k,E=this,R=this.extraProperties;if(p(e)||null===e?(d=e,n=t):(d={},d[e]=t),n=n||{},!this._validate(d,n))return!1;b=n.unset,m=n.silent,w=n.initial,r=[],i=this._changing,this._changing=!0,i||(this._previousAttributes=this.attributes,this._changed={});for(f in d){if(a=d[f],o=typeof a,_=this._values[f],s=this._definition[f],!s){if(this._children[f]||this._collections[f]){this[f].set(a,n);continue}if("ignore"===R)continue;if("reject"===R)throw new TypeError('No "'+f+'" property defined on '+(this.type||"this")+' model and extraProperties not set to "ignore" or "allow"');if("allow"===R)s=this._createPropertyDefinition(f,"any");else if(R)throw new TypeError('Invalid value for extraProperties: "'+R+'"')}if(k=this._getCompareForType(s.type),g=this._dataTypes[s.type],g&&g.set&&(u=g.set(a),a=u.val,o=u.type),s.test&&(c=s.test.call(this,a,o)))throw new TypeError("Property '"+f+"' failed validation with error: "+c);if(v(a)&&s.required)throw new TypeError("Required property '"+f+"' must be of type "+s.type+". Tried to set "+a);if(y(a)&&s.required&&!s.allowNull)throw new TypeError("Property '"+f+"' must be of type "+s.type+" (cannot be null). Tried to set "+a);if(s.type&&"any"!==s.type&&s.type!==o&&!y(a)&&!v(a))throw new TypeError("Property '"+f+"' must be of type "+s.type+". Tried to set "+a);if(s.values&&!h(s.values,a))throw new TypeError("Property '"+f+"' must be one of values: "+s.values.join(", ")+". Tried to set "+a);if(x=!k(_,a,f),s.setOnce&&void 0!==_&&x&&!w)throw new TypeError("Property '"+f+"' can only be set once.");x?(r.push({prev:_,val:a,key:f}),E._changed[f]=a):delete E._changed[f]}if(l(r,function(e){E._previousAttributes[e.key]=e.prev,b?delete E._values[e.key]:E._values[e.key]=e.val}),!m&&r.length&&(E._pending=!0),m||l(r,function(e){E.trigger("change:"+e.key,E,e.val,n)}),i)return this;if(!m)for(;this._pending;)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},get:function(e){return this[e]},toggle:function(e){var t=this._definition[e];if("boolean"===t.type)this[e]=!this[e];else{if(!t||!t.values)throw new TypeError("Can only toggle properties that are type `boolean` or have `values` array.");this[e]=L(t.values,this[e])}return this},previousAttributes:function(){return w(this._previousAttributes)},hasChanged:function(e){return null==e?!b(this._changed):x(this._changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?w(this._changed):!1;var t,n,i,r=!1,o=this._changing?this._previousAttributes:this.attributes;for(var a in e)n=this._definition[a],n&&(i=this._getCompareForType(n.type),i(o[a],t=e[a])||((r||(r={}))[a]=t));return r},toJSON:function(){return this.serialize()},unset:function(e,t){e=Array.isArray(e)?e:[e],l(e,function(e){var n,i=this._definition[e];return i.required?(n=k(i,"default"),this.set(e,n,t)):this.set(e,n,s({},t,{unset:!0}))},this)},clear:function(e){var t=this;return l(E(this.attributes),function(n){t.unset(n,e)}),this},previous:function(e){return null!=e&&Object.keys(this._previousAttributes).length?this._previousAttributes[e]:null},_getDefaultForType:function(e){var t=this._dataTypes[e];return t&&t.default},_getCompareForType:function(e){var t=this._dataTypes[e];return t&&t.compare?R(t.compare,this):_},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=s({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return n?(this.trigger("invalid",this,n,s(t||{},{validationError:n})),!1):!0},_createPropertyDefinition:function(e,t,n){return i(this,e,t,n)},_ensureValidType:function(e){return h(["string","number","boolean","array","object","date","any"].concat(E(this._dataTypes)),e)?e:void 0},getAttributes:function(e,t){e||(e={}),P(e,{session:!1,props:!1,derived:!1});var n,i,r,o={};for(i in this._definition)r=this._definition[i],(e.session&&r.session||e.props&&!r.session)&&(n=t?this._values[i]:this[i],"undefined"==typeof n&&(n=k(r,"default")),"undefined"!=typeof n&&(o[i]=n));if(e.derived)for(i in this._derived)o[i]=this[i];return o},_initDerived:function(){var e=this;l(this._derived,function(t,n){var i=e._derived[n];i.deps=i.depList;var r=function(t){t=t||{};var r=i.fn.call(e);e._cache[n]===r&&i.cache||(i.cache&&(e._previousAttributes[n]=e._cache[n]),e._cache[n]=r,e.trigger("change:"+n,e,e._cache[n]))};i.deps.forEach(function(t){e._keyTree.add(t,r)})}),this.on("all",function(t){A.test(t)&&e._keyTree.get(t.split(":")[1]).forEach(function(e){e()})},this)},_getDerivedProperty:function(e,t){return this._derived[e].cache?((t||!this._cache.hasOwnProperty(e))&&(this._cache[e]=this._derived[e].fn.apply(this)),this._cache[e]):this._derived[e].fn.apply(this)},_initCollections:function(){var e;if(this._collections)for(e in this._collections)this[e]=new this._collections[e](null,{parent:this})},_initChildren:function(){var e;if(this._children)for(e in this._children)this[e]=new this._children[e]({},{parent:this}),this.listenTo(this[e],"all",this._getEventBubblingHandler(e))},_getEventBubblingHandler:function(e){return R(function(t,n,i){A.test(t)?this.trigger("change:"+e+"."+t.split(":")[1],n,i):"change"===t&&this.trigger("change",this)},this)},_verifyRequired:function(){var e=this.attributes;for(var t in this._definition)if(this._definition[t].required&&"undefined"==typeof e[t])return!1;return!0}}),Object.defineProperties(n.prototype,{attributes:{get:function(){return this.getAttributes({props:!0,session:!0})}},all:{get:function(){return this.getAttributes({session:!0,props:!0,derived:!0})}},isState:{get:function(){return!0},set:function(){}}});var N={string:{default:function(){return""}},date:{set:function(e){var t;if(null==e)t="object";else if(g(e))t="date",e=e.valueOf();else try{var n=new Date(e).valueOf();if(isNaN(n)&&(n=new Date(parseInt(e,10)).valueOf(),isNaN(n)))throw TypeError;e=n,t="date"}catch(n){t=typeof e}return{val:e,type:t}},get:function(e){return null==e?e:new Date(e)},default:function(){return new Date}},array:{set:function(e){return{val:e,type:d(e)?"array":typeof e}},default:function(){return[]}},object:{set:function(e){var t=typeof e;return"object"!==t&&v(e)&&(e=null,t="object"),{val:e,type:t}},default:function(){return{}}},state:{set:function(e){var t=e instanceof n||e&&e.isState;return t?{val:e,type:"state"}:{val:e,type:typeof e}},compare:function(e,t,n){var i=e===t;return i||(e&&this.stopListening(e),null!=t&&this.listenTo(t,"all",this._getEventBubblingHandler(n))),i}}};n.extend=o,t.exports=n},{"ampersand-events":82,"array-next":85,"key-tree-store":86,"lodash.assign":87,"lodash.bind":94,"lodash.clone":100,"lodash.defaults":109,"lodash.escape":111,"lodash.foreach":113,"lodash.has":117,"lodash.includes":122,"lodash.isarray":126,"lodash.isdate":127,"lodash.isempty":128,"lodash.isequal":130,"lodash.isfunction":134,"lodash.isnull":135,"lodash.isobject":136,"lodash.isstring":137,"lodash.isundefined":138,"lodash.keys":139,"lodash.omit":142,"lodash.result":158,"lodash.union":162,"lodash.uniqueid":171}],82:[function(e,t,n){arguments[4][48][0].apply(n,arguments)},{dup:48,"lodash.assign":87,"lodash.bind":94,"lodash.foreach":113,"lodash.isempty":128,"lodash.keys":139,"lodash.once":83,"lodash.uniqueid":171}],83:[function(e,t,n){arguments[4][60][0].apply(n,arguments)},{dup:60,"lodash.before":84}],84:[function(e,t,n){arguments[4][61][0].apply(n,arguments)},{dup:61}],85:[function(e,t){t.exports=function(e,t){var n=e.length,i=e.indexOf(t)+1;return i>n-1&&(i=0),e[i]}},{}],86:[function(e,t){function n(e){if(e=e||{},"object"!=typeof e)throw new TypeError("Options must be an object");var t=".";this.storage={},this.separator=e.separator||t}var i=Array.prototype.slice;n.prototype.add=function(e,t){var n=this.storage[e]||(this.storage[e]=[]);n.push(t)},n.prototype.remove=function(e){var t,n;for(t in this.storage)n=this.storage[t],n.some(function(t,i){return t===e?(n.splice(i,1),!0):void 0})},n.prototype.get=function(e){var t,n=[];for(t in this.storage)e&&e!==t&&0!==t.indexOf(e+this.separator)||(n=n.concat(this.storage[t]));return n},n.prototype.getGrouped=function(e){var t,n={};for(t in this.storage)e&&e!==t&&0!==t.indexOf(e+this.separator)||(n[t]=i.call(this.storage[t]));return n},n.prototype.getAll=function(e){var t,n={};for(t in this.storage)(e===t||0===t.indexOf(e+this.separator))&&(n[t]=i.call(this.storage[t]));return n},n.prototype.run=function(e,t){var n=i.call(arguments,2);this.get(e).forEach(function(e){e.apply(t||this,n)})},t.exports=n},{}],87:[function(e,t,n){arguments[4][64][0].apply(n,arguments)},{dup:64,"lodash._baseassign":88,"lodash._createassigner":90,"lodash.keys":139}],88:[function(e,t,n){arguments[4][65][0].apply(n,arguments)},{dup:65,"lodash._basecopy":89,"lodash.keys":139}],89:[function(e,t,n){arguments[4][66][0].apply(n,arguments)},{dup:66}],90:[function(e,t,n){arguments[4][67][0].apply(n,arguments)},{dup:67,"lodash._bindcallback":91,"lodash._isiterateecall":92,"lodash.restparam":93}],91:[function(e,t,n){arguments[4][52][0].apply(n,arguments)},{dup:52}],92:[function(e,t,n){arguments[4][69][0].apply(n,arguments)},{dup:69}],93:[function(e,t,n){arguments[4][70][0].apply(n,arguments)},{dup:70}],94:[function(e,t,n){arguments[4][74][0].apply(n,arguments)},{dup:74,"lodash._createwrapper":95,"lodash._replaceholders":98,"lodash.restparam":99}],95:[function(e,t,n){arguments[4][75][0].apply(n,arguments)},{dup:75,"lodash._arraycopy":96,"lodash._basecreate":97,"lodash._replaceholders":98}],96:[function(e,t,n){arguments[4][76][0].apply(n,arguments)},{dup:76}],97:[function(e,t,n){arguments[4][77][0].apply(n,arguments)},{dup:77}],98:[function(e,t,n){arguments[4][78][0].apply(n,arguments)},{dup:78}],99:[function(e,t,n){arguments[4][70][0].apply(n,arguments)},{dup:70}],100:[function(e,t){function n(e,t,n,a){return t&&"boolean"!=typeof t&&o(e,t,n)?t=!1:"function"==typeof t&&(a=n,n=t,t=!1),"function"==typeof n?i(e,t,r(n,a,3)):i(e,t)}var i=e("lodash._baseclone"),r=e("lodash._bindcallback"),o=e("lodash._isiterateecall");t.exports=n},{"lodash._baseclone":101,"lodash._bindcallback":107,"lodash._isiterateecall":108}],101:[function(e,t){(function(n){function i(e,t,n,o,p,g,m){var y;if(n&&(y=p?n(e,o,p):n(e)),void 0!==y)return y;if(!c(e))return e;var b=d(e);if(b){if(y=a(e),!t)return l(e,y)}else{var _=z.call(e),x=_==w;if(_!=E&&_!=v&&(!x||p))return F[_]?u(e,_,t):p?e:{};if(y=s(x?{}:e),!t)return f(y,e)}g||(g=[]),m||(m=[]);for(var k=g.length;k--;)if(g[k]==e)return m[k];return g.push(e),m.push(y),(b?h:r)(e,function(r,o){y[o]=i(r,t,n,o,e,g,m)}),y}function r(e,t){return p(e,t,g)}function o(e){var t=new W(e.byteLength),n=new Y(t);return n.set(new Y(e)),t}function a(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&U.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function s(e){var t=e.constructor;return"function"==typeof t&&t instanceof t||(t=Object),new t}function u(e,t,n){var i=e.constructor;switch(t){case S:return o(e);case y:case b:return new i(+e);case L:case A:case N:case C:case O:case M:case I:case q:case B:var r=e.buffer;return new i(n?o(r):r,e.byteOffset,e.length);case k:case T:return new i(e);case R:var a=new i(e.source,D.exec(e));a.lastIndex=e.lastIndex}return a}function c(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var l=e("lodash._arraycopy"),h=e("lodash._arrayeach"),f=e("lodash._baseassign"),p=e("lodash._basefor"),d=e("lodash.isarray"),g=e("lodash.keys"),v="[object Arguments]",m="[object Array]",y="[object Boolean]",b="[object Date]",_="[object Error]",w="[object Function]",x="[object Map]",k="[object Number]",E="[object Object]",R="[object RegExp]",P="[object Set]",T="[object String]",j="[object WeakMap]",S="[object ArrayBuffer]",L="[object Float32Array]",A="[object Float64Array]",N="[object Int8Array]",C="[object Int16Array]",O="[object Int32Array]",M="[object Uint8Array]",I="[object Uint8ClampedArray]",q="[object Uint16Array]",B="[object Uint32Array]",D=/\w*$/,F={};F[v]=F[m]=F[S]=F[y]=F[b]=F[L]=F[A]=F[N]=F[C]=F[O]=F[k]=F[E]=F[R]=F[T]=F[M]=F[I]=F[q]=F[B]=!0,F[_]=F[w]=F[x]=F[P]=F[j]=!1;var G=Object.prototype,U=G.hasOwnProperty,z=G.toString,W=n.ArrayBuffer,Y=n.Uint8Array;t.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"lodash._arraycopy":102,"lodash._arrayeach":103,"lodash._baseassign":104,"lodash._basefor":106,"lodash.isarray":126,"lodash.keys":139}],102:[function(e,t,n){arguments[4][76][0].apply(n,arguments)},{dup:76}],103:[function(e,t,n){arguments[4][50][0].apply(n,arguments)},{dup:50}],104:[function(e,t,n){arguments[4][65][0].apply(n,arguments)},{dup:65,"lodash._basecopy":105,"lodash.keys":139}],105:[function(e,t,n){arguments[4][66][0].apply(n,arguments)},{dup:66}],106:[function(e,t){function n(e){return function(t,n,r){for(var o=i(t),a=r(t),s=a.length,u=e?s:-1;e?u--:++u<s;){var c=a[u];if(n(o[c],c,o)===!1)break}return t}}function i(e){return r(e)?e:Object(e)}function r(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var o=n();t.exports=o},{}],107:[function(e,t,n){arguments[4][52][0].apply(n,arguments)},{dup:52}],108:[function(e,t,n){arguments[4][69][0].apply(n,arguments)},{dup:69}],109:[function(e,t){function n(e,t){return void 0===e?t:e}function i(e,t){return o(function(n){var i=n[0];return null==i?i:(n.push(t),e.apply(void 0,n))})}var r=e("lodash.assign"),o=e("lodash.restparam"),a=i(r,n);t.exports=a},{"lodash.assign":87,"lodash.restparam":110}],110:[function(e,t,n){arguments[4][70][0].apply(n,arguments)},{dup:70}],111:[function(e,t){function n(e){return s[e]}function i(e){return e=r(e),e&&a.test(e)?e.replace(o,n):e}var r=e("lodash._basetostring"),o=/[&<>"'`]/g,a=RegExp(o.source),s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"};t.exports=i},{"lodash._basetostring":112}],112:[function(e,t,n){arguments[4][63][0].apply(n,arguments)},{dup:63}],113:[function(e,t,n){arguments[4][49][0].apply(n,arguments)},{dup:49,"lodash._arrayeach":114,"lodash._baseeach":115,"lodash._bindcallback":116,"lodash.isarray":126}],114:[function(e,t,n){arguments[4][50][0].apply(n,arguments)},{dup:50}],115:[function(e,t,n){arguments[4][51][0].apply(n,arguments)},{dup:51,"lodash.keys":139}],116:[function(e,t,n){arguments[4][52][0].apply(n,arguments)},{dup:52}],117:[function(e,t){function n(e,t){return e="number"==typeof e||v.test(e)?+e:-1,t=null==t?b:t,e>-1&&e%1==0&&t>e}function i(e,t){var n=typeof e;if("string"==n&&g.test(e)||"number"==n)return!0;if(p(e))return!1;var i=!d.test(e);return i||null!=t&&e in o(t)}function r(e){return"number"==typeof e&&e>-1&&e%1==0&&b>=e}function o(e){return s(e)?e:Object(e)}function a(e){var t=e?e.length:0;return t?e[t-1]:void 0}function s(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function u(e,t){if(null==e)return!1;var o=y.call(e,t);if(!o&&!i(t)){if(t=h(t),e=1==t.length?e:c(e,l(t,0,-1)),null==e)return!1;t=a(t),o=y.call(e,t)}return o||r(e.length)&&n(t,e.length)&&(p(e)||f(e))}var c=e("lodash._baseget"),l=e("lodash._baseslice"),h=e("lodash._topath"),f=e("lodash.isarguments"),p=e("lodash.isarray"),d=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,g=/^\w*$/,v=/^\d+$/,m=Object.prototype,y=m.hasOwnProperty,b=9007199254740991;t.exports=u},{"lodash._baseget":118,"lodash._baseslice":119,"lodash._topath":120,"lodash.isarguments":121,"lodash.isarray":126}],118:[function(e,t){function n(e,t,n){if(null!=e){void 0!==n&&n in i(e)&&(t=[n]);for(var r=0,o=t.length;null!=e&&o>r;)e=e[t[r++]];return r&&r==o?e:void 0}}function i(e){return r(e)?e:Object(e)}function r(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}t.exports=n},{}],119:[function(e,t){function n(e,t,n){var i=-1,r=e.length;t=null==t?0:+t||0,0>t&&(t=-t>r?0:r+t),n=void 0===n||n>r?r:+n||0,0>n&&(n+=r),r=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(r);++i<r;)o[i]=e[i+t];return o}t.exports=n},{}],120:[function(e,t){function n(e){return null==e?"":e+""}function i(e){if(r(e))return e;var t=[];return n(e).replace(o,function(e,n,i,r){t.push(i?r.replace(a,"$1"):n||e)}),t}var r=e("lodash.isarray"),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,a=/\\(\\)?/g;t.exports=i},{"lodash.isarray":126}],121:[function(e,t,n){arguments[4][54][0].apply(n,arguments)},{dup:54}],122:[function(e,t){function n(e){return function(t){return null==t?void 0:t[e]}}function i(e){return"number"==typeof e&&e>-1&&e%1==0&&p>=e}function r(e,t,n,r){var s=e?d(e):0;return i(s)||(e=o(e),s=e.length),n="number"!=typeof n||r&&u(t,n,r)?0:0>n?f(s+n,0):n||0,"string"==typeof e||!c(e)&&l(e)?s>=n&&e.indexOf(t,n)>-1:!!s&&a(e,t,n)>-1}function o(e){return s(e,h(e))}var a=e("lodash._baseindexof"),s=e("lodash._basevalues"),u=e("lodash._isiterateecall"),c=e("lodash.isarray"),l=e("lodash.isstring"),h=e("lodash.keys"),f=Math.max,p=9007199254740991,d=n("length");t.exports=r},{"lodash._baseindexof":123,"lodash._basevalues":124,"lodash._isiterateecall":125,"lodash.isarray":126,"lodash.isstring":137,"lodash.keys":139}],123:[function(e,t){function n(e,t,n){if(t!==t)return i(e,n);for(var r=n-1,o=e.length;++r<o;)if(e[r]===t)return r;return-1}function i(e,t,n){for(var i=e.length,r=t+(n?0:-1);n?r--:++r<i;){var o=e[r];if(o!==o)return r}return-1}t.exports=n},{}],124:[function(e,t){function n(e,t){for(var n=-1,i=t.length,r=Array(i);++n<i;)r[n]=e[t[n]];return r}t.exports=n},{}],125:[function(e,t,n){arguments[4][69][0].apply(n,arguments)},{dup:69}],126:[function(e,t,n){arguments[4][80][0].apply(n,arguments)},{dup:80}],127:[function(e,t){function n(e){return!!e&&"object"==typeof e}function i(e){return n(e)&&a.call(e)==r}var r="[object Date]",o=Object.prototype,a=o.toString;t.exports=i},{}],128:[function(e,t,n){arguments[4][53][0].apply(n,arguments)},{dup:53,"lodash.isarguments":129,"lodash.isarray":126,"lodash.isfunction":134,"lodash.isstring":137,"lodash.keys":139}],129:[function(e,t,n){arguments[4][54][0].apply(n,arguments)},{dup:54}],130:[function(e,t){function n(e,t,n,o){n="function"==typeof n?r(n,o,3):void 0;var a=n?n(e,t):void 0;return void 0===a?i(e,t,n):!!a}var i=e("lodash._baseisequal"),r=e("lodash._bindcallback");t.exports=n},{"lodash._baseisequal":131,"lodash._bindcallback":133}],131:[function(e,t){function n(e){return!!e&&"object"==typeof e}function i(e,t){for(var n=-1,i=e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}function r(e,t,i,a,s,u){return e===t?!0:null==e||null==t||!c(e)&&!n(t)?e!==e&&t!==t:o(e,t,r,i,a,s,u)}function o(e,t,n,i,r,o,c){var f=l(e),g=l(t),v=d,m=d;f||(v=E.call(e),v==p?v=b:v!=b&&(f=h(e))),g||(m=E.call(t),m==p?m=b:m!=b&&(g=h(t)));var y=v==b,_=m==b,w=v==m;if(w&&!f&&!y)return s(e,t,v);if(!r){var x=y&&k.call(e,"__wrapped__"),R=_&&k.call(t,"__wrapped__");if(x||R)return n(x?e.value():e,R?t.value():t,i,r,o,c)}if(!w)return!1;o||(o=[]),c||(c=[]);for(var P=o.length;P--;)if(o[P]==e)return c[P]==t;o.push(e),c.push(t);var T=(f?a:u)(e,t,n,i,r,o,c);return o.pop(),c.pop(),T}function a(e,t,n,r,o,a,s){var u=-1,c=e.length,l=t.length;if(c!=l&&!(o&&l>c))return!1;for(;++u<c;){var h=e[u],f=t[u],p=r?r(o?f:h,o?h:f,u):void 0;if(void 0!==p){if(p)continue;return!1}if(o){if(!i(t,function(e){return h===e||n(h,e,r,o,a,s)}))return!1}else if(h!==f&&!n(h,f,r,o,a,s))return!1}return!0}function s(e,t,n){switch(n){case g:case v:return+e==+t;case m:return e.name==t.name&&e.message==t.message;case y:return e!=+e?t!=+t:e==+t;case _:case w:return e==t+""}return!1}function u(e,t,n,i,r,o,a){var s=f(e),u=s.length,c=f(t),l=c.length;if(u!=l&&!r)return!1;for(var h=u;h--;){var p=s[h];if(!(r?p in t:k.call(t,p)))return!1}for(var d=r;++h<u;){p=s[h];var g=e[p],v=t[p],m=i?i(r?v:g,r?g:v,p):void 0;if(!(void 0===m?n(g,v,i,r,o,a):m))return!1;d||(d="constructor"==p)}if(!d){var y=e.constructor,b=t.constructor;if(y!=b&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b))return!1}return!0}function c(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var l=e("lodash.isarray"),h=e("lodash.istypedarray"),f=e("lodash.keys"),p="[object Arguments]",d="[object Array]",g="[object Boolean]",v="[object Date]",m="[object Error]",y="[object Number]",b="[object Object]",_="[object RegExp]",w="[object String]",x=Object.prototype,k=x.hasOwnProperty,E=x.toString;t.exports=r},{"lodash.isarray":126,"lodash.istypedarray":132,"lodash.keys":139}],132:[function(e,t){function n(e){return!!e&&"object"==typeof e}function i(e){return"number"==typeof e&&e>-1&&e%1==0&&A>=e}function r(e){return n(e)&&i(e.length)&&!!j[L.call(e)]}var o="[object Arguments]",a="[object Array]",s="[object Boolean]",u="[object Date]",c="[object Error]",l="[object Function]",h="[object Map]",f="[object Number]",p="[object Object]",d="[object RegExp]",g="[object Set]",v="[object String]",m="[object WeakMap]",y="[object ArrayBuffer]",b="[object Float32Array]",_="[object Float64Array]",w="[object Int8Array]",x="[object Int16Array]",k="[object Int32Array]",E="[object Uint8Array]",R="[object Uint8ClampedArray]",P="[object Uint16Array]",T="[object Uint32Array]",j={};j[b]=j[_]=j[w]=j[x]=j[k]=j[E]=j[R]=j[P]=j[T]=!0,j[o]=j[a]=j[y]=j[s]=j[u]=j[c]=j[l]=j[h]=j[f]=j[p]=j[d]=j[g]=j[v]=j[m]=!1;var S=Object.prototype,L=S.toString,A=9007199254740991;t.exports=r},{}],133:[function(e,t,n){arguments[4][52][0].apply(n,arguments)},{dup:52}],134:[function(e,t,n){arguments[4][55][0].apply(n,arguments)},{dup:55}],135:[function(e,t){function n(e){return null===e}t.exports=n},{}],136:[function(e,t){function n(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}t.exports=n},{}],137:[function(e,t,n){arguments[4][56][0].apply(n,arguments)},{dup:56}],138:[function(e,t){function n(e){return void 0===e}t.exports=n},{}],139:[function(e,t,n){arguments[4][57][0].apply(n,arguments)},{dup:57,"lodash._getnative":140,"lodash.isarguments":141,"lodash.isarray":126}],140:[function(e,t,n){arguments[4][58][0].apply(n,arguments)},{dup:58}],141:[function(e,t,n){arguments[4][54][0].apply(n,arguments)},{dup:54}],142:[function(e,t){var n=e("lodash._arraymap"),i=e("lodash._basedifference"),r=e("lodash._baseflatten"),o=e("lodash._bindcallback"),a=e("lodash._pickbyarray"),s=e("lodash._pickbycallback"),u=e("lodash.keysin"),c=e("lodash.restparam"),l=c(function(e,t){if(null==e)return{};if("function"!=typeof t[0]){var t=n(r(t),String);return a(e,i(u(e),t))}var c=o(t[0],t[1],3);return s(e,function(e,t,n){return!c(e,t,n)})});t.exports=l},{"lodash._arraymap":143,"lodash._basedifference":144,"lodash._baseflatten":149,"lodash._bindcallback":151,"lodash._pickbyarray":152,"lodash._pickbycallback":153,"lodash.keysin":155,"lodash.restparam":157}],143:[function(e,t){function n(e,t){for(var n=-1,i=e.length,r=Array(i);++n<i;)r[n]=t(e[n],n,e);return r}t.exports=n},{}],144:[function(e,t){function n(e,t){var n=e?e.length:0,s=[];if(!n)return s;var u=-1,c=i,l=!0,h=l&&t.length>=a?o(t):null,f=t.length;h&&(c=r,l=!1,t=h);e:for(;++u<n;){var p=e[u];if(l&&p===p){for(var d=f;d--;)if(t[d]===p)continue e;s.push(p)}else c(t,p,0)<0&&s.push(p)}return s}var i=e("lodash._baseindexof"),r=e("lodash._cacheindexof"),o=e("lodash._createcache"),a=200;

t.exports=n},{"lodash._baseindexof":145,"lodash._cacheindexof":146,"lodash._createcache":147}],145:[function(e,t,n){arguments[4][123][0].apply(n,arguments)},{dup:123}],146:[function(e,t){function n(e,t){var n=e.data,r="string"==typeof t||i(t)?n.set.has(t):n.hash[t];return r?0:-1}function i(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}t.exports=n},{}],147:[function(e,t){(function(n){function i(e){var t=e?e.length:0;for(this.data={hash:c(null),set:new u};t--;)this.push(e[t])}function r(e){var t=this.data;"string"==typeof e||a(e)?t.set.add(e):t.hash[e]=!0}function o(e){return c&&u?new i(e):null}function a(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var s=e("lodash._getnative"),u=s(n,"Set"),c=s(Object,"create");i.prototype.push=r,t.exports=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"lodash._getnative":148}],148:[function(e,t,n){arguments[4][58][0].apply(n,arguments)},{dup:58}],149:[function(e,t){function n(e){return!!e&&"object"==typeof e}function i(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e}function r(e,t,o,s){s||(s=[]);for(var l=-1,h=e.length;++l<h;){var f=e[l];n(f)&&a(f)&&(o||c(f)||u(f))?t?r(f,t,o,s):i(s,f):o||(s[s.length]=f)}return s}function o(e){return function(t){return null==t?void 0:t[e]}}function a(e){return null!=e&&s(h(e))}function s(e){return"number"==typeof e&&e>-1&&e%1==0&&l>=e}var u=e("lodash.isarguments"),c=e("lodash.isarray"),l=9007199254740991,h=o("length");t.exports=r},{"lodash.isarguments":150,"lodash.isarray":126}],150:[function(e,t,n){arguments[4][54][0].apply(n,arguments)},{dup:54}],151:[function(e,t,n){arguments[4][52][0].apply(n,arguments)},{dup:52}],152:[function(e,t){function n(e,t){e=i(e);for(var n=-1,r=t.length,o={};++n<r;){var a=t[n];a in e&&(o[a]=e[a])}return o}function i(e){return r(e)?e:Object(e)}function r(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}t.exports=n},{}],153:[function(e,t){function n(e,t){return r(e,t,o)}function i(e,t){var i={};return n(e,function(e,n,r){t(e,n,r)&&(i[n]=e)}),i}var r=e("lodash._basefor"),o=e("lodash.keysin");t.exports=i},{"lodash._basefor":154,"lodash.keysin":155}],154:[function(e,t,n){arguments[4][106][0].apply(n,arguments)},{dup:106}],155:[function(e,t){function n(e,t){return e="number"==typeof e||u.test(e)?+e:-1,t=null==t?h:t,e>-1&&e%1==0&&t>e}function i(e){return"number"==typeof e&&e>-1&&e%1==0&&h>=e}function r(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function o(e){if(null==e)return[];r(e)||(e=Object(e));var t=e.length;t=t&&i(t)&&(s(e)||a(e))&&t||0;for(var o=e.constructor,u=-1,c="function"==typeof o&&o.prototype===e,h=Array(t),f=t>0;++u<t;)h[u]=u+"";for(var p in e)f&&n(p,t)||"constructor"==p&&(c||!l.call(e,p))||h.push(p);return h}var a=e("lodash.isarguments"),s=e("lodash.isarray"),u=/^\d+$/,c=Object.prototype,l=c.hasOwnProperty,h=9007199254740991;t.exports=o},{"lodash.isarguments":156,"lodash.isarray":126}],156:[function(e,t,n){arguments[4][54][0].apply(n,arguments)},{dup:54}],157:[function(e,t,n){arguments[4][70][0].apply(n,arguments)},{dup:70}],158:[function(e,t){function n(e,t){var n=typeof e;if("string"==n&&p.test(e)||"number"==n)return!0;if(l(e))return!1;var r=!f.test(e);return r||null!=t&&e in i(t)}function i(e){return o(e)?e:Object(e)}function r(e){var t=e?e.length:0;return t?e[t-1]:void 0}function o(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function a(e,t,i){var o=null==e?void 0:e[t];return void 0===o&&(null==e||n(t,e)||(t=c(t),e=1==t.length?e:s(e,u(t,0,-1)),o=null==e?void 0:e[r(t)]),o=void 0===o?i:o),h(o)?o.call(e):o}var s=e("lodash._baseget"),u=e("lodash._baseslice"),c=e("lodash._topath"),l=e("lodash.isarray"),h=e("lodash.isfunction"),f=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,p=/^\w*$/;t.exports=a},{"lodash._baseget":159,"lodash._baseslice":160,"lodash._topath":161,"lodash.isarray":126,"lodash.isfunction":134}],159:[function(e,t,n){arguments[4][118][0].apply(n,arguments)},{dup:118}],160:[function(e,t,n){arguments[4][119][0].apply(n,arguments)},{dup:119}],161:[function(e,t,n){arguments[4][120][0].apply(n,arguments)},{dup:120,"lodash.isarray":126}],162:[function(e,t){var n=e("lodash._baseflatten"),i=e("lodash._baseuniq"),r=e("lodash.restparam"),o=r(function(e){return i(n(e,!1,!0))});t.exports=o},{"lodash._baseflatten":163,"lodash._baseuniq":165,"lodash.restparam":170}],163:[function(e,t,n){arguments[4][149][0].apply(n,arguments)},{dup:149,"lodash.isarguments":164,"lodash.isarray":126}],164:[function(e,t,n){arguments[4][54][0].apply(n,arguments)},{dup:54}],165:[function(e,t){function n(e,t){var n=-1,s=i,u=e.length,c=!0,l=c&&u>=a,h=l?o():null,f=[];h?(s=r,c=!1):(l=!1,h=t?[]:f);e:for(;++n<u;){var p=e[n],d=t?t(p,n,e):p;if(c&&p===p){for(var g=h.length;g--;)if(h[g]===d)continue e;t&&h.push(d),f.push(p)}else s(h,d,0)<0&&((t||l)&&h.push(d),f.push(p))}return f}var i=e("lodash._baseindexof"),r=e("lodash._cacheindexof"),o=e("lodash._createcache"),a=200;t.exports=n},{"lodash._baseindexof":166,"lodash._cacheindexof":167,"lodash._createcache":168}],166:[function(e,t,n){arguments[4][123][0].apply(n,arguments)},{dup:123}],167:[function(e,t,n){arguments[4][146][0].apply(n,arguments)},{dup:146}],168:[function(e,t,n){arguments[4][147][0].apply(n,arguments)},{dup:147,"lodash._getnative":169}],169:[function(e,t,n){arguments[4][58][0].apply(n,arguments)},{dup:58}],170:[function(e,t,n){arguments[4][70][0].apply(n,arguments)},{dup:70}],171:[function(e,t,n){arguments[4][62][0].apply(n,arguments)},{dup:62,"lodash._basetostring":172}],172:[function(e,t,n){arguments[4][63][0].apply(n,arguments)},{dup:63}],173:[function(e,t,n){function i(e){for(var t=e.context.createBuffer(e.numberOfChannels,e.length,e.sampleRate),n=0,i=e.numberOfChannels;i>n;++n){var r=t.getChannelData(n),o=e.getChannelData(n);r.set(o,0)}return t}function r(e){for(var t=0,n=e.numberOfChannels;n>t;++t){var i=e.getChannelData(t);Array.prototype.reverse.call(i)}}function o(e){for(var t=0,n=e.numberOfChannels;n>t;++t)for(var i=e.getChannelData(t),r=e.length;r--;)i[r]=-i[r]}function a(e){for(var t=0,n=e.numberOfChannels;n>t;++t)for(var i=e.getChannelData(t),r=e.length;r--;)i[r]=0}function s(e){for(var t=0,n=e.numberOfChannels;n>t;++t)for(var i=e.getChannelData(t),r=e.length;r--;)i[r]=2*Math.random()-1}n.clone=i,n.reverse=r,n.invert=o,n.zero=a,n.noise=s},{}],174:[function(e,t){var n=e("global/window"),i=n.AudioContext||n.webkitAudioContext;i&&(t.exports=new i)},{"global/window":175}],175:[function(e,t){(function(e){t.exports="undefined"!=typeof window?window:"undefined"!=typeof e?e:{}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],176:[function(e,t,n){!function(e){"object"==typeof n?t.exports=e():"function"==typeof define&&define.amd?define(e):window.AudioNotes=e()}(function(){function e(e){return 440*Math.pow(2,(e-57)/12)}for(var t={},n="CcDdEFfGgAaB",i=0;10>=i;++i)for(var r=0;12>r;++r)t[12*i+r]=t[n[r]+i]=e(12*i+r);return t})},{}],177:[function(){},{}],178:[function(e,t,n){function i(){return r.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function r(e){return this instanceof r?(this.length=0,this.parent=void 0,"number"==typeof e?o(this,e):"string"==typeof e?a(this,e,arguments.length>1?arguments[1]:"utf8"):s(this,e)):arguments.length>1?new r(e,arguments[1]):new r(e)}function o(e,t){if(e=d(e,0>t?0:0|g(t)),!r.TYPED_ARRAY_SUPPORT)for(var n=0;t>n;n++)e[n]=0;return e}function a(e,t,n){("string"!=typeof n||""===n)&&(n="utf8");var i=0|m(t,n);return e=d(e,i),e.write(t,n),e}function s(e,t){if(r.isBuffer(t))return u(e,t);if(J(t))return c(e,t);if(null==t)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(t.buffer instanceof ArrayBuffer)return l(e,t);if(t instanceof ArrayBuffer)return h(e,t)}return t.length?f(e,t):p(e,t)}function u(e,t){var n=0|g(t.length);return e=d(e,n),t.copy(e,0,0,n),e}function c(e,t){var n=0|g(t.length);e=d(e,n);for(var i=0;n>i;i+=1)e[i]=255&t[i];return e}function l(e,t){var n=0|g(t.length);e=d(e,n);for(var i=0;n>i;i+=1)e[i]=255&t[i];return e}function h(e,t){return r.TYPED_ARRAY_SUPPORT?(t.byteLength,e=r._augment(new Uint8Array(t))):e=l(e,new Uint8Array(t)),e}function f(e,t){var n=0|g(t.length);e=d(e,n);for(var i=0;n>i;i+=1)e[i]=255&t[i];return e}function p(e,t){var n,i=0;"Buffer"===t.type&&J(t.data)&&(n=t.data,i=0|g(n.length)),e=d(e,i);for(var r=0;i>r;r+=1)e[r]=255&n[r];return e}function d(e,t){r.TYPED_ARRAY_SUPPORT?e=r._augment(new Uint8Array(t)):(e.length=t,e._isBuffer=!0);var n=0!==t&&t<=r.poolSize>>>1;return n&&(e.parent=Q),e}function g(e){if(e>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|e}function v(e,t){if(!(this instanceof v))return new v(e,t);var n=new r(e,t);return delete n.parent,n}function m(e,t){"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"binary":case"raw":case"raws":return n;case"utf8":case"utf-8":return U(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Y(e).length;default:if(i)return U(e).length;t=(""+t).toLowerCase(),i=!0}}function y(e,t,n){var i=!1;if(t=0|t,n=void 0===n||n===1/0?this.length:0|n,e||(e="utf8"),0>t&&(t=0),n>this.length&&(n=this.length),t>=n)return"";for(;;)switch(e){case"hex":return L(this,t,n);case"utf8":case"utf-8":return P(this,t,n);case"ascii":return j(this,t,n);case"binary":return S(this,t,n);case"base64":return R(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function b(e,t,n,i){n=Number(n)||0;var r=e.length-n;i?(i=Number(i),i>r&&(i=r)):i=r;var o=t.length;if(o%2!==0)throw new Error("Invalid hex string");i>o/2&&(i=o/2);for(var a=0;i>a;a++){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))throw new Error("Invalid hex string");e[n+a]=s}return a}function _(e,t,n,i){return $(U(t,e.length-n),e,n,i)}function w(e,t,n,i){return $(z(t),e,n,i)}function x(e,t,n,i){return w(e,t,n,i)}function k(e,t,n,i){return $(Y(t),e,n,i)}function E(e,t,n,i){return $(W(t,e.length-n),e,n,i)}function R(e,t,n){return H.fromByteArray(0===t&&n===e.length?e:e.slice(t,n))}function P(e,t,n){n=Math.min(e.length,n);for(var i=[],r=t;n>r;){var o=e[r],a=null,s=o>239?4:o>223?3:o>191?2:1;if(n>=r+s){var u,c,l,h;switch(s){case 1:128>o&&(a=o);break;case 2:u=e[r+1],128===(192&u)&&(h=(31&o)<<6|63&u,h>127&&(a=h));break;case 3:u=e[r+1],c=e[r+2],128===(192&u)&&128===(192&c)&&(h=(15&o)<<12|(63&u)<<6|63&c,h>2047&&(55296>h||h>57343)&&(a=h));break;case 4:u=e[r+1],c=e[r+2],l=e[r+3],128===(192&u)&&128===(192&c)&&128===(192&l)&&(h=(15&o)<<18|(63&u)<<12|(63&c)<<6|63&l,h>65535&&1114112>h&&(a=h))}}null===a?(a=65533,s=1):a>65535&&(a-=65536,i.push(a>>>10&1023|55296),a=56320|1023&a),i.push(a),r+=s}return T(i)}function T(e){var t=e.length;if(Z>=t)return String.fromCharCode.apply(String,e);for(var n="",i=0;t>i;)n+=String.fromCharCode.apply(String,e.slice(i,i+=Z));return n}function j(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;n>r;r++)i+=String.fromCharCode(127&e[r]);return i}function S(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;n>r;r++)i+=String.fromCharCode(e[r]);return i}function L(e,t,n){var i=e.length;(!t||0>t)&&(t=0),(!n||0>n||n>i)&&(n=i);for(var r="",o=t;n>o;o++)r+=G(e[o]);return r}function A(e,t,n){for(var i=e.slice(t,n),r="",o=0;o<i.length;o+=2)r+=String.fromCharCode(i[o]+256*i[o+1]);return r}function N(e,t,n){if(e%1!==0||0>e)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function C(e,t,n,i,o,a){if(!r.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");if(t>o||a>t)throw new RangeError("value is out of bounds");if(n+i>e.length)throw new RangeError("index out of range")}function O(e,t,n,i){0>t&&(t=65535+t+1);for(var r=0,o=Math.min(e.length-n,2);o>r;r++)e[n+r]=(t&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function M(e,t,n,i){0>t&&(t=4294967295+t+1);for(var r=0,o=Math.min(e.length-n,4);o>r;r++)e[n+r]=t>>>8*(i?r:3-r)&255}function I(e,t,n,i,r,o){if(t>r||o>t)throw new RangeError("value is out of bounds");if(n+i>e.length)throw new RangeError("index out of range");if(0>n)throw new RangeError("index out of range")}function q(e,t,n,i,r){return r||I(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),V.write(e,t,n,i,23,4),n+4}function B(e,t,n,i,r){return r||I(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),V.write(e,t,n,i,52,8),n+8}function D(e){if(e=F(e).replace(X,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function F(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function G(e){return 16>e?"0"+e.toString(16):e.toString(16)}function U(e,t){t=t||1/0;for(var n,i=e.length,r=null,o=[],a=0;i>a;a++){if(n=e.charCodeAt(a),n>55295&&57344>n){if(!r){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===i){(t-=3)>-1&&o.push(239,191,189);continue}r=n;continue}if(56320>n){(t-=3)>-1&&o.push(239,191,189),r=n;continue}n=r-55296<<10|n-56320|65536}else r&&(t-=3)>-1&&o.push(239,191,189);if(r=null,128>n){if((t-=1)<0)break;o.push(n)}else if(2048>n){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(65536>n){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(1114112>n))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function z(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t}function W(e,t){for(var n,i,r,o=[],a=0;a<e.length&&!((t-=2)<0);a++)n=e.charCodeAt(a),i=n>>8,r=n%256,o.push(r),o.push(i);return o}function Y(e){return H.toByteArray(D(e))}function $(e,t,n,i){for(var r=0;i>r&&!(r+n>=t.length||r>=e.length);r++)t[r+n]=e[r];return r}var H=e("base64-js"),V=e("ieee754"),J=e("is-array");n.Buffer=r,n.SlowBuffer=v,n.INSPECT_MAX_BYTES=50,r.poolSize=8192;var Q={};r.TYPED_ARRAY_SUPPORT=function(){function e(){}try{var t=new Uint8Array(1);return t.foo=function(){return 42},t.constructor=e,42===t.foo()&&t.constructor===e&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}(),r.isBuffer=function(e){return!(null==e||!e._isBuffer)},r.compare=function(e,t){if(!r.isBuffer(e)||!r.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,i=t.length,o=0,a=Math.min(n,i);a>o&&e[o]===t[o];)++o;return o!==a&&(n=e[o],i=t[o]),i>n?-1:n>i?1:0},r.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(e,t){if(!J(e))throw new TypeError("list argument must be an Array of Buffers.");if(0===e.length)return new r(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;n++)t+=e[n].length;var i=new r(t),o=0;for(n=0;n<e.length;n++){var a=e[n];a.copy(i,o),o+=a.length}return i},r.byteLength=m,r.prototype.length=void 0,r.prototype.parent=void 0,r.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?P(this,0,e):y.apply(this,arguments)},r.prototype.equals=function(e){if(!r.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:0===r.compare(this,e)},r.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},r.prototype.compare=function(e){if(!r.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?0:r.compare(this,e)},r.prototype.indexOf=function(e,t){function n(e,t,n){for(var i=-1,r=0;n+r<e.length;r++)if(e[n+r]===t[-1===i?0:r-i]){if(-1===i&&(i=r),r-i+1===t.length)return n+i}else i=-1;return-1}if(t>2147483647?t=2147483647:-2147483648>t&&(t=-2147483648),t>>=0,0===this.length)return-1;if(t>=this.length)return-1;if(0>t&&(t=Math.max(this.length+t,0)),"string"==typeof e)return 0===e.length?-1:String.prototype.indexOf.call(this,e,t);if(r.isBuffer(e))return n(this,e,t);if("number"==typeof e)return r.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,e,t):n(this,[e],t);throw new TypeError("val must be string, number or Buffer")},r.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},r.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},r.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else if(isFinite(t))t=0|t,isFinite(n)?(n=0|n,void 0===i&&(i="utf8")):(i=n,n=void 0);else{var r=i;i=t,t=0|n,n=r}var o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(0>n||0>t)||t>this.length)throw new RangeError("attempt to write outside buffer bounds");i||(i="utf8");for(var a=!1;;)switch(i){case"hex":return b(this,e,t,n);case"utf8":case"utf-8":return _(this,e,t,n);case"ascii":return w(this,e,t,n);case"binary":return x(this,e,t,n);case"base64":return k(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),a=!0}},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Z=4096;r.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,0>e?(e+=n,0>e&&(e=0)):e>n&&(e=n),0>t?(t+=n,0>t&&(t=0)):t>n&&(t=n),e>t&&(t=e);var i;if(r.TYPED_ARRAY_SUPPORT)i=r._augment(this.subarray(e,t));else{var o=t-e;i=new r(o,void 0);for(var a=0;o>a;a++)i[a]=this[a+e]}return i.length&&(i.parent=this.parent||this),i},r.prototype.readUIntLE=function(e,t,n){e=0|e,t=0|t,n||N(e,t,this.length);for(var i=this[e],r=1,o=0;++o<t&&(r*=256);)i+=this[e+o]*r;return i},r.prototype.readUIntBE=function(e,t,n){e=0|e,t=0|t,n||N(e,t,this.length);for(var i=this[e+--t],r=1;t>0&&(r*=256);)i+=this[e+--t]*r;return i},r.prototype.readUInt8=function(e,t){return t||N(e,1,this.length),this[e]},r.prototype.readUInt16LE=function(e,t){return t||N(e,2,this.length),this[e]|this[e+1]<<8},r.prototype.readUInt16BE=function(e,t){return t||N(e,2,this.length),this[e]<<8|this[e+1]},r.prototype.readUInt32LE=function(e,t){return t||N(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},r.prototype.readUInt32BE=function(e,t){return t||N(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},r.prototype.readIntLE=function(e,t,n){e=0|e,t=0|t,n||N(e,t,this.length);for(var i=this[e],r=1,o=0;++o<t&&(r*=256);)i+=this[e+o]*r;return r*=128,i>=r&&(i-=Math.pow(2,8*t)),i},r.prototype.readIntBE=function(e,t,n){e=0|e,t=0|t,n||N(e,t,this.length);for(var i=t,r=1,o=this[e+--i];i>0&&(r*=256);)o+=this[e+--i]*r;return r*=128,o>=r&&(o-=Math.pow(2,8*t)),o},r.prototype.readInt8=function(e,t){return t||N(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},r.prototype.readInt16LE=function(e,t){t||N(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},r.prototype.readInt16BE=function(e,t){t||N(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},r.prototype.readInt32LE=function(e,t){return t||N(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},r.prototype.readInt32BE=function(e,t){return t||N(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},r.prototype.readFloatLE=function(e,t){return t||N(e,4,this.length),V.read(this,e,!0,23,4)},r.prototype.readFloatBE=function(e,t){return t||N(e,4,this.length),V.read(this,e,!1,23,4)},r.prototype.readDoubleLE=function(e,t){return t||N(e,8,this.length),V.read(this,e,!0,52,8)},r.prototype.readDoubleBE=function(e,t){return t||N(e,8,this.length),V.read(this,e,!1,52,8)},r.prototype.writeUIntLE=function(e,t,n,i){e=+e,t=0|t,n=0|n,i||C(this,e,t,n,Math.pow(2,8*n),0);var r=1,o=0;for(this[t]=255&e;++o<n&&(r*=256);)this[t+o]=e/r&255;return t+n},r.prototype.writeUIntBE=function(e,t,n,i){e=+e,t=0|t,n=0|n,i||C(this,e,t,n,Math.pow(2,8*n),0);var r=n-1,o=1;for(this[t+r]=255&e;--r>=0&&(o*=256);)this[t+r]=e/o&255;return t+n},r.prototype.writeUInt8=function(e,t,n){return e=+e,t=0|t,n||C(this,e,t,1,255,0),r.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=e,t+1},r.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=0|t,n||C(this,e,t,2,65535,0),r.TYPED_ARRAY_SUPPORT?(this[t]=e,this[t+1]=e>>>8):O(this,e,t,!0),t+2},r.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=0|t,n||C(this,e,t,2,65535,0),r.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e):O(this,e,t,!1),t+2},r.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=0|t,n||C(this,e,t,4,4294967295,0),r.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e):M(this,e,t,!0),t+4},r.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=0|t,n||C(this,e,t,4,4294967295,0),r.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e):M(this,e,t,!1),t+4},r.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t=0|t,!i){var r=Math.pow(2,8*n-1);C(this,e,t,n,r-1,-r)}var o=0,a=1,s=0>e?1:0;for(this[t]=255&e;++o<n&&(a*=256);)this[t+o]=(e/a>>0)-s&255;return t+n},r.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t=0|t,!i){var r=Math.pow(2,8*n-1);C(this,e,t,n,r-1,-r)}var o=n-1,a=1,s=0>e?1:0;for(this[t+o]=255&e;--o>=0&&(a*=256);)this[t+o]=(e/a>>0)-s&255;return t+n},r.prototype.writeInt8=function(e,t,n){return e=+e,t=0|t,n||C(this,e,t,1,127,-128),r.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),0>e&&(e=255+e+1),this[t]=e,t+1},r.prototype.writeInt16LE=function(e,t,n){return e=+e,t=0|t,n||C(this,e,t,2,32767,-32768),r.TYPED_ARRAY_SUPPORT?(this[t]=e,this[t+1]=e>>>8):O(this,e,t,!0),t+2},r.prototype.writeInt16BE=function(e,t,n){return e=+e,t=0|t,n||C(this,e,t,2,32767,-32768),r.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e):O(this,e,t,!1),t+2},r.prototype.writeInt32LE=function(e,t,n){return e=+e,t=0|t,n||C(this,e,t,4,2147483647,-2147483648),r.TYPED_ARRAY_SUPPORT?(this[t]=e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):M(this,e,t,!0),t+4},r.prototype.writeInt32BE=function(e,t,n){return e=+e,t=0|t,n||C(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),r.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e):M(this,e,t,!1),t+4},r.prototype.writeFloatLE=function(e,t,n){return q(this,e,t,!0,n)},r.prototype.writeFloatBE=function(e,t,n){return q(this,e,t,!1,n)},r.prototype.writeDoubleLE=function(e,t,n){return B(this,e,t,!0,n)},r.prototype.writeDoubleBE=function(e,t,n){return B(this,e,t,!1,n)},r.prototype.copy=function(e,t,n,i){if(n||(n=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&n>i&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(0>t)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("sourceStart out of bounds");if(0>i)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var o,a=i-n;if(this===e&&t>n&&i>t)for(o=a-1;o>=0;o--)e[o+t]=this[o+n];else if(1e3>a||!r.TYPED_ARRAY_SUPPORT)for(o=0;a>o;o++)e[o+t]=this[o+n];else e._set(this.subarray(n,n+a),t);return a},r.prototype.fill=function(e,t,n){if(e||(e=0),t||(t=0),n||(n=this.length),t>n)throw new RangeError("end < start");if(n!==t&&0!==this.length){if(0>t||t>=this.length)throw new RangeError("start out of bounds");if(0>n||n>this.length)throw new RangeError("end out of bounds");var i;if("number"==typeof e)for(i=t;n>i;i++)this[i]=e;else{var r=U(e.toString()),o=r.length;for(i=t;n>i;i++)this[i]=r[i%o]}return this}},r.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(r.TYPED_ARRAY_SUPPORT)return new r(this).buffer;for(var e=new Uint8Array(this.length),t=0,n=e.length;n>t;t+=1)e[t]=this[t];return e.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var K=r.prototype;r._augment=function(e){return e.constructor=r,e._isBuffer=!0,e._set=e.set,e.get=K.get,e.set=K.set,e.write=K.write,e.toString=K.toString,e.toLocaleString=K.toString,e.toJSON=K.toJSON,e.equals=K.equals,e.compare=K.compare,e.indexOf=K.indexOf,e.copy=K.copy,e.slice=K.slice,e.readUIntLE=K.readUIntLE,e.readUIntBE=K.readUIntBE,e.readUInt8=K.readUInt8,e.readUInt16LE=K.readUInt16LE,e.readUInt16BE=K.readUInt16BE,e.readUInt32LE=K.readUInt32LE,e.readUInt32BE=K.readUInt32BE,e.readIntLE=K.readIntLE,e.readIntBE=K.readIntBE,e.readInt8=K.readInt8,e.readInt16LE=K.readInt16LE,e.readInt16BE=K.readInt16BE,e.readInt32LE=K.readInt32LE,e.readInt32BE=K.readInt32BE,e.readFloatLE=K.readFloatLE,e.readFloatBE=K.readFloatBE,e.readDoubleLE=K.readDoubleLE,e.readDoubleBE=K.readDoubleBE,e.writeUInt8=K.writeUInt8,e.writeUIntLE=K.writeUIntLE,e.writeUIntBE=K.writeUIntBE,e.writeUInt16LE=K.writeUInt16LE,e.writeUInt16BE=K.writeUInt16BE,e.writeUInt32LE=K.writeUInt32LE,e.writeUInt32BE=K.writeUInt32BE,e.writeIntLE=K.writeIntLE,e.writeIntBE=K.writeIntBE,e.writeInt8=K.writeInt8,e.writeInt16LE=K.writeInt16LE,e.writeInt16BE=K.writeInt16BE,e.writeInt32LE=K.writeInt32LE,e.writeInt32BE=K.writeInt32BE,e.writeFloatLE=K.writeFloatLE,e.writeFloatBE=K.writeFloatBE,e.writeDoubleLE=K.writeDoubleLE,e.writeDoubleBE=K.writeDoubleBE,e.fill=K.fill,e.inspect=K.inspect,e.toArrayBuffer=K.toArrayBuffer,e};var X=/[^+\/0-9A-Za-z-_]/g},{"base64-js":179,ieee754:180,"is-array":181}],179:[function(e,t,n){var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(e){"use strict";function t(e){var t=e.charCodeAt(0);return t===a||t===h?62:t===s||t===f?63:u>t?-1:u+10>t?t-u+26+26:l+26>t?t-l:c+26>t?t-c+26:void 0}function n(e){function n(e){c[h++]=e}var i,r,a,s,u,c;if(e.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var l=e.length;u="="===e.charAt(l-2)?2:"="===e.charAt(l-1)?1:0,c=new o(3*e.length/4-u),a=u>0?e.length-4:e.length;var h=0;for(i=0,r=0;a>i;i+=4,r+=3)s=t(e.charAt(i))<<18|t(e.charAt(i+1))<<12|t(e.charAt(i+2))<<6|t(e.charAt(i+3)),n((16711680&s)>>16),n((65280&s)>>8),n(255&s);return 2===u?(s=t(e.charAt(i))<<2|t(e.charAt(i+1))>>4,n(255&s)):1===u&&(s=t(e.charAt(i))<<10|t(e.charAt(i+1))<<4|t(e.charAt(i+2))>>2,n(s>>8&255),n(255&s)),c}function r(e){function t(e){return i.charAt(e)}function n(e){return t(e>>18&63)+t(e>>12&63)+t(e>>6&63)+t(63&e)}var r,o,a,s=e.length%3,u="";for(r=0,a=e.length-s;a>r;r+=3)o=(e[r]<<16)+(e[r+1]<<8)+e[r+2],u+=n(o);switch(s){case 1:o=e[e.length-1],u+=t(o>>2),u+=t(o<<4&63),u+="==";break;case 2:o=(e[e.length-2]<<8)+e[e.length-1],u+=t(o>>10),u+=t(o>>4&63),u+=t(o<<2&63),u+="="}return u}var o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="+".charCodeAt(0),s="/".charCodeAt(0),u="0".charCodeAt(0),c="a".charCodeAt(0),l="A".charCodeAt(0),h="-".charCodeAt(0),f="_".charCodeAt(0);e.toByteArray=n,e.fromByteArray=r}("undefined"==typeof n?this.base64js={}:n)},{}],180:[function(e,t,n){n.read=function(e,t,n,i,r){var o,a,s=8*r-i-1,u=(1<<s)-1,c=u>>1,l=-7,h=n?r-1:0,f=n?-1:1,p=e[t+h];for(h+=f,o=p&(1<<-l)-1,p>>=-l,l+=s;l>0;o=256*o+e[t+h],h+=f,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=i;l>0;a=256*a+e[t+h],h+=f,l-=8);if(0===o)o=1-c;else{if(o===u)return a?0/0:(p?-1:1)*(1/0);a+=Math.pow(2,i),o-=c}return(p?-1:1)*a*Math.pow(2,o-i)},n.write=function(e,t,n,i,r,o){var a,s,u,c=8*o-r-1,l=(1<<c)-1,h=l>>1,f=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:o-1,d=i?1:-1,g=0>t||0===t&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),t+=a+h>=1?f/u:f*Math.pow(2,1-h),t*u>=2&&(a++,u/=2),a+h>=l?(s=0,a=l):a+h>=1?(s=(t*u-1)*Math.pow(2,r),a+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,r),a=0));r>=8;e[n+p]=255&s,p+=d,s/=256,r-=8);for(a=a<<r|s,c+=r;c>0;e[n+p]=255&a,p+=d,a/=256,c-=8);e[n+p-d]|=128*g}},{}],181:[function(e,t){var n=Array.isArray,i=Object.prototype.toString;t.exports=n||function(e){return!!e&&"[object Array]"==i.call(e)}},{}],182:[function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function r(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!r(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,r,s,u,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],a(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(r=arguments.length,s=new Array(r-1),u=1;r>u;u++)s[u-1]=arguments[u];n.apply(this,s)}else if(o(n)){for(r=arguments.length,s=new Array(r-1),u=1;r>u;u++)s[u-1]=arguments[u];for(c=n.slice(),r=c.length,u=0;r>u;u++)c[u].apply(this,s)}return!0},n.prototype.addListener=function(e,t){var r;if(!i(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned){var r;r=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,r&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,r,a,s;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],a=n.length,r=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(s=a;s-->0;)if(n[s]===t||n[s].listener&&n[s].listener===t){r=s;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],i(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?i(e._events[t])?1:e._events[t].length:0}},{}],183:[function(e,t){t.exports="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],184:[function(e,t){t.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{}],185:[function(e,t){function n(){if(!a){a=!0;for(var e,t=o.length;t;){e=o,o=[];for(var n=-1;++n<t;)e[n]();t=o.length}a=!1}}function i(){}var r=t.exports={},o=[],a=!1;

r.nextTick=function(e){o.push(e),a||setTimeout(n,0)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=i,r.addListener=i,r.once=i,r.off=i,r.removeListener=i,r.removeAllListeners=i,r.emit=i,r.binding=function(){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},{}],186:[function(e,t){t.exports=e("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":187}],187:[function(e,t){(function(n){function i(e){return this instanceof i?(u.call(this,e),c.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",r)):new i(e)}function r(){this.allowHalfOpen||this._writableState.ended||n.nextTick(this.end.bind(this))}function o(e,t){for(var n=0,i=e.length;i>n;n++)t(e[n],n)}t.exports=i;var a=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t},s=e("core-util-is");s.inherits=e("inherits");var u=e("./_stream_readable"),c=e("./_stream_writable");s.inherits(i,u),o(a(c.prototype),function(e){i.prototype[e]||(i.prototype[e]=c.prototype[e])})}).call(this,e("_process"))},{"./_stream_readable":189,"./_stream_writable":191,_process:185,"core-util-is":192,inherits:183}],188:[function(e,t){function n(e){return this instanceof n?void i.call(this,e):new n(e)}t.exports=n;var i=e("./_stream_transform"),r=e("core-util-is");r.inherits=e("inherits"),r.inherits(n,i),n.prototype._transform=function(e,t,n){n(null,e)}},{"./_stream_transform":190,"core-util-is":192,inherits:183}],189:[function(e,t){(function(n){function i(t,n){var i=e("./_stream_duplex");t=t||{};var r=t.highWaterMark,o=t.objectMode?16:16384;this.highWaterMark=r||0===r?r:o,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!t.objectMode,n instanceof i&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(j||(j=e("string_decoder/").StringDecoder),this.decoder=new j(t.encoding),this.encoding=t.encoding)}function r(t){e("./_stream_duplex");return this instanceof r?(this._readableState=new i(t,this),this.readable=!0,void P.call(this)):new r(t)}function o(e,t,n,i,r){var o=c(t,n);if(o)e.emit("error",o);else if(T.isNullOrUndefined(n))t.reading=!1,t.ended||l(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!r){var s=new Error("stream.push() after EOF");e.emit("error",s)}else if(t.endEmitted&&r){var s=new Error("stream.unshift() after end event");e.emit("error",s)}else!t.decoder||r||i||(n=t.decoder.write(n)),r||(t.reading=!1),t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&h(e)),p(e,t);else r||(t.reading=!1);return a(t)}function a(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function s(e){if(e>=L)e=L;else{e--;for(var t=1;32>t;t<<=1)e|=e>>t;e++}return e}function u(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:isNaN(e)||T.isNull(e)?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:0>=e?0:(e>t.highWaterMark&&(t.highWaterMark=s(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function c(e,t){var n=null;return T.isBuffer(t)||T.isString(t)||T.isNullOrUndefined(t)||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function l(e,t){if(t.decoder&&!t.ended){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,h(e)}function h(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(S("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?n.nextTick(function(){f(e)}):f(e))}function f(e){S("emit readable"),e.emit("readable"),y(e)}function p(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(function(){d(e,t)}))}function d(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(S("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function g(e){return function(){var t=e._readableState;S("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&R.listenerCount(e,"data")&&(t.flowing=!0,y(e))}}function v(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(function(){m(e,t)}))}function m(e,t){t.resumeScheduled=!1,e.emit("resume"),y(e),t.flowing&&!t.reading&&e.read(0)}function y(e){var t=e._readableState;if(S("flow",t.flowing),t.flowing)do var n=e.read();while(null!==n&&t.flowing)}function b(e,t){var n,i=t.buffer,r=t.length,o=!!t.decoder,a=!!t.objectMode;if(0===i.length)return null;if(0===r)n=null;else if(a)n=i.shift();else if(!e||e>=r)n=o?i.join(""):E.concat(i,r),i.length=0;else if(e<i[0].length){var s=i[0];n=s.slice(0,e),i[0]=s.slice(e)}else if(e===i[0].length)n=i.shift();else{n=o?"":new E(e);for(var u=0,c=0,l=i.length;l>c&&e>u;c++){var s=i[0],h=Math.min(e-u,s.length);o?n+=s.slice(0,h):s.copy(n,u,0,h),h<s.length?i[0]=s.slice(h):i.shift(),u+=h}}return n}function _(e){var t=e._readableState;if(t.length>0)throw new Error("endReadable called on non-empty stream");t.endEmitted||(t.ended=!0,n.nextTick(function(){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}))}function w(e,t){for(var n=0,i=e.length;i>n;n++)t(e[n],n)}function x(e,t){for(var n=0,i=e.length;i>n;n++)if(e[n]===t)return n;return-1}t.exports=r;var k=e("isarray"),E=e("buffer").Buffer;r.ReadableState=i;var R=e("events").EventEmitter;R.listenerCount||(R.listenerCount=function(e,t){return e.listeners(t).length});var P=e("stream"),T=e("core-util-is");T.inherits=e("inherits");var j,S=e("util");S=S&&S.debuglog?S.debuglog("stream"):function(){},T.inherits(r,P),r.prototype.push=function(e,t){var n=this._readableState;return T.isString(e)&&!n.objectMode&&(t=t||n.defaultEncoding,t!==n.encoding&&(e=new E(e,t),t="")),o(this,n,e,t,!1)},r.prototype.unshift=function(e){var t=this._readableState;return o(this,t,e,"",!0)},r.prototype.setEncoding=function(t){return j||(j=e("string_decoder/").StringDecoder),this._readableState.decoder=new j(t),this._readableState.encoding=t,this};var L=8388608;r.prototype.read=function(e){S("read",e);var t=this._readableState,n=e;if((!T.isNumber(e)||e>0)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return S("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?_(this):h(this),null;if(e=u(e,t),0===e&&t.ended)return 0===t.length&&_(this),null;var i=t.needReadable;S("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&(i=!0,S("length less than watermark",i)),(t.ended||t.reading)&&(i=!1,S("reading or ended",i)),i&&(S("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),i&&!t.reading&&(e=u(n,t));var r;return r=e>0?b(e,t):null,T.isNull(r)&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),n!==e&&t.ended&&0===t.length&&_(this),T.isNull(r)||this.emit("data",r),r},r.prototype._read=function(){this.emit("error",new Error("not implemented"))},r.prototype.pipe=function(e,t){function i(e){S("onunpipe"),e===h&&o()}function r(){S("onend"),e.end()}function o(){S("cleanup"),e.removeListener("close",u),e.removeListener("finish",c),e.removeListener("drain",v),e.removeListener("error",s),e.removeListener("unpipe",i),h.removeListener("end",r),h.removeListener("end",o),h.removeListener("data",a),!f.awaitDrain||e._writableState&&!e._writableState.needDrain||v()}function a(t){S("ondata");var n=e.write(t);!1===n&&(S("false write response, pause",h._readableState.awaitDrain),h._readableState.awaitDrain++,h.pause())}function s(t){S("onerror",t),l(),e.removeListener("error",s),0===R.listenerCount(e,"error")&&e.emit("error",t)}function u(){e.removeListener("finish",c),l()}function c(){S("onfinish"),e.removeListener("close",u),l()}function l(){S("unpipe"),h.unpipe(e)}var h=this,f=this._readableState;switch(f.pipesCount){case 0:f.pipes=e;break;case 1:f.pipes=[f.pipes,e];break;default:f.pipes.push(e)}f.pipesCount+=1,S("pipe count=%d opts=%j",f.pipesCount,t);var p=(!t||t.end!==!1)&&e!==n.stdout&&e!==n.stderr,d=p?r:o;f.endEmitted?n.nextTick(d):h.once("end",d),e.on("unpipe",i);var v=g(h);return e.on("drain",v),h.on("data",a),e._events&&e._events.error?k(e._events.error)?e._events.error.unshift(s):e._events.error=[s,e._events.error]:e.on("error",s),e.once("close",u),e.once("finish",c),e.emit("pipe",h),f.flowing||(S("pipe resume"),h.resume()),e},r.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var r=0;i>r;r++)n[r].emit("unpipe",this);return this}var r=x(t.pipes,e);return-1===r?this:(t.pipes.splice(r,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},r.prototype.on=function(e,t){var i=P.prototype.on.call(this,e,t);if("data"===e&&!1!==this._readableState.flowing&&this.resume(),"readable"===e&&this.readable){var r=this._readableState;if(!r.readableListening)if(r.readableListening=!0,r.emittedReadable=!1,r.needReadable=!0,r.reading)r.length&&h(this,r);else{var o=this;n.nextTick(function(){S("readable nexttick read 0"),o.read(0)})}}return i},r.prototype.addListener=r.prototype.on,r.prototype.resume=function(){var e=this._readableState;return e.flowing||(S("resume"),e.flowing=!0,e.reading||(S("resume read 0"),this.read(0)),v(this,e)),this},r.prototype.pause=function(){return S("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(S("pause"),this._readableState.flowing=!1,this.emit("pause")),this},r.prototype.wrap=function(e){var t=this._readableState,n=!1,i=this;e.on("end",function(){if(S("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&i.push(e)}i.push(null)}),e.on("data",function(r){if(S("wrapped data"),t.decoder&&(r=t.decoder.write(r)),r&&(t.objectMode||r.length)){var o=i.push(r);o||(n=!0,e.pause())}});for(var r in e)T.isFunction(e[r])&&T.isUndefined(this[r])&&(this[r]=function(t){return function(){return e[t].apply(e,arguments)}}(r));var o=["error","close","destroy","pause","resume"];return w(o,function(t){e.on(t,i.emit.bind(i,t))}),i._read=function(t){S("wrapped _read",t),n&&(n=!1,e.resume())},i},r._fromList=b}).call(this,e("_process"))},{"./_stream_duplex":187,_process:185,buffer:178,"core-util-is":192,events:182,inherits:183,isarray:184,stream:197,"string_decoder/":198,util:177}],190:[function(e,t){function n(e,t){this.afterTransform=function(e,n){return i(t,e,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function i(e,t,n){var i=e._transformState;i.transforming=!1;var r=i.writecb;if(!r)return e.emit("error",new Error("no writecb in Transform class"));i.writechunk=null,i.writecb=null,s.isNullOrUndefined(n)||e.push(n),r&&r(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function r(e){if(!(this instanceof r))return new r(e);a.call(this,e),this._transformState=new n(e,this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("prefinish",function(){s.isFunction(this._flush)?this._flush(function(e){o(t,e)}):o(t)})}function o(e,t){if(t)return e.emit("error",t);var n=e._writableState,i=e._transformState;if(n.length)throw new Error("calling transform done when ws.length != 0");if(i.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}t.exports=r;var a=e("./_stream_duplex"),s=e("core-util-is");s.inherits=e("inherits"),s.inherits(r,a),r.prototype.push=function(e,t){return this._transformState.needTransform=!1,a.prototype.push.call(this,e,t)},r.prototype._transform=function(){throw new Error("not implemented")},r.prototype._write=function(e,t,n){var i=this._transformState;if(i.writecb=n,i.writechunk=e,i.writeencoding=t,!i.transforming){var r=this._readableState;(i.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},r.prototype._read=function(){var e=this._transformState;s.isNull(e.writechunk)||!e.writecb||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))}},{"./_stream_duplex":187,"core-util-is":192,inherits:183}],191:[function(e,t){(function(n){function i(e,t,n){this.chunk=e,this.encoding=t,this.callback=n}function r(t,n){var i=e("./_stream_duplex");t=t||{};var r=t.highWaterMark,o=t.objectMode?16:16384;this.highWaterMark=r||0===r?r:o,this.objectMode=!!t.objectMode,n instanceof i&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var a=t.decodeStrings===!1;this.decodeStrings=!a,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){p(n,e)},this.writecb=null,this.writelen=0,this.buffer=[],this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function o(t){var n=e("./_stream_duplex");return this instanceof o||this instanceof n?(this._writableState=new r(t,this),this.writable=!0,void k.call(this)):new o(t)}function a(e,t,i){var r=new Error("write after end");e.emit("error",r),n.nextTick(function(){i(r)})}function s(e,t,i,r){var o=!0;if(!(x.isBuffer(i)||x.isString(i)||x.isNullOrUndefined(i)||t.objectMode)){var a=new TypeError("Invalid non-string/buffer chunk");e.emit("error",a),n.nextTick(function(){r(a)}),o=!1}return o}function u(e,t,n){return!e.objectMode&&e.decodeStrings!==!1&&x.isString(t)&&(t=new w(t,n)),t}function c(e,t,n,r,o){n=u(t,n,r),x.isBuffer(n)&&(r="buffer");var a=t.objectMode?1:n.length;t.length+=a;var s=t.length<t.highWaterMark;return s||(t.needDrain=!0),t.writing||t.corked?t.buffer.push(new i(n,r,o)):l(e,t,!1,a,n,r,o),s}function l(e,t,n,i,r,o,a){t.writelen=i,t.writecb=a,t.writing=!0,t.sync=!0,n?e._writev(r,t.onwrite):e._write(r,o,t.onwrite),t.sync=!1}function h(e,t,i,r,o){i?n.nextTick(function(){t.pendingcb--,o(r)}):(t.pendingcb--,o(r)),e._writableState.errorEmitted=!0,e.emit("error",r)}function f(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function p(e,t){var i=e._writableState,r=i.sync,o=i.writecb;if(f(i),t)h(e,i,r,t,o);else{var a=m(e,i);a||i.corked||i.bufferProcessing||!i.buffer.length||v(e,i),r?n.nextTick(function(){d(e,i,a,o)}):d(e,i,a,o)}}function d(e,t,n,i){n||g(e,t),t.pendingcb--,i(),b(e,t)}function g(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function v(e,t){if(t.bufferProcessing=!0,e._writev&&t.buffer.length>1){for(var n=[],i=0;i<t.buffer.length;i++)n.push(t.buffer[i].callback);t.pendingcb++,l(e,t,!0,t.length,t.buffer,"",function(e){for(var i=0;i<n.length;i++)t.pendingcb--,n[i](e)}),t.buffer=[]}else{for(var i=0;i<t.buffer.length;i++){var r=t.buffer[i],o=r.chunk,a=r.encoding,s=r.callback,u=t.objectMode?1:o.length;if(l(e,t,!1,u,o,a,s),t.writing){i++;break}}i<t.buffer.length?t.buffer=t.buffer.slice(i):t.buffer.length=0}t.bufferProcessing=!1}function m(e,t){return t.ending&&0===t.length&&!t.finished&&!t.writing}function y(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function b(e,t){var n=m(e,t);return n&&(0===t.pendingcb?(y(e,t),t.finished=!0,e.emit("finish")):y(e,t)),n}function _(e,t,i){t.ending=!0,b(e,t),i&&(t.finished?n.nextTick(i):e.once("finish",i)),t.ended=!0}t.exports=o;var w=e("buffer").Buffer;o.WritableState=r;var x=e("core-util-is");x.inherits=e("inherits");var k=e("stream");x.inherits(o,k),o.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},o.prototype.write=function(e,t,n){var i=this._writableState,r=!1;return x.isFunction(t)&&(n=t,t=null),x.isBuffer(e)?t="buffer":t||(t=i.defaultEncoding),x.isFunction(n)||(n=function(){}),i.ended?a(this,i,n):s(this,i,e,n)&&(i.pendingcb++,r=c(this,i,e,t,n)),r},o.prototype.cork=function(){var e=this._writableState;e.corked++},o.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.buffer.length||v(this,e))},o.prototype._write=function(e,t,n){n(new Error("not implemented"))},o.prototype._writev=null,o.prototype.end=function(e,t,n){var i=this._writableState;x.isFunction(e)?(n=e,e=null,t=null):x.isFunction(t)&&(n=t,t=null),x.isNullOrUndefined(e)||this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||_(this,i,n)}}).call(this,e("_process"))},{"./_stream_duplex":187,_process:185,buffer:178,"core-util-is":192,inherits:183,stream:197}],192:[function(e,t,n){(function(e){function t(e){return Array.isArray(e)}function i(e){return"boolean"==typeof e}function r(e){return null===e}function o(e){return null==e}function a(e){return"number"==typeof e}function s(e){return"string"==typeof e}function u(e){return"symbol"==typeof e}function c(e){return void 0===e}function l(e){return h(e)&&"[object RegExp]"===m(e)}function h(e){return"object"==typeof e&&null!==e}function f(e){return h(e)&&"[object Date]"===m(e)}function p(e){return h(e)&&("[object Error]"===m(e)||e instanceof Error)}function d(e){return"function"==typeof e}function g(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function v(t){return e.isBuffer(t)}function m(e){return Object.prototype.toString.call(e)}n.isArray=t,n.isBoolean=i,n.isNull=r,n.isNullOrUndefined=o,n.isNumber=a,n.isString=s,n.isSymbol=u,n.isUndefined=c,n.isRegExp=l,n.isObject=h,n.isDate=f,n.isError=p,n.isFunction=d,n.isPrimitive=g,n.isBuffer=v}).call(this,e("buffer").Buffer)},{buffer:178}],193:[function(e,t){t.exports=e("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":188}],194:[function(e,t,n){n=t.exports=e("./lib/_stream_readable.js"),n.Stream=e("stream"),n.Readable=n,n.Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":187,"./lib/_stream_passthrough.js":188,"./lib/_stream_readable.js":189,"./lib/_stream_transform.js":190,"./lib/_stream_writable.js":191,stream:197}],195:[function(e,t){t.exports=e("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":190}],196:[function(e,t){t.exports=e("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":191}],197:[function(e,t){function n(){i.call(this)}t.exports=n;var i=e("events").EventEmitter,r=e("inherits");r(n,i),n.Readable=e("readable-stream/readable.js"),n.Writable=e("readable-stream/writable.js"),n.Duplex=e("readable-stream/duplex.js"),n.Transform=e("readable-stream/transform.js"),n.PassThrough=e("readable-stream/passthrough.js"),n.Stream=n,n.prototype.pipe=function(e,t){function n(t){e.writable&&!1===e.write(t)&&c.pause&&c.pause()}function r(){c.readable&&c.resume&&c.resume()}function o(){l||(l=!0,e.end())}function a(){l||(l=!0,"function"==typeof e.destroy&&e.destroy())}function s(e){if(u(),0===i.listenerCount(this,"error"))throw e}function u(){c.removeListener("data",n),e.removeListener("drain",r),c.removeListener("end",o),c.removeListener("close",a),c.removeListener("error",s),e.removeListener("error",s),c.removeListener("end",u),c.removeListener("close",u),e.removeListener("close",u)}var c=this;c.on("data",n),e.on("drain",r),e._isStdio||t&&t.end===!1||(c.on("end",o),c.on("close",a));var l=!1;return c.on("error",s),e.on("error",s),c.on("end",u),c.on("close",u),e.on("close",u),e.emit("pipe",c),e}},{events:182,inherits:183,"readable-stream/duplex.js":186,"readable-stream/passthrough.js":193,"readable-stream/readable.js":194,"readable-stream/transform.js":195,"readable-stream/writable.js":196}],198:[function(e,t,n){function i(e){if(e&&!u(e))throw new Error("Unknown encoding: "+e)}function r(e){return e.toString(this.encoding)}function o(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function a(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}var s=e("buffer").Buffer,u=s.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},c=n.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),i(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=a;break;default:return void(this.write=r)}this.charBuffer=new s(6),this.charReceived=0,this.charLength=0};c.prototype.write=function(e){for(var t="";this.charLength;){var n=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";e=e.slice(n,e.length),t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var i=t.charCodeAt(t.length-1);if(!(i>=55296&&56319>=i)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var r=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,r),r-=this.charReceived),t+=e.toString(this.encoding,0,r);var r=t.length-1,i=t.charCodeAt(r);if(i>=55296&&56319>=i){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),e.copy(this.charBuffer,0,0,o),t.substring(0,r)}return t},c.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var n=e[e.length-t];if(1==t&&n>>5==6){this.charLength=2;break}if(2>=t&&n>>4==14){this.charLength=3;break}if(3>=t&&n>>3==30){this.charLength=4;break}}this.charReceived=t},c.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var n=this.charReceived,i=this.charBuffer,r=this.encoding;t+=i.slice(0,n).toString(r)}return t}},{buffer:178}],199:[function(e,t){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],200:[function(e,t,n){(function(t,i){function r(e,t){var i={seen:[],stylize:a};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),g(t)?i.showHidden=t:t&&n._extend(i,t),w(i.showHidden)&&(i.showHidden=!1),w(i.depth)&&(i.depth=2),w(i.colors)&&(i.colors=!1),w(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=o),u(i,e,i.depth)}function o(e,t){var n=r.styles[t];return n?"["+r.colors[n][0]+"m"+e+"["+r.colors[n][1]+"m":e}function a(e){return e}function s(e){var t={};return e.forEach(function(e){t[e]=!0}),t}function u(e,t,i){if(e.customInspect&&t&&P(t.inspect)&&t.inspect!==n.inspect&&(!t.constructor||t.constructor.prototype!==t)){var r=t.inspect(i,e);return b(r)||(r=u(e,r,i)),r}var o=c(e,t);if(o)return o;var a=Object.keys(t),g=s(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(t)),R(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return l(t);if(0===a.length){if(P(t)){var v=t.name?": "+t.name:"";return e.stylize("[Function"+v+"]","special")}if(x(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(E(t))return e.stylize(Date.prototype.toString.call(t),"date");if(R(t))return l(t)}var m="",y=!1,_=["{","}"];if(d(t)&&(y=!0,_=["[","]"]),P(t)){var w=t.name?": "+t.name:"";m=" [Function"+w+"]"}if(x(t)&&(m=" "+RegExp.prototype.toString.call(t)),E(t)&&(m=" "+Date.prototype.toUTCString.call(t)),R(t)&&(m=" "+l(t)),0===a.length&&(!y||0==t.length))return _[0]+m+_[1];if(0>i)return x(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var k;return k=y?h(e,t,i,g,a):a.map(function(n){return f(e,t,i,g,n,y)}),e.seen.pop(),p(k,m,_)}function c(e,t){if(w(t))return e.stylize("undefined","undefined");if(b(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return y(t)?e.stylize(""+t,"number"):g(t)?e.stylize(""+t,"boolean"):v(t)?e.stylize("null","null"):void 0}function l(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,n,i,r){for(var o=[],a=0,s=t.length;s>a;++a)o.push(A(t,String(a))?f(e,t,n,i,String(a),!0):"");return r.forEach(function(r){r.match(/^\d+$/)||o.push(f(e,t,n,i,r,!0))}),o}function f(e,t,n,i,r,o){var a,s,c;if(c=Object.getOwnPropertyDescriptor(t,r)||{value:t[r]},c.get?s=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(s=e.stylize("[Setter]","special")),A(i,r)||(a="["+r+"]"),s||(e.seen.indexOf(c.value)<0?(s=v(n)?u(e,c.value,null):u(e,c.value,n-1),s.indexOf("\n")>-1&&(s=o?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n"))):s=e.stylize("[Circular]","special")),w(a)){if(o&&r.match(/^\d+$/))return s;a=JSON.stringify(""+r),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function p(e,t,n){var i=0,r=e.reduce(function(e,t){return i++,t.indexOf("\n")>=0&&i++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return r>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function d(e){return Array.isArray(e)}function g(e){return"boolean"==typeof e}function v(e){return null===e}function m(e){return null==e}function y(e){return"number"==typeof e}function b(e){return"string"==typeof e}function _(e){return"symbol"==typeof e}function w(e){return void 0===e}function x(e){return k(e)&&"[object RegExp]"===j(e)}function k(e){return"object"==typeof e&&null!==e}function E(e){return k(e)&&"[object Date]"===j(e)}function R(e){return k(e)&&("[object Error]"===j(e)||e instanceof Error)}function P(e){return"function"==typeof e}function T(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function j(e){return Object.prototype.toString.call(e)}function S(e){return 10>e?"0"+e.toString(10):e.toString(10)}function L(){var e=new Date,t=[S(e.getHours()),S(e.getMinutes()),S(e.getSeconds())].join(":");return[e.getDate(),M[e.getMonth()],t].join(" ")}function A(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var N=/%[sdj%]/g;n.format=function(e){if(!b(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(r(arguments[n]));return t.join(" ")}for(var n=1,i=arguments,o=i.length,a=String(e).replace(N,function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch(e){return"[Circular]"}default:return e}}),s=i[n];o>n;s=i[++n])a+=v(s)||!k(s)?" "+s:" "+r(s);return a},n.deprecate=function(e,r){function o(){if(!a){if(t.throwDeprecation)throw new Error(r);t.traceDeprecation?console.trace(r):console.error(r),a=!0}return e.apply(this,arguments)}if(w(i.process))return function(){return n.deprecate(e,r).apply(this,arguments)};if(t.noDeprecation===!0)return e;var a=!1;return o};var C,O={};n.debuglog=function(e){if(w(C)&&(C=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!O[e])if(new RegExp("\\b"+e+"\\b","i").test(C)){var i=t.pid;O[e]=function(){var t=n.format.apply(n,arguments);console.error("%s %d: %s",e,i,t)}}else O[e]=function(){};return O[e]},n.inspect=r,r.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},r.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=d,n.isBoolean=g,n.isNull=v,n.isNullOrUndefined=m,n.isNumber=y,n.isString=b,n.isSymbol=_,n.isUndefined=w,n.isRegExp=x,n.isObject=k,n.isDate=E,n.isError=R,n.isFunction=P,n.isPrimitive=T,n.isBuffer=e("./support/isBuffer");var M=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",L(),n.format.apply(n,arguments))},n.inherits=e("inherits"),n._extend=function(e,t){if(!t||!k(t))return e;for(var n=Object.keys(t),i=n.length;i--;)e[n[i]]=t[n[i]];return e}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":199,_process:185,inherits:183}],201:[function(e,t){function n(){return[].slice.call(arguments).join("//")}function i(){return[].slice.call(arguments).map(function(e){return"object"==typeof e?JSON.stringify(e):e}).join("//")}function r(e,t,n,i){var r=1;if(/^\d+$/.test(e))return void(t[e]={});var o=e.match(p)||0;o&&(o=o&&parseInt(o[1],10),r=o+1,e=e.replace(p,""));var a=e.match(d)||0;a&&(a=a&&parseInt(a[1],10),n=a-1,e=e.replace(d,""));var s=h(r,n);if(e&&"*"!==e){if("odd"===e||"even"===e){var u="even"===e?0:1;f(s,2,u).forEach(function(e){t[e]={}})}else if("string"==typeof e&&~e.indexOf("%")){var c=e.split("%"),g=c[0]&&parseInt(c[0],10)||1,v=parseInt(c[1],10);l(o,n,g,v).forEach(function(e){t[e]={}})}else if("function"==typeof i){var m=i(e,r,n);Array.isArray(m)&&m.forEach(function(e){t[e]={}})}}else s.forEach(function(e){t[e]={}})}function o(e){var t=[];return Object.keys(e).forEach(function(n){Object.keys(e[n]).forEach(function(i){Object.keys(e[n][i]).forEach(function(e){e=10>e?"0"+e:e,t.push([n,i,e].join("."))})})}),t}function a(e,t){if(!e)throw new Error('Invalid "notes" array');if(!t||"object"!=typeof t)throw new Error('Invalid "options" object');if("number"!=typeof t.beatsPerBar||t.beatsPerBar<0)throw new Error("Invalid options: beatsPerBar is not a valid number");if("number"!=typeof t.barsPerLoop||t.barsPerLoop<0)throw new Error("Invalid options: barsPerLoop is not a valid number");var n=[];return e.forEach(function(e){var i=e[0];return u(i)?n.push(e):void g(i,t.barsPerLoop,t.beatsPerBar,t.expander).forEach(function(t){var i=e.slice();i[0]=t,n.push(i)})}),n}var s=e("meemo"),u=s(function(e){return!!e.match(/^\d+\.\d+\.\d+$/)}),c=s(function(e){return e.split(".").map(function(e){var t=parseInt(e,10);return e.match(/^\d+$/)&&!isNaN(t)?t:e})}),l=s(function(e,t,n,i){for(var r=[];t>=n;)n>e&&r.push(n),n+=i;return r},i),h=s(function(e,t){for(var n=[],i=e;t>=i;)n.push(i),i++;return n},n),f=s(function(e,t,n){return e.filter(function(e){return e%t===n})},n),p=/>(\d+)/,d=/<(\d+)/,g=s(function(e,t,n,i){var a=c(e),s={};return r(a[0],s,t,i),Object.keys(s).forEach(function(e){r(a[1],s[e],n,i),Object.keys(s[e]).forEach(function(t){r(a[2],s[e][t],96,i)})}),o(s)},n);t.exports=a},{meemo:236}],202:[function(e,t){function n(e,t){if(!(this instanceof n))return new n(e,t);if(!e||"object"!=typeof e||"function"!=typeof e.createScriptProcessor)throw new Error("Invalid arguments: cannot init without AudioContext");i.EventEmitter.call(this),t=t||{},this.context=e,this.clock=o(this.context),this.scheduler=a(),this.expressions=s,this.expandNote=t.expandNote,this.upstartWait=t.upstartWait||250,this.setTempo(t.tempo||120),this.setBeatsPerBar(t.beatsPerBar||4),this.setLoopLength(t.loopLength||2),this._position="0.0.00",this.clock.on("data",this.updatePositionFromClock.bind(this)),this.clock.pipe(this.scheduler).on("data",this.emitStep.bind(this)),this._keepAlive=this._keepAlive.bind(this)}var i=e("events"),r=e("util").inherits,o=e("./vendor/bopper"),a=e("./vendor/ditty"),s=e("dilla-expressions"),u=e("meemo"),c=e("./lib/checkValid"),l=e("./lib/positionHelper"),h=(new Date).valueOf(),f="//";r(n,i.EventEmitter);var p=n.prototype;p.updatePositionFromClock=function(e){
var t=this.getPositionFromTime(e.time);this._position!==t&&(this._position=t,this.emit("tick",{position:this._position,context:this.context}))},p.getPositionFromTime=function(e){var t=this.clock._state.cycleLength*this.clock._state.preCycle*1,n=this.clock.getPositionAt(e-t);return this.getPositionFromClockPosition(n)},p.getPositionFromClockPosition=function(e){if(c.number("clockPosition",e),0>e)return"0.0.00";var t=this._loopLength*this._beatsPerBar,n=Math.floor(e/t)||0;e-=n*t;var i=Math.floor(e/this._beatsPerBar);e-=i*this._beatsPerBar;var r=Math.floor(e);e-=r;var o=Math.floor(96*e)+1;return 10>o&&(o="0"+o),i+1+"."+(r+1)+"."+o},p.getClockPositionFromPosition=u(function(e){var t=e.split("."),n=parseInt(t[0],10)-1,i=parseInt(t[1],10)-1,r=parseInt(t[2],10)-1;return n*this._beatsPerBar+i+r/96}),p.getPositionWithOffset=u(function(e,t){if(!c.positionString(e))throw new Error("Invalid argument: position is not a valid position string");if("number"!=typeof t||isNaN(t)||t%1!==0)throw new Error("Invalid argument: offset is not a valid number");if(!t)return e;var n=this.getClockPositionFromPosition(e),i=t/96;return this.getPositionFromClockPosition(n+i)},function(e,t){return e+f+t}),p.getDurationFromTicks=function(e){return c.positiveNumber("ticks",e),1/96*e},p.emitStep=function(e){var t=e.offset=this.clock._state.cycleLength*this.clock._state.preCycle*1,n=e.args;e.time=e.time+t,e.clockPosition=e.position,e.position="start"===e.event?n.position:n.duration?this.getPositionWithOffset(n.position,n.duration):n.position,("stop"!==e.event||e.position!==n.position)&&(e.context=this.context,this.emit("step",e))},p.notesForSet=u(function(e,t,n,i){var r=this;t.forEach(function(e,n){!Array.isArray(e)&&"object"==typeof e&&e.position&&(t[n]=[e.position,e])}),t=r.expressions(t,{beatsPerBar:n,barsPerLoop:i});var o=!1;return t.forEach(function(e,a){if(l.isPositionWithinBounds(e[0],i,n)){r.expandNote&&(e=r.expandNote(e));var s=l.normalizeNote(e);t[a]=[r.getClockPositionFromPosition(s.position),r.getDurationFromTicks(s.duration||0),null,null,s]}else t[a]=null,o=!0}),o?t.filter(function(e){return!!e}):t},function(e,t,n,i){return e+f+JSON.stringify(t)+f+n+f+i}),p.set=function(e,t){if("string"!=typeof e)throw new Error("Invalid argument: id is not a valid string");if(!t||!Array.isArray(t))throw new Error("Invalid argument: notes is not a valid array");this.scheduler.set(e,this.notesForSet(e,t,this.beatsPerBar(),this.loopLength()),this.beatsPerBar()*this.loopLength())},p.get=function(e){if("string"!=typeof e)throw new Error("Invalid argument: id is not a valid string");return(this.scheduler.get(e)||[]).map(function(e){return e[4]})},p.channels=function(){return this.scheduler.getIds()},p.clear=function(e){var t=this;if(e){if("string"!=typeof e)throw new Error("Invalid argument: id is not a valid string");this.set(e,[])}else this.scheduler.getIds().forEach(function(e){t.clear(e)})},p._keepAlive=function(){this.clock._state.playing&&(window.__lastDillaPosition=this._position,setTimeout(window.requestAnimationFrame.bind(null,this._keepAlive),100))},p.start=function e(){var t=(new Date).valueOf(),n=t-h;return n<this.upstartWait?setTimeout(e.bind(this),this.upstartWait-n):void(this.clock._state.playing||(this.clock.start(),this._keepAlive(),this.emit("playing")))},p.pause=function(){this.clock._state.playing&&(this.clock.stop(),this.emit("paused"))},p.stop=function(){this.clock._state.playing&&(this.clock.stop(),this.emit("paused"),this.clock.setPosition(0),this._position="0.0.00")},p.position=function(){return this._position},p.setPosition=function(e){if(!l.isPositionWithinBounds(e,this.loopLength(),this.beatsPerBar()))throw new Error("Invalid argument: position is not valid");this._position=e,this.clock.setPosition(this.getClockPositionFromPosition(e))},p.tempo=function(){return this.clock.getTempo()},p.setTempo=function(e){if("number"!=typeof e||0>e||isNaN(e))throw new Error("Invalid argument: tempo is not a valid number");this.clock.setTempo(e)},p.beatsPerBar=function(){return this._beatsPerBar},p.setBeatsPerBar=function(e){c.positiveNumber("beats",e),this._beatsPerBar=e},p.loopLength=function(){return this._loopLength},p.setLoopLength=function(e){c.positiveNumber("bars",e),this._loopLength=e},t.exports=n},{"./lib/checkValid":203,"./lib/positionHelper":204,"./vendor/bopper":207,"./vendor/ditty":208,"dilla-expressions":201,events:182,meemo:236,util:200}],203:[function(e,t){var n={number:function(e,t){if("number"!=typeof t||isNaN(t))throw new Error("Invalid argument: "+e+" is not a valid number")},positiveNumber:function(e,t){if(n.number(e,t),0>t)throw new Error("Invalid argument: "+e+" is not a valid positive number")},positionString:function(e){return"string"==typeof e&&!!e.match(/\d\.\d\.\d+/)}};t.exports=n},{}],204:[function(e,t){var n=e("./checkValid"),i=e("meemo"),r={normalizeNote:i(function(e){if(!e||!Array.isArray(e))throw new Error("Invalid argument: note params is not valid array");var t="object"==typeof e[1]?e[1]:"object"==typeof e[0]?e[0]:{position:""},i="string"==typeof e[0]&&n.positionString(e[0])?e[0]:"string"==typeof t.position&&n.positionString(t.position)?t.position:null;if(!i)throw new Error("Invalid argument: position is not valid");return t.position=i,t},function(e){return JSON.stringify(e)}),isPositionWithinBounds:i(function(e,t,i){if(!n.positionString(e))return!1;var r=e.split("."),o=parseInt(r[0],10)-1,a=parseInt(r[1],10)-1,s=parseInt(r[2],10)-1;return 0>s||0>a||0>o||s>=96||a>=i||o>=t?!1:!0},function(e,t,n){return e+"//"+t+"//"+n})};t.exports=r},{"./checkValid":203,meemo:236}],205:[function(e,t){function n(){function e(e){for(var t=0;t<n.length;t++)n[t](e)}function t(e){function t(){var t=n.indexOf(e);-1!==t&&n.splice(t,1)}return n.push(e),t}var n=[];return{broadcast:e,listen:t}}t.exports=n},{}],206:[function(e,t){function n(e){var t=i();return e(t.broadcast),t.listen}var i=e("./event.js");t.exports=n},{"./event.js":205}],207:[function(e,t){function n(e){if(!(this instanceof n))return new n(e);var t=this;r.call(this),this.readable=!0,this.writable=!1,this.context=e;var a=this._processor=e.createScriptProcessor(512,1,1),s=i.bind(this);this._processor.onaudioprocess=s;var u=120,c=1/e.sampleRate*this._processor.bufferSize;this._state={lastTo:0,lastEndTime:0,playing:!1,bpm:u,beatDuration:60/u,increment:u/60*c,cycleLength:c,preCycle:4},this.onSchedule=o(function(e){t.on("data",e)}),a.connect(e.destination)}function i(){var e=this._state;this.schedule(e.cycleLength*e.preCycle)}var r=e("stream"),o=e("geval"),a=e("util").inherits;t.exports=n,a(n,r);var s=n.prototype;s.start=function(){this._state.playing=!0,this.emit("start")},s.stop=function(){this._state.playing=!1,this.emit("stop")},s.schedule=function(e){var t=this._state,n=(this.context.currentTime,this.context.currentTime+e),i=t.lastEndTime;if(n>=i&&(t.lastEndTime=n,t.playing)){var e=n-i,r=e/t.beatDuration,o=t.lastTo,a=o+r;t.lastTo=a,this._schedule(i,o,a)}},s.setTempo=function(e){var t=e/60,n=this._state;n.beatDuration=60/e,n.increment=t*n.cycleLength,n.bpm=e,this.emit("tempo",n.bpm)},s.getTempo=function(){return this._state.bpm},s.isPlaying=function(){return this._state.playing},s.setPosition=function(e){this._state.lastTo=parseFloat(e)},s.setSpeed=function(e){var t=this._state;e=parseFloat(e)||0;var n=t.bpm*e,i=n/60;t.beatDuration=60/n,t.increment=i*t.cycleLength},s.getPositionAt=function(e){var t=this._state,n=t.lastEndTime-e;return t.lastTo-n/t.beatDuration},s.getTimeAt=function(e){var t=this._state,n=this.getCurrentPosition()-e;return this.context.currentTime-n*t.beatDuration},s.getCurrentPosition=function(){return this.getPositionAt(this.context.currentTime)},s.getNextScheduleTime=function(){var e=this._state;return e.lastEndTime},s.getBeatDuration=function(){var e=this._state;return e.beatDuration};var u={from:0,to:0,time:0,duration:0,beatDuration:0};s._schedule=function(e,t,n){var i=this._state,r=(n-t)*i.beatDuration;u.from=t,u.to=n,u.time=e,u.duration=r,u.beatDuration=i.beatDuration,this.emit("data",u)}},{geval:206,stream:197,util:200}],208:[function(e,t){function n(){return this instanceof n?(o.call(this),this.readable=!0,this.writable=!0,void(this._state={loops:{},lengths:{},ids:[],queue:[]})):new n}function i(e,t,n){var i=e%n,r=t%n,o=t+i-r;return t>o?o+n:o}function r(e,t){return!("stop"!==e.event||t&&t.length)}t.exports=n;var o=e("stream"),a=e("util").inherits;a(n,o);var s=n.prototype;s.set=function(e,t,n){var i=this._state;if(t)i.loops[e]||i.ids.push(e),i.loops[e]=t,i.lengths[e]=n||8;else{var r=i.ids.indexOf(e);~r&&i.ids.splice(r,1),i.loops[e]=null}i.loops[e]?this.emit("change",{id:e,events:i.loops[e],length:i.lengths[e]}):this.emit("change",{id:e})},s.get=function(e){return this._state.loops[e]},s.getLength=function(e){return this._state.lengths[e]},s.getIds=function(){return this._state.ids},s.getDescriptors=function(){for(var e,t=this._state,n=[],i=0,r=t.ids.length;r>i;i++)e=t.ids[i],t.loops[e]&&n.push({id:e,length:t.lengths[e],events:t.loops[e]});return n},s.update=function(e){this.set(e.id,e.events,e.length)},s.push=function(e){this.emit("data",e)},s.write=function(e){this._transform(e)},s._updateItemProperties=function(e,t,n){var i=this._state,o=n.from,a=n.to,s=n.time,u=(n.time+n.duration,n.beatDuration),c=i.queue;if(a>t.position||r(t,i.loops[t.id])){if(a>t.position){var l=(t.position-o)*u;t.time=s+l}else t.time=s,t.position=o;c.splice(e,1),this.push(t)}},s._queueEvent=function(e,t,n,r,o){var a=o.from,s=o.to,u=o.time,c=o.beatDuration,l=i(e[0],a,r),h=l+e[1];if(l>=a&&s>l){var f=(l-a)*c,p=e[1]*c,d=u+f,g=d+p;n.push({id:t,event:"start",position:l,args:e[4],time:d}),p&&n.push({id:t,event:"stop",position:h,args:e[4],time:g})}},s._transform=function(e){for(var t,n,i,r,o=window.performance.now(),a=(o+5e3*e.duration,this._state),s=(e.from,e.to,e.time,e.time+e.duration),u=(e.beatDuration,a.ids),c=a.queue,l=[],h=c.length-1;h>=0;h--)this._updateItemProperties(h,c[h],e);for(var f=0,p=u.length;p>f;f++){t=u[f],n=a.loops[t],i=a.lengths[t];for(var d=0,g=n.length;g>d;d++)this._queueEvent(n[d],t,l,i,e)}for(var v=0,m=l.length;m>v;v++)r=l[v],r.time<s?this.push(r):c.push(r)}},{stream:197,util:200}],209:[function(e,t){"use strict";function n(e){if(void 0===e||null===e)throw new TypeError("Cannot convert first argument to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(void 0!==i&&null!==i)for(var r=Object.keys(Object(i)),o=0,a=r.length;a>o;o++){var s=r[o],u=Object.getOwnPropertyDescriptor(i,s);void 0!==u&&u.enumerable&&(t[s]=i[s])}}return t}function i(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:n})}t.exports={assign:n,polyfill:i}},{}],210:[function(e,t){function n(e,t,n){function r(){v&&clearTimeout(v),f&&clearTimeout(f),f=v=m=void 0}function s(){var n=t-(u()-d);if(0>=n||n>t){f&&clearTimeout(f);var i=m;f=v=m=void 0,i&&(y=u(),p=e.apply(g,h),v||f||(h=g=null))}else v=setTimeout(s,n)}function c(){v&&clearTimeout(v),f=v=m=void 0,(_||b!==t)&&(y=u(),p=e.apply(g,h),v||f||(h=g=null))}function l(){if(h=arguments,d=u(),g=this,m=_&&(v||!w),b===!1)var n=w&&!v;else{f||w||(y=d);var i=b-(d-y),r=0>=i||i>b;r?(f&&(f=clearTimeout(f)),y=d,p=e.apply(g,h)):f||(f=setTimeout(c,i))}return r&&v?v=clearTimeout(v):v||t===b||(v=setTimeout(s,t)),n&&(r=!0,p=e.apply(g,h)),!r||v||f||(h=g=null),p}var h,f,p,d,g,v,m,y=0,b=!1,_=!0;if("function"!=typeof e)throw new TypeError(o);if(t=0>t?0:+t||0,n===!0){var w=!0;_=!1}else i(n)&&(w=n.leading,b="maxWait"in n&&a(+n.maxWait||0,t),_="trailing"in n?n.trailing:_);return l.cancel=r,l}function i(e){var t=typeof e;return"function"==t||!!e&&"object"==t}var r=e("lodash.isnative"),o="Expected a function",a=Math.max,s=r(s=Date.now)&&s,u=s||function(){return(new Date).getTime()};t.exports=n},{"lodash.isnative":211}],211:[function(e,t){function n(e){return!!e&&"object"==typeof e}function i(e){return null==e?!1:r(e)?c.test(s.call(e)):n(e)&&o.test(e)}var r=e("lodash.isfunction"),o=/^\[object .+?Constructor\]$/,a=Object.prototype,s=Function.prototype.toString,u=a.hasOwnProperty,c=RegExp("^"+s.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=i},{"lodash.isfunction":212}],212:[function(e,t,n){arguments[4][55][0].apply(n,arguments)},{dup:55}],213:[function(e,t){function n(e){return!!e&&"object"==typeof e}function i(e,t){return l(e,t,v)}function r(e,t,u,l,h){if(!s(e))return e;var f=a(t.length)&&(p(t)||g(t));return(f?c:i)(t,function(t,i,a){if(n(t))return l||(l=[]),h||(h=[]),o(e,a,i,r,u,l,h);var s=e[i],c=u?u(s,t,i,e,a):void 0,p="undefined"==typeof c;p&&(c=t),!f&&"undefined"==typeof c||!p&&(c===c?c===s:s!==s)||(e[i]=c)}),e}function o(e,t,n,i,r,o,s){for(var c=o.length,l=t[n];c--;)if(o[c]==l)return void(e[n]=s[c]);var h=e[n],v=r?r(h,l,n,e,t):void 0,y="undefined"==typeof v;y&&(v=l,a(l.length)&&(p(l)||g(l))?v=p(h)?h:h&&h.length?u(h):[]:d(l)||f(l)?v=f(h)?m(h):d(h)?h:{}:y=!1),o.push(l),s.push(v),y?e[n]=i(v,l,r,o,s):(v===v?v!==h:h===h)&&(e[n]=v)}function a(e){return"number"==typeof e&&e>-1&&e%1==0&&y>=e}function s(e){var t=typeof e;return"function"==t||!!e&&"object"==t}var u=e("lodash._arraycopy"),c=e("lodash._arrayeach"),l=e("lodash._basefor"),h=e("lodash._createassigner"),f=e("lodash.isarguments"),p=e("lodash.isarray"),d=(e("lodash.isnative"),e("lodash.isplainobject")),g=e("lodash.istypedarray"),v=e("lodash.keys"),m=(e("lodash.keysin"),e("lodash.toplainobject")),y=Math.pow(2,53)-1,b=h(r);t.exports=b},{"lodash._arraycopy":214,"lodash._arrayeach":215,"lodash._basefor":216,"lodash._createassigner":217,"lodash.isarguments":221,"lodash.isarray":222,"lodash.isnative":223,"lodash.isplainobject":225,"lodash.istypedarray":226,"lodash.keys":227,"lodash.keysin":229,"lodash.toplainobject":230}],214:[function(e,t,n){arguments[4][76][0].apply(n,arguments)},{dup:76}],215:[function(e,t,n){arguments[4][50][0].apply(n,arguments)},{dup:50}],216:[function(e,t,n){arguments[4][106][0].apply(n,arguments)},{dup:106}],217:[function(e,t,n){arguments[4][67][0].apply(n,arguments)},{dup:67,"lodash._bindcallback":218,"lodash._isiterateecall":219,"lodash.restparam":220}],218:[function(e,t,n){arguments[4][52][0].apply(n,arguments)},{dup:52}],219:[function(e,t,n){arguments[4][69][0].apply(n,arguments)},{dup:69}],220:[function(e,t,n){arguments[4][70][0].apply(n,arguments)},{dup:70}],221:[function(e,t,n){arguments[4][54][0].apply(n,arguments)},{dup:54}],222:[function(e,t,n){arguments[4][80][0].apply(n,arguments)},{dup:80}],223:[function(e,t,n){arguments[4][211][0].apply(n,arguments)},{dup:211,"lodash.isfunction":224}],224:[function(e,t,n){arguments[4][55][0].apply(n,arguments)},{dup:55}],225:[function(e,t){function n(e){return!!e&&"object"==typeof e}function i(e,t){return o(e,t,s)}function r(e){var t;if(!n(e)||h.call(e)!=u||a(e)||!l.call(e,"constructor")&&(t=e.constructor,"function"==typeof t&&!(t instanceof t)))return!1;var r;return i(e,function(e,t){r=t}),void 0===r||l.call(e,r)}var o=e("lodash._basefor"),a=e("lodash.isarguments"),s=e("lodash.keysin"),u="[object Object]",c=Object.prototype,l=c.hasOwnProperty,h=c.toString;t.exports=r},{"lodash._basefor":216,"lodash.isarguments":221,"lodash.keysin":229}],226:[function(e,t,n){arguments[4][132][0].apply(n,arguments)},{dup:132}],227:[function(e,t,n){arguments[4][57][0].apply(n,arguments)},{dup:57,"lodash._getnative":228,"lodash.isarguments":221,"lodash.isarray":222}],228:[function(e,t,n){arguments[4][58][0].apply(n,arguments)},{dup:58}],229:[function(e,t,n){arguments[4][155][0].apply(n,arguments)},{dup:155,"lodash.isarguments":221,"lodash.isarray":222}],230:[function(e,t){function n(e){return i(e,r(e))}var i=e("lodash._basecopy"),r=e("lodash.keysin");t.exports=n},{"lodash._basecopy":231,"lodash.keysin":229}],231:[function(e,t,n){arguments[4][66][0].apply(n,arguments)},{dup:66}],232:[function(e,t){function n(e){return function(t,n,o){return t=i(t),t&&(e?t:"")+r(t,n,o)+(e?"":t)}}var i=e("lodash._basetostring"),r=e("lodash._createpadding"),o=n();t.exports=o},{"lodash._basetostring":233,"lodash._createpadding":234}],233:[function(e,t,n){arguments[4][63][0].apply(n,arguments)},{dup:63}],234:[function(e,t){(function(n){function i(e,t,n){var i=e.length;if(t=+t,i>=t||!a(t))return"";var s=t-i;return n=null==n?" ":n+"",r(n,o(s/n.length)).slice(0,s)}var r=e("lodash.repeat"),o=Math.ceil,a=n.isFinite;t.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"lodash.repeat":235}],235:[function(e,t){(function(n){function i(e,t){var n="";if(e=r(e),t=+t,1>t||!e||!a(t))return n;do t%2&&(n+=e),t=o(t/2),e+=e;while(t);return n}var r=e("lodash._basetostring"),o=Math.floor,a=n.isFinite;t.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"lodash._basetostring":233}],236:[function(e,t){function n(){this.__data__={}}function i(e){return this.has(e)&&delete this.__data__[e]}function r(e){return"__proto__"==e?void 0:this.__data__[e]}function o(e){return"__proto__"!=e&&h.call(this.__data__,e)}function a(e,t){return"__proto__"!=e&&(this.__data__[e]=t),this}function s(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError(c);var n,i,r,o=function(){n=new Array(arguments.length);for(var a=0,s=arguments.length;s>a;a++)n[a]=arguments[a];if(i=t?t.apply(this,n):n[0],r=o.cache,r.has(i))return r.get(i);var u=e.apply(this,n);return o.cache=r.set(i,u),u};return o.cache=new s.Cache,o}var u=e("./lib/global"),c="Expected a function",l=Object.prototype,h=l.hasOwnProperty;n.prototype.delete=i,n.prototype.get=r,n.prototype.has=o,n.prototype.set=a,s.Cache=u.Map||n,t.exports=s},{"./lib/global":237}],237:[function(e,t){(function(e){"undefined"!=typeof window?t.exports=window:"undefined"!=typeof e?t.exports=e:"undefined"!=typeof self&&(t.exports=self)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],238:[function(e,t){function n(e){var t=e.createGain();t.output=e.createGain();var n=e.createGain();t.connect(n);var s=r(n),u=e.createDelay(4),c=t._filter=e.createBiquadFilter(),l=e.createGain(),h=e.createGain(),f=e.createGain();u.connect(n);var p=o(s),d=e.createGain();return d.gain.value=1,p.connect(d),u.delayTime.value=0,d.connect(u.delayTime),t.connect(f),t.connect(u),u.connect(c),c.connect(h),c.connect(l),l.connect(u),f.connect(t.output),h.connect(t.output),t.wet=h.gain,t.wet.value=1,t.dry=f.gain,t.dry.value=1,t.cutoff=c.frequency,t.cutoff.value=2e4,t.feedback=l.gain,t.feedback.value=.6,t.time=p.gain,t.time.value=.25,this._syncing=!1,t._refreshTimeMultiplier=i.bind(t),t._timeMultiplier=d.gain,Object.defineProperties(t,a),t}function i(){this._timeMultiplier.value=this.sync&&this.tempo?60/this.tempo:1}function r(e){var t=e.context.createWaveShaper();return t.curve=s,e.connect(t),t}function o(e){var t=e.context.createGain();return e.connect(t),t}t.exports=n;var a={sync:{get:function(){return this._sync},set:function(e){this._sync=e,this._refreshTimeMultiplier()}},tempo:{get:function(){return this._tempo},set:function(e){this._tempo=e,this._refreshTimeMultiplier()}},filterType:{get:function(){return this._filter.type},set:function(e){this._filter.type=e}},connect:{value:function(){this.output.connect.apply(this.output,arguments)}},disconnect:{value:function(){this.output.disconnect.apply(this.output,arguments)}}},s=new Float32Array([1,1])},{}],239:[function(e,t){function n(e){var t=e.createGain(),n=i(t);t.output=e.createGain();var s=e.createGain();s.gain.value=0;var u=e.createGain();u.gain.value=1;var c=e.createBiquadFilter();c.frequency.value=800;var l=e.createWaveShaper(),h=e.createBiquadFilter();h.frequency.value=3e3;var f=r(n);f.gain.value=.5,f.connect(s.gain);var p=e.createGain();p.gain.value=-1,f.connect(p),p.connect(u.gain),t.connect(s),t.connect(u),s.connect(c),u.connect(l),c.connect(l),l.connect(h),h.connect(t.output),t.preBand=f.gain,t.color=c.frequency,t.postCut=h.frequency,t.connect=o,t.disconnect=a;for(var d=22050,g=new Float32Array(d),v=Math.PI/180,m=0;d>m;m++){var y=2*m/d-1;g[m]=13*y*20*v/(Math.PI+10*Math.abs(y))}return l.curve=g,t}function i(e){var t=e.context.createWaveShaper();return t.curve=s,e.connect(t),t}function r(e){var t=e.context.createGain();return e.connect(t),t}function o(){this.output.connect.apply(this.output,arguments)}function a(){this.output.disconnect.apply(this.output,arguments)}t.exports=n;var s=new Float32Array([1,1])},{}],240:[function(e,t){function n(e,t,n,u){s+=1;var c=a[s]={id:s,cb:u,length:e,decay:t,reverse:n,impulseL:new Float32Array(e),impulseR:new Float32Array(e)};return o.push([c.id,0,Math.min(r,e)]),setTimeout(i,1),s}function i(){var e=o.shift();if(e){var t=a[e[0]];if(t){for(var n=t.length,s=t.decay,u=t.reverse,c=e[1],l=e[2],h=t.impulseL,f=t.impulseR,p=c;l>p;p++){var d=u?n-p:p;h[p]=(2*Math.random()-1)*Math.pow(1-d/n,s),f[p]=(2*Math.random()-1)*Math.pow(1-d/n,s)}l>=n-1?(delete a[e[0]],t.cb([t.impulseL,t.impulseR])):o.push([t.id,l,Math.min(l+r,n)])}}o.length&&setTimeout(i,5)}t.exports=n;var r=2048,o=[],a={},s=0;n.cancel=function(e){return a[e]?(delete a[e],!0):!1}},{}],241:[function(e,t){function n(e){var t=e.createGain(),n=t._dry=e.createGain(),i=t._wet=e.createGain(),o=t.output=e.createGain(),a=t._convolver=e.createConvolver(),s=t._filter=e.createBiquadFilter();return t.connect(n),t.connect(i),a.connect(s),n.connect(o),i.connect(a),s.connect(o),Object.defineProperties(t,r),t._time=3,t._decay=2,t._reverse=!1,t.cutoff.value=2e4,t.filterType="lowpass",t._building=!1,t._buildImpulse(),t}var i=e("./build-impulse");t.exports=n;var r={connect:{value:function(){this.output.connect.apply(this.output,arguments)}},disconnect:{value:function(){this.output.disconnect.apply(this.output,arguments)}},wet:{get:function(){return this._wet.gain}},dry:{get:function(){return this._dry.gain}},cutoff:{get:function(){return this._filter.frequency}},filterType:{get:function(){return this._filter.type},set:function(e){this._filter.type=e}},_buildImpulse:{value:function(){var e=this,t=e.context.sampleRate,n=Math.max(t*e.time,1);e._building&&i.cancel(e._building),e._building=i(n,e.decay,e.reverse,function(i){var r=e.context.createBuffer(2,n,t);r.getChannelData(0).set(i[0]),r.getChannelData(1).set(i[1]),e._convolver.buffer=r,e._building=!1})}},time:{enumerable:!0,get:function(){return this._time},set:function(e){this._time=e,this._buildImpulse()}},decay:{enumerable:!0,get:function(){return this._decay},set:function(e){this._decay=e,this._buildImpulse()}},reverse:{enumerable:!0,get:function(){return this._reverse},set:function(e){this._reverse=e,this._buildImpulse()}}}},{"./build-impulse":240}],242:[function(e,t){!function(e){function n(){return i}function i(t){if(!(this instanceof i))return new i(t);if(e.AudioContext||(e.AudioContext=e.webkitAudioContext),t||(console.log("tuna.js: Missing audio context! Creating a new context for you."),t=e.AudioContext&&new e.AudioContext),!t)throw new Error("Tuna cannot initialize because this environment does not support web audio.");r(t),l=t,h=this}function r(e){function t(){var e=Array.prototype.shift.apply(arguments);return e=p.isPrototypeOf?p.isPrototypeOf(e)?e.input:e:e.input||e,arguments=Array.prototype.slice.call(arguments),arguments.unshift(e),r.apply(this,arguments),e}if(e.__connectified__!==!0){var n=e.createGain(),i=Object.getPrototypeOf(Object.getPrototypeOf(n)),r=i.connect;i.connect=t,e.__connectified__=!0}}function o(e){return Math.max(0,Math.round(100*Math.pow(2,e/6))/100)}function a(e,t){var n,i,r=0,o=0,a=0,s=0;return n=e.toExponential().match(/^.\.?(.*)e(.+)$/),r=parseInt(n[2],10)-(n[1]+"").length,n=t.toExponential().match(/^.\.?(.*)e(.+)$/),o=parseInt(n[2],10)-(n[1]+"").length,o>r&&(r=o),i=e%t,-100>r||r>20?(a=Math.round(Math.log(i)/Math.log(10)),s=Math.pow(10,a),(i/s).toFixed(a-r)*s):parseFloat(i.toFixed(-r))}function s(e){return 0===e?1:Math.abs(e)/e}function u(e){return(Math.exp(e)-Math.exp(-e))/(Math.exp(e)+Math.exp(-e))}function c(e,t){return void 0===e?t:e}var l,h,f=function(e,t){e.value=t},p=Object.create(null,{activate:{writable:!0,value:function(e){e?(this.input.disconnect(),this.input.connect(this.activateNode),this.activateCallback&&this.activateCallback(e)):(this.input.disconnect(),this.input.connect(this.output))}},bypass:{get:function(){return this._bypass},set:function(e){this._lastBypassValue!==e&&(this._bypass=e,this.activate(!e),this._lastBypassValue=e)}},connect:{value:function(e){this.output.connect(e)}},disconnect:{value:function(e){this.output.disconnect(e)}},connectInOrder:{value:function(e){for(var t=e.length-1;t--;){if(!e[t].connect)return console.error("AudioNode.connectInOrder: TypeError: Not an AudioNode.",e[t]);e[t].connect(e[t+1].input?e[t+1].input:e[t+1])}}},getDefaults:{value:function(){var e={};for(var t in this.defaults)e[t]=this.defaults[t].value;return e}},automate:{value:function(e,t,n,i){var r,o=i?~~(i/1e3):l.currentTime,a=n?~~(n/1e3):0,s=this.defaults[e],u=this[e];u?s.automatable?(n?(r="linearRampToValueAtTime",u.cancelScheduledValues(o),u.setValueAtTime(u.value,o)):r="setValueAtTime",u[r](t,a+o)):u=t:console.error("Invalid Property for "+this.name)}}}),d="float",g="boolean",v="string",m="int";"undefined"!=typeof t&&t.exports?t.exports=i:"function"==typeof define?e.define("Tuna",n):e.Tuna=i,i.prototype.Bitcrusher=function(e){e||(e=this.getDefaults()),this.bufferSize=e.bufferSize||this.defaults.bufferSize.value,this.input=l.createGain(),this.activateNode=l.createGain(),this.processor=l.createScriptProcessor(this.bufferSize,1,1),this.output=l.createGain(),this.activateNode.connect(this.processor),this.processor.connect(this.output);var t,n,i,r,o,a=0,s=0;this.processor.onaudioprocess=function(e){for(t=e.inputBuffer.getChannelData(0),n=e.outputBuffer.getChannelData(0),i=Math.pow(.5,this.bits),o=t.length,r=0;o>r;r++)a+=this.normfreq,a>=1&&(a-=1,s=i*Math.floor(t[r]/i+.5)),n[r]=s},this.bits=e.bits||this.defaults.bits.value,this.normfreq=c(e.normfreq,this.defaults.normfreq.value),this.bypass=e.bypass||!1},i.prototype.Bitcrusher.prototype=Object.create(p,{name:{value:"Bitcrusher"},defaults:{writable:!0,value:{bits:{value:4,min:1,max:16,automatable:!1,type:m},bufferSize:{value:4096,min:256,max:16384,automatable:!1,type:m},bypass:{value:!0,automatable:!1,type:g},normfreq:{value:.1,min:1e-4,max:1,automatable:!1,type:d}}},bits:{enumerable:!0,get:function(){return this.processor.bits},set:function(e){this.processor.bits=e}},normfreq:{enumerable:!0,get:function(){return this.processor.normfreq},set:function(e){this.processor.normfreq=e}}}),i.prototype.Cabinet=function(e){e||(e=this.getDefaults()),this.input=l.createGain(),this.activateNode=l.createGain(),this.convolver=this.newConvolver(e.impulsePath||"../impulses/impulse_guitar.wav"),this.makeupNode=l.createGain(),this.output=l.createGain(),this.activateNode.connect(this.convolver.input),this.convolver.output.connect(this.makeupNode),this.makeupNode.connect(this.output),this.makeupGain=c(e.makeupGain,this.defaults.makeupGain),this.bypass=e.bypass||!1},i.prototype.Cabinet.prototype=Object.create(p,{name:{value:"Cabinet"},defaults:{writable:!0,value:{makeupGain:{value:1,min:0,max:20,automatable:!0,type:d},bypass:{value:!1,automatable:!1,type:g}}},makeupGain:{enumerable:!0,get:function(){return this.makeupNode.gain},set:function(e){this.makeupNode.gain.value=e}},newConvolver:{value:function(e){return new h.Convolver({impulse:e,dryLevel:0,wetLevel:1})}}}),i.prototype.Chorus=function(e){e||(e=this.getDefaults()),this.input=l.createGain(),this.attenuator=this.activateNode=l.createGain(),this.splitter=l.createChannelSplitter(2),this.delayL=l.createDelay(),this.delayR=l.createDelay(),this.feedbackGainNodeLR=l.createGain(),this.feedbackGainNodeRL=l.createGain(),this.merger=l.createChannelMerger(2),this.output=l.createGain(),this.lfoL=new h.LFO({target:this.delayL.delayTime,callback:f}),this.lfoR=new h.LFO({target:this.delayR.delayTime,callback:f}),this.input.connect(this.attenuator),this.attenuator.connect(this.output),this.attenuator.connect(this.splitter),this.splitter.connect(this.delayL,0),this.splitter.connect(this.delayR,1),this.delayL.connect(this.feedbackGainNodeLR),this.delayR.connect(this.feedbackGainNodeRL),this.feedbackGainNodeLR.connect(this.delayR),this.feedbackGainNodeRL.connect(this.delayL),this.delayL.connect(this.merger,0,0),this.delayR.connect(this.merger,0,1),this.merger.connect(this.output),this.feedback=c(e.feedback,this.defaults.feedback.value),this.rate=c(e.rate,this.defaults.rate.value),this.delay=c(e.delay,this.defaults.delay.value),this.depth=c(e.depth,this.defaults.depth.value),this.lfoR.phase=Math.PI/2,this.attenuator.gain.value=.6934,this.lfoL.activate(!0),this.lfoR.activate(!0),this.bypass=e.bypass||!1},i.prototype.Chorus.prototype=Object.create(p,{name:{value:"Chorus"},defaults:{writable:!0,value:{feedback:{value:.4,min:0,max:.95,automatable:!1,type:d},delay:{value:.0045,min:0,max:1,automatable:!1,type:d},depth:{value:.7,min:0,max:1,automatable:!1,type:d},rate:{value:1.5,min:0,max:8,automatable:!1,type:d},bypass:{value:!0,automatable:!1,type:g}}},delay:{enumerable:!0,get:function(){return this._delay},set:function(e){this._delay=4e-4*Math.pow(10,e),this.lfoL.offset=this._delay,this.lfoR.offset=this._delay,this._depth=this._depth}},depth:{enumerable:!0,get:function(){return this._depth},set:function(e){this._depth=e,this.lfoL.oscillation=this._depth*this._delay,this.lfoR.oscillation=this._depth*this._delay}},feedback:{enumerable:!0,get:function(){return this._feedback},set:function(e){this._feedback=e,this.feedbackGainNodeLR.gain.value=this._feedback,this.feedbackGainNodeRL.gain.value=this._feedback}},rate:{enumerable:!0,get:function(){return this._rate},set:function(e){this._rate=e,this.lfoL.frequency=this._rate,this.lfoR.frequency=this._rate}}}),i.prototype.Compressor=function(e){e||(e=this.getDefaults()),this.input=l.createGain(),this.compNode=this.activateNode=l.createDynamicsCompressor(),this.makeupNode=l.createGain(),this.output=l.createGain(),this.compNode.connect(this.makeupNode),this.makeupNode.connect(this.output),this.automakeup=c(e.automakeup,this.defaults.automakeup.value),this.makeupGain=e.makeupGain||this.defaults.makeupGain.value,this.threshold=c(e.threshold,this.defaults.threshold.value),this.release=e.release||this.defaults.release.value,this.attack=c(e.attack,this.defaults.attack.value),this.ratio=e.ratio||this.defaults.ratio.value,this.knee=c(e.knee,this.defaults.knee.value),this.bypass=e.bypass||!1},i.prototype.Compressor.prototype=Object.create(p,{name:{value:"Compressor"},defaults:{writable:!0,value:{threshold:{value:-20,min:-60,max:0,automatable:!0,type:d},release:{value:250,min:10,max:2e3,automatable:!0,type:d},makeupGain:{value:1,min:1,max:100,automatable:!0,type:d},attack:{value:1,min:0,max:1e3,automatable:!0,type:d},ratio:{value:4,min:1,max:50,automatable:!0,type:d},knee:{value:5,min:0,max:40,automatable:!0,type:d},automakeup:{value:!1,automatable:!1,type:g},bypass:{value:!0,automatable:!1,type:g}}},computeMakeup:{value:function(){var e=4,t=this.compNode;return-(t.threshold.value-t.threshold.value/t.ratio.value)/e}},automakeup:{enumerable:!0,get:function(){return this._automakeup},set:function(e){this._automakeup=e,this._automakeup&&(this.makeupGain=this.computeMakeup())}},threshold:{enumerable:!0,get:function(){return this.compNode.threshold},set:function(e){this.compNode.threshold.value=e,this._automakeup&&(this.makeupGain=this.computeMakeup())}},ratio:{enumerable:!0,get:function(){return this.compNode.ratio},set:function(e){this.compNode.ratio.value=e,this._automakeup&&(this.makeupGain=this.computeMakeup())}},knee:{enumerable:!0,get:function(){return this.compNode.knee},set:function(e){this.compNode.knee.value=e,this._automakeup&&(this.makeupGain=this.computeMakeup())}},attack:{enumerable:!0,get:function(){return this.compNode.attack},set:function(e){this.compNode.attack.value=e/1e3}},release:{enumerable:!0,get:function(){return this.compNode.release},set:function(e){this.compNode.release=e/1e3}},makeupGain:{
enumerable:!0,get:function(){return this.makeupNode.gain},set:function(e){this.makeupNode.gain.value=o(e)}}}),i.prototype.Convolver=function(e){e||(e=this.getDefaults()),this.input=l.createGain(),this.activateNode=l.createGain(),this.convolver=l.createConvolver(),this.dry=l.createGain(),this.filterLow=l.createBiquadFilter(),this.filterHigh=l.createBiquadFilter(),this.wet=l.createGain(),this.output=l.createGain(),this.activateNode.connect(this.filterLow),this.activateNode.connect(this.dry),this.filterLow.connect(this.filterHigh),this.filterHigh.connect(this.convolver),this.convolver.connect(this.wet),this.wet.connect(this.output),this.dry.connect(this.output),this.dryLevel=c(e.dryLevel,this.defaults.dryLevel.value),this.wetLevel=c(e.wetLevel,this.defaults.wetLevel.value),this.highCut=e.highCut||this.defaults.highCut.value,this.buffer=e.impulse||"../impulses/ir_rev_short.wav",this.lowCut=e.lowCut||this.defaults.lowCut.value,this.level=c(e.level,this.defaults.level.value),this.filterHigh.type="lowpass",this.filterLow.type="highpass",this.bypass=e.bypass||!1},i.prototype.Convolver.prototype=Object.create(p,{name:{value:"Convolver"},defaults:{writable:!0,value:{highCut:{value:22050,min:20,max:22050,automatable:!0,type:d},lowCut:{value:20,min:20,max:22050,automatable:!0,type:d},dryLevel:{value:1,min:0,max:1,automatable:!0,type:d},wetLevel:{value:1,min:0,max:1,automatable:!0,type:d},level:{value:1,min:0,max:1,automatable:!0,type:d}}},lowCut:{get:function(){return this.filterLow.frequency},set:function(e){this.filterLow.frequency.value=e}},highCut:{get:function(){return this.filterHigh.frequency},set:function(e){this.filterHigh.frequency.value=e}},level:{get:function(){return this.output.gain},set:function(e){this.output.gain.value=e}},dryLevel:{get:function(){return this.dry.gain},set:function(e){this.dry.gain.value=e}},wetLevel:{get:function(){return this.wet.gain},set:function(e){this.wet.gain.value=e}},buffer:{enumerable:!1,get:function(){return this.convolver.buffer},set:function(e){var t=this.convolver,n=new XMLHttpRequest;return e?(n.open("GET",e,!0),n.responseType="arraybuffer",n.onreadystatechange=function(){4===n.readyState&&(n.status<300&&n.status>199||302===n.status)&&l.decodeAudioData(n.response,function(e){t.buffer=e},function(e){e&&console.log("Tuna.Convolver.setBuffer: Error decoding data"+e)})},void n.send(null)):void console.log("Tuna.Convolver.setBuffer: Missing impulse path!")}}}),i.prototype.Delay=function(e){e||(e=this.getDefaults()),this.input=l.createGain(),this.activateNode=l.createGain(),this.dry=l.createGain(),this.wet=l.createGain(),this.filter=l.createBiquadFilter(),this.delay=l.createDelay(),this.feedbackNode=l.createGain(),this.output=l.createGain(),this.activateNode.connect(this.delay),this.activateNode.connect(this.dry),this.delay.connect(this.filter),this.filter.connect(this.feedbackNode),this.feedbackNode.connect(this.delay),this.feedbackNode.connect(this.wet),this.wet.connect(this.output),this.dry.connect(this.output),this.delayTime=e.delayTime||this.defaults.delayTime.value,this.feedback=c(e.feedback,this.defaults.feedback.value),this.wetLevel=c(e.wetLevel,this.defaults.wetLevel.value),this.dryLevel=c(e.dryLevel,this.defaults.dryLevel.value),this.cutoff=e.cutoff||this.defaults.cutoff.value,this.filter.type="lowpass",this.bypass=e.bypass||!1},i.prototype.Delay.prototype=Object.create(p,{name:{value:"Delay"},defaults:{writable:!0,value:{delayTime:{value:100,min:20,max:1e3,automatable:!1,type:d},feedback:{value:.45,min:0,max:.9,automatable:!0,type:d},cutoff:{value:2e4,min:20,max:2e4,automatable:!0,type:d},wetLevel:{value:.5,min:0,max:1,automatable:!0,type:d},dryLevel:{value:1,min:0,max:1,automatable:!0,type:d}}},delayTime:{enumerable:!0,get:function(){return this.delay.delayTime},set:function(e){this.delay.delayTime.value=e/1e3}},wetLevel:{enumerable:!0,get:function(){return this.wet.gain},set:function(e){this.wet.gain.value=e}},dryLevel:{enumerable:!0,get:function(){return this.dry.gain},set:function(e){this.dry.gain.value=e}},feedback:{enumerable:!0,get:function(){return this.feedbackNode.gain},set:function(e){this.feedbackNode.gain.value=e}},cutoff:{enumerable:!0,get:function(){return this.filter.frequency},set:function(e){this.filter.frequency.value=e}}}),i.prototype.Filter=function(e){e||(e=this.getDefaults()),this.input=l.createGain(),this.activateNode=l.createGain(),this.filter=l.createBiquadFilter(),this.output=l.createGain(),this.activateNode.connect(this.filter),this.filter.connect(this.output),this.frequency=e.frequency||this.defaults.frequency.value,this.Q=e.resonance||this.defaults.Q.value,this.filterType=c(e.filterType,this.defaults.filterType.value),this.gain=c(e.gain,this.defaults.gain.value),this.bypass=e.bypass||!1},i.prototype.Filter.prototype=Object.create(p,{name:{value:"Filter"},defaults:{writable:!0,value:{frequency:{value:800,min:20,max:22050,automatable:!0,type:d},Q:{value:1,min:.001,max:100,automatable:!0,type:d},gain:{value:0,min:-40,max:40,automatable:!0,type:d},bypass:{value:!0,automatable:!1,type:g},filterType:{value:"lowpass",automatable:!1,type:v}}},filterType:{enumerable:!0,get:function(){return this.filter.type},set:function(e){this.filter.type=e}},Q:{enumerable:!0,get:function(){return this.filter.Q},set:function(e){this.filter.Q.value=e}},gain:{enumerable:!0,get:function(){return this.filter.gain},set:function(e){this.filter.gain.value=e}},frequency:{enumerable:!0,get:function(){return this.filter.frequency},set:function(e){this.filter.frequency.value=e}}}),i.prototype.MoogFilter=function(e){e||(e=this.getDefaults()),this.bufferSize=e.bufferSize||this.defaults.bufferSize.value,this.input=l.createGain(),this.activateNode=l.createGain(),this.processor=l.createScriptProcessor(this.bufferSize,1,1),this.output=l.createGain(),this.activateNode.connect(this.processor),this.processor.connect(this.output);var t,n,i,r,o,a,s,u;t=n=i=r=o=a=s=u=0;var h,f,p,d,g,v;this.processor.onaudioprocess=function(e){for(h=e.inputBuffer.getChannelData(0),f=e.outputBuffer.getChannelData(0),p=1.16*this.cutoff,inputFactor=.35013*p*p*p*p,d=this.resonance*(1-.15*p*p),v=h.length,g=0;v>g;g++)h[g]-=u*d,h[g]*=inputFactor,o=h[g]+.3*t+(1-p)*o,t=h[g],a=o+.3*n+(1-p)*a,n=o,s=a+.3*i+(1-p)*s,i=a,u=s+.3*r+(1-p)*u,r=s,f[g]=u},this.cutoff=c(e.cutoff,this.defaults.cutoff.value),this.resonance=c(e.resonance,this.defaults.resonance.value),this.bypass=e.bypass||!1},i.prototype.MoogFilter.prototype=Object.create(p,{name:{value:"MoogFilter"},defaults:{writable:!0,value:{bufferSize:{value:4096,min:256,max:16384,automatable:!1,type:m},bypass:{value:!1,automatable:!1,type:g},cutoff:{value:.065,min:1e-4,max:1,automatable:!1,type:d},resonance:{value:3.5,min:0,max:4,automatable:!1,type:d}}},cutoff:{enumerable:!0,get:function(){return this.processor.cutoff},set:function(e){this.processor.cutoff=e}},resonance:{enumerable:!0,get:function(){return this.processor.resonance},set:function(e){this.processor.resonance=e}}}),i.prototype.Overdrive=function(e){e||(e=this.getDefaults()),this.input=l.createGain(),this.activateNode=l.createGain(),this.inputDrive=l.createGain(),this.waveshaper=l.createWaveShaper(),this.outputDrive=l.createGain(),this.output=l.createGain(),this.activateNode.connect(this.inputDrive),this.inputDrive.connect(this.waveshaper),this.waveshaper.connect(this.outputDrive),this.outputDrive.connect(this.output),this.ws_table=new Float32Array(this.k_nSamples),this.drive=c(e.drive,this.defaults.drive.value),this.outputGain=c(e.outputGain,this.defaults.outputGain.value),this.curveAmount=c(e.curveAmount,this.defaults.curveAmount.value),this.algorithmIndex=c(e.algorithmIndex,this.defaults.algorithmIndex.value),this.bypass=e.bypass||!1},i.prototype.Overdrive.prototype=Object.create(p,{name:{value:"Overdrive"},defaults:{writable:!0,value:{drive:{value:1,min:0,max:1,automatable:!0,type:d,scaled:!0},outputGain:{value:1,min:0,max:1,automatable:!0,type:d,scaled:!0},curveAmount:{value:.725,min:0,max:1,automatable:!1,type:d},algorithmIndex:{value:0,min:0,max:5,automatable:!1,type:m}}},k_nSamples:{value:8192},drive:{get:function(){return this.inputDrive.gain},set:function(e){this._drive=e}},curveAmount:{get:function(){return this._curveAmount},set:function(e){this._curveAmount=e,void 0===this._algorithmIndex&&(this._algorithmIndex=0),this.waveshaperAlgorithms[this._algorithmIndex](this._curveAmount,this.k_nSamples,this.ws_table),this.waveshaper.curve=this.ws_table}},outputGain:{get:function(){return this.outputDrive.gain},set:function(e){this._outputGain=o(e)}},algorithmIndex:{get:function(){return this._algorithmIndex},set:function(e){this._algorithmIndex=e,this.curveAmount=this._curveAmount}},waveshaperAlgorithms:{value:[function(e,t,n){e=Math.min(e,.9999);var i,r,o=2*e/(1-e);for(i=0;t>i;i++)r=2*i/t-1,n[i]=(1+o)*r/(1+o*Math.abs(r))},function(e,t,n){var i,r,o;for(i=0;t>i;i++)r=2*i/t-1,o=(.5*Math.pow(r+1.4,2)-1)*o>=0?5.8:1.2,n[i]=u(o)},function(e,t,n){var i,r,o,a=1-e;for(i=0;t>i;i++)r=2*i/t-1,o=0>r?-Math.pow(Math.abs(r),a+.04):Math.pow(r,a),n[i]=u(2*o)},function(e,t,n){var i,r,o,a,u=1-e>.99?.99:1-e;for(i=0;t>i;i++)r=2*i/t-1,a=Math.abs(r),u>a?o=a:a>u?o=u+(a-u)/(1+Math.pow((a-u)/(1-u),2)):a>1&&(o=a),n[i]=s(r)*o*(1/((u+1)/2))},function(e,t,n){var i,r;for(i=0;t>i;i++)r=2*i/t-1,n[i]=-.08905>r?-3/4*(1-Math.pow(1-(Math.abs(r)-.032857),12)+1/3*(Math.abs(r)-.032847))+.01:r>=-.08905&&.320018>r?-6.153*r*r+3.9375*r:.630035},function(e,t,n){var i,r,o=2+Math.round(14*e),a=Math.round(Math.pow(2,o-1));for(i=0;t>i;i++)r=2*i/t-1,n[i]=Math.round(r*a)/a}]}}),i.prototype.Phaser=function(e){e||(e=this.getDefaults()),this.input=l.createGain(),this.splitter=this.activateNode=l.createChannelSplitter(2),this.filtersL=[],this.filtersR=[],this.feedbackGainNodeL=l.createGain(),this.feedbackGainNodeR=l.createGain(),this.merger=l.createChannelMerger(2),this.filteredSignal=l.createGain(),this.output=l.createGain(),this.lfoL=new h.LFO({target:this.filtersL,callback:this.callback}),this.lfoR=new h.LFO({target:this.filtersR,callback:this.callback});for(var t=this.stage;t--;)this.filtersL[t]=l.createBiquadFilter(),this.filtersR[t]=l.createBiquadFilter(),this.filtersL[t].type="allpass",this.filtersR[t].type="allpass";this.input.connect(this.splitter),this.input.connect(this.output),this.splitter.connect(this.filtersL[0],0,0),this.splitter.connect(this.filtersR[0],1,0),this.connectInOrder(this.filtersL),this.connectInOrder(this.filtersR),this.filtersL[this.stage-1].connect(this.feedbackGainNodeL),this.filtersL[this.stage-1].connect(this.merger,0,0),this.filtersR[this.stage-1].connect(this.feedbackGainNodeR),this.filtersR[this.stage-1].connect(this.merger,0,1),this.feedbackGainNodeL.connect(this.filtersL[0]),this.feedbackGainNodeR.connect(this.filtersR[0]),this.merger.connect(this.output),this.rate=c(e.rate,this.defaults.rate.value),this.baseModulationFrequency=e.baseModulationFrequency||this.defaults.baseModulationFrequency.value,this.depth=c(e.depth,this.defaults.depth.value),this.feedback=c(e.feedback,this.defaults.feedback.value),this.stereoPhase=c(e.stereoPhase,this.defaults.stereoPhase.value),this.lfoL.activate(!0),this.lfoR.activate(!0),this.bypass=e.bypass||!1},i.prototype.Phaser.prototype=Object.create(p,{name:{value:"Phaser"},stage:{value:4},defaults:{writable:!0,value:{rate:{value:.1,min:0,max:8,automatable:!1,type:d},depth:{value:.6,min:0,max:1,automatable:!1,type:d},feedback:{value:.7,min:0,max:1,automatable:!1,type:d},stereoPhase:{value:40,min:0,max:180,automatable:!1,type:d},baseModulationFrequency:{value:700,min:500,max:1500,automatable:!1,type:d}}},callback:{value:function(e,t){for(var n=0;4>n;n++)e[n].frequency.value=t}},depth:{get:function(){return this._depth},set:function(e){this._depth=e,this.lfoL.oscillation=this._baseModulationFrequency*this._depth,this.lfoR.oscillation=this._baseModulationFrequency*this._depth}},rate:{get:function(){return this._rate},set:function(e){this._rate=e,this.lfoL.frequency=this._rate,this.lfoR.frequency=this._rate}},baseModulationFrequency:{enumerable:!0,get:function(){return this._baseModulationFrequency},set:function(e){this._baseModulationFrequency=e,this.lfoL.offset=this._baseModulationFrequency,this.lfoR.offset=this._baseModulationFrequency,this._depth=this._depth}},feedback:{get:function(){return this._feedback},set:function(e){this._feedback=e,this.feedbackGainNodeL.gain.value=this._feedback,this.feedbackGainNodeR.gain.value=this._feedback}},stereoPhase:{get:function(){return this._stereoPhase},set:function(e){this._stereoPhase=e;var t=this.lfoL._phase+this._stereoPhase*Math.PI/180;t=a(t,2*Math.PI),this.lfoR._phase=t}}}),i.prototype.PingPongDelay=function(e){e||(e=this.getDefaults()),this.input=l.createGain(),this.wetLevel=l.createGain(),this.stereoToMonoMix=l.createGain(),this.feedbackLevel=l.createGain(),this.output=l.createGain(),this.delayLeft=l.createDelay(),this.delayRight=l.createDelay(),this.activateNode=l.createGain(),this.splitter=l.createChannelSplitter(2),this.merger=l.createChannelMerger(2),this.activateNode.connect(this.splitter),this.splitter.connect(this.stereoToMonoMix,0,0),this.splitter.connect(this.stereoToMonoMix,1,0),this.stereoToMonoMix.gain.value=.5,this.stereoToMonoMix.connect(this.wetLevel),this.wetLevel.connect(this.delayLeft),this.feedbackLevel.connect(this.delayLeft),this.delayLeft.connect(this.delayRight),this.delayRight.connect(this.feedbackLevel),this.delayLeft.connect(this.merger,0,0),this.delayRight.connect(this.merger,0,1),this.merger.connect(this.output),this.activateNode.connect(this.output),this.delayTimeLeft=void 0!==e.delayTimeLeft?e.delayTimeLeft:this.defaults.delayTimeLeft.value,this.delayTimeRight=void 0!==e.delayTimeRight?e.delayTimeRight:this.defaults.delayTimeRight.value,this.feedbackLevel.gain.value=void 0!==e.feedback?e.feedback:this.defaults.feedback.value,this.wetLevel.gain.value=void 0!==e.wetLevel?e.wetLevel:this.defaults.wetLevel.value,this.bypass=e.bypass||!1},i.prototype.PingPongDelay.prototype=Object.create(p,{name:{value:"PingPongDelay"},delayTimeLeft:{enumerable:!0,get:function(){return this._delayTimeLeft},set:function(e){this._delayTimeLeft=e,this.delayLeft.delayTime.value=e/1e3}},delayTimeRight:{enumerable:!0,get:function(){return this._delayTimeRight},set:function(e){this._delayTimeRight=e,this.delayRight.delayTime.value=e/1e3}},defaults:{writable:!0,value:{delayTimeLeft:{value:200,min:1,max:1e4,automatable:!1,type:m},delayTimeRight:{value:400,min:1,max:1e4,automatable:!1,type:m},feedback:{value:.3,min:0,max:1,automatable:!1,type:d},wetLevel:{value:.5,min:0,max:1,automatable:!1,type:d}}}}),i.prototype.Tremolo=function(e){e||(e=this.getDefaults()),this.input=l.createGain(),this.splitter=this.activateNode=l.createChannelSplitter(2),this.amplitudeL=l.createGain(),this.amplitudeR=l.createGain(),this.merger=l.createChannelMerger(2),this.output=l.createGain(),this.lfoL=new h.LFO({target:this.amplitudeL.gain,callback:f}),this.lfoR=new h.LFO({target:this.amplitudeR.gain,callback:f}),this.input.connect(this.splitter),this.splitter.connect(this.amplitudeL,0),this.splitter.connect(this.amplitudeR,1),this.amplitudeL.connect(this.merger,0,0),this.amplitudeR.connect(this.merger,0,1),this.merger.connect(this.output),this.rate=e.rate||this.defaults.rate.value,this.intensity=c(e.intensity,this.defaults.intensity.value),this.stereoPhase=c(e.stereoPhase,this.defaults.stereoPhase.value),this.lfoL.offset=1-this.intensity/2,this.lfoR.offset=1-this.intensity/2,this.lfoL.phase=this.stereoPhase*Math.PI/180,this.lfoL.activate(!0),this.lfoR.activate(!0),this.bypass=e.bypass||!1},i.prototype.Tremolo.prototype=Object.create(p,{name:{value:"Tremolo"},defaults:{writable:!0,value:{intensity:{value:.3,min:0,max:1,automatable:!1,type:d},stereoPhase:{value:0,min:0,max:180,automatable:!1,type:d},rate:{value:5,min:.1,max:11,automatable:!1,type:d}}},intensity:{enumerable:!0,get:function(){return this._intensity},set:function(e){this._intensity=e,this.lfoL.offset=1-this._intensity/2,this.lfoR.offset=1-this._intensity/2,this.lfoL.oscillation=this._intensity,this.lfoR.oscillation=this._intensity}},rate:{enumerable:!0,get:function(){return this._rate},set:function(e){this._rate=e,this.lfoL.frequency=this._rate,this.lfoR.frequency=this._rate}},stereoPhase:{enumerable:!0,get:function(){return this._rate},set:function(e){this._stereoPhase=e;var t=this.lfoL._phase+this._stereoPhase*Math.PI/180;t=a(t,2*Math.PI),this.lfoR.phase=t}}}),i.prototype.WahWah=function(e){e||(e=this.getDefaults()),this.input=l.createGain(),this.activateNode=l.createGain(),this.envelopeFollower=new h.EnvelopeFollower({target:this,callback:function(e,t){e.sweep=t}}),this.filterBp=l.createBiquadFilter(),this.filterPeaking=l.createBiquadFilter(),this.output=l.createGain(),this.activateNode.connect(this.filterBp),this.filterBp.connect(this.filterPeaking),this.filterPeaking.connect(this.output),this.init(),this.automode=c(e.enableAutoMode,this.defaults.automode.value),this.resonance=e.resonance||this.defaults.resonance.value,this.sensitivity=c(e.sensitivity,this.defaults.sensitivity.value),this.baseFrequency=c(e.baseFrequency,this.defaults.baseFrequency.value),this.excursionOctaves=e.excursionOctaves||this.defaults.excursionOctaves.value,this.sweep=c(e.sweep,this.defaults.sweep.value),this.activateNode.gain.value=2,this.envelopeFollower.activate(!0),this.bypass=e.bypass||!1},i.prototype.WahWah.prototype=Object.create(p,{name:{value:"WahWah"},defaults:{writable:!0,value:{automode:{value:!0,automatable:!1,type:g},baseFrequency:{value:.5,min:0,max:1,automatable:!1,type:d},excursionOctaves:{value:2,min:1,max:6,automatable:!1,type:d},sweep:{value:.2,min:0,max:1,automatable:!1,type:d},resonance:{value:10,min:1,max:100,automatable:!1,type:d},sensitivity:{value:.5,min:-1,max:1,automatable:!1,type:d}}},activateCallback:{value:function(e){this.automode=e}},automode:{get:function(){return this._automode},set:function(e){this._automode=e,e?(this.activateNode.connect(this.envelopeFollower.input),this.envelopeFollower.activate(!0)):(this.envelopeFollower.activate(!1),this.activateNode.disconnect(),this.activateNode.connect(this.filterBp))}},filterFreqTimeout:{value:0},setFilterFreq:{value:function(){try{this.filterBp.frequency.value=this._baseFrequency+this._excursionFrequency*this._sweep,this.filterPeaking.frequency.value=this._baseFrequency+this._excursionFrequency*this._sweep}catch(e){clearTimeout(this.filterFreqTimeout),this.filterFreqTimeout=setTimeout(function(){this.setFilterFreq()}.bind(this),0)}}},sweep:{enumerable:!0,get:function(){return this._sweep.value},set:function(e){this._sweep=Math.pow(e>1?1:0>e?0:e,this._sensitivity),this.setFilterFreq()}},baseFrequency:{enumerable:!0,get:function(){return this._baseFrequency},set:function(e){this._baseFrequency=50*Math.pow(10,2*e),this._excursionFrequency=Math.min(l.sampleRate/2,this.baseFrequency*Math.pow(2,this._excursionOctaves)),this.setFilterFreq()}},excursionOctaves:{enumerable:!0,get:function(){return this._excursionOctaves},set:function(e){this._excursionOctaves=e,this._excursionFrequency=Math.min(l.sampleRate/2,this.baseFrequency*Math.pow(2,this._excursionOctaves)),this.setFilterFreq()}},sensitivity:{enumerable:!0,get:function(){return this._sensitivity},set:function(e){this._sensitivity=Math.pow(10,e)}},resonance:{enumerable:!0,get:function(){return this._resonance},set:function(e){this._resonance=e,this.filterPeaking.Q=this._resonance}},init:{value:function(){this.output.gain.value=1,this.filterPeaking.type="peaking",this.filterBp.type="bandpass",this.filterPeaking.frequency.value=100,this.filterPeaking.gain.value=20,this.filterPeaking.Q.value=5,this.filterBp.frequency.value=100,this.filterBp.Q.value=1}}}),i.prototype.EnvelopeFollower=function(e){e||(e=this.getDefaults()),this.input=l.createGain(),this.jsNode=this.output=l.createScriptProcessor(this.buffersize,1,1),this.input.connect(this.output),this.attackTime=c(e.attackTime,this.defaults.attackTime.value),this.releaseTime=c(e.releaseTime,this.defaults.releaseTime.value),this._envelope=0,this.target=e.target||{},this.callback=e.callback||function(){}},i.prototype.EnvelopeFollower.prototype=Object.create(p,{name:{value:"EnvelopeFollower"},defaults:{value:{attackTime:{value:.003,min:0,max:.5,automatable:!1,type:d},releaseTime:{value:.5,min:0,max:.5,automatable:!1,type:d}}},buffersize:{value:256},envelope:{value:0},sampleRate:{value:44100},attackTime:{enumerable:!0,get:function(){return this._attackTime},set:function(e){this._attackTime=e,this._attackC=Math.exp(-1/this._attackTime*this.sampleRate/this.buffersize)}},releaseTime:{enumerable:!0,get:function(){return this._releaseTime},set:function(e){this._releaseTime=e,this._releaseC=Math.exp(-1/this._releaseTime*this.sampleRate/this.buffersize)}},callback:{get:function(){return this._callback},set:function(e){"function"==typeof e?this._callback=e:console.error("tuna.js: "+this.name+": Callback must be a function!")}},target:{get:function(){return this._target},set:function(e){this._target=e}},activate:{value:function(e){this.activated=e,e?(this.jsNode.connect(l.destination),this.jsNode.onaudioprocess=this.returnCompute(this)):(this.jsNode.disconnect(),this.jsNode.onaudioprocess=null)}},returnCompute:{value:function(e){return function(t){e.compute(t)}}},compute:{value:function(e){var t,n,i,r,o=e.inputBuffer.getChannelData(0).length,a=e.inputBuffer.numberOfChannels;if(n=i=r=0,a>1)for(r=0;o>r;++r)for(;a>n;++n)t=e.inputBuffer.getChannelData(n)[r],i+=t*t/a;else for(r=0;o>r;++r)t=e.inputBuffer.getChannelData(0)[r],i+=t*t;i=Math.sqrt(i),this._envelope<i?(this._envelope*=this._attackC,this._envelope+=(1-this._attackC)*i):(this._envelope*=this._releaseC,this._envelope+=(1-this._releaseC)*i),this._callback(this._target,this._envelope)}}}),i.prototype.LFO=function(e){this.output=l.createScriptProcessor(256,1,1),this.activateNode=l.destination,this.frequency=c(e.frequency,this.defaults.frequency.value),this.offset=c(e.offset,this.defaults.offset.value),this.oscillation=c(e.oscillation,this.defaults.oscillation.value),this.phase=c(e.phase,this.defaults.phase.value),this.target=e.target||{},this.output.onaudioprocess=this.callback(e.callback||function(){}),this.bypass=e.bypass||!1},i.prototype.LFO.prototype=Object.create(p,{name:{value:"LFO"},bufferSize:{value:256},sampleRate:{value:44100},defaults:{value:{frequency:{value:1,min:0,max:20,automatable:!1,type:d},offset:{value:.85,min:0,max:22049,automatable:!1,type:d},oscillation:{value:.3,min:-22050,max:22050,automatable:!1,type:d},phase:{value:0,min:0,max:2*Math.PI,automatable:!1,type:d}}},frequency:{get:function(){return this._frequency},set:function(e){this._frequency=e,this._phaseInc=2*Math.PI*this._frequency*this.bufferSize/this.sampleRate}},offset:{get:function(){return this._offset},set:function(e){this._offset=e}},oscillation:{get:function(){return this._oscillation},set:function(e){this._oscillation=e}},phase:{get:function(){return this._phase},set:function(e){this._phase=e}},target:{get:function(){return this._target},set:function(e){this._target=e}},activate:{value:function(e){e?this.output.connect(l.destination):this.output.disconnect(l.destination)}},callback:{value:function(e){var t=this;return function(){t._phase+=t._phaseInc,t._phase>2*Math.PI&&(t._phase=0),e(t._target,t._offset+t._oscillation*Math.sin(t._phase))}}}}),i.toString=i.prototype.toString=function(){return"Please visit https://github.com/Theodeus/tuna/wiki for instructions on how to use Tuna.js"}}(this)},{}]},{},[1]);